/**
 * Host Editing Proposal - Simplified Styles
 *
 * 3-state view machine: pristine | editing | general
 * Based on Split Lease Design System v1.0
 */

/* ========================================
   CSS Variables - Design System Tokens
   ======================================== */

.hep-container {
  /* ===== SPLIT LEASE DESIGN SYSTEM - Purple Monochromatic ===== */

  /* Primary Purple Palette (NO GREEN, NO BLUE) */
  --color-primary: #31135D;           /* Primary Purple - headers, buttons, icons */
  --color-primary-hover: #250F4A;     /* Darker for hover states */
  --color-primary-action: #5B5FCF;    /* Action Purple - success/positive states */
  --color-primary-secondary: #6D31C2; /* Secondary Purple - accents, focus rings */
  --color-primary-light: #F7F2FA;     /* Light Purple - backgrounds, hovers */
  --color-primary-tint: #f8f5ff;      /* Subtle backgrounds */

  /* Text Colors (WCAG AAA compliant) */
  --color-text: #111111;              /* Primary body text */
  --color-text-secondary: #374151;    /* Supporting content */
  --color-text-muted: #4b5563;        /* Meta information */
  --color-text-ghost: #49454F;        /* Ghost button text */

  /* UI Colors */
  --color-white: #FFFFFF;
  --color-border: #E7E0EC;            /* Card borders, dividers */
  --color-danger: #DC3545;            /* Error/danger - OUTLINED ONLY */
  --color-danger-light: #fce8e8;      /* Danger background tint */

  /* Legacy Neutrals (mapped to design system) */
  --color-gray-50: #F7F2FA;           /* Maps to primary-light */
  --color-gray-100: #E7E0EC;          /* Maps to border */
  --color-gray-200: #E7E0EC;
  --color-gray-300: #D1D5DB;
  --color-gray-400: #9CA3AF;
  --color-gray-500: #4b5563;          /* Maps to text-muted */
  --color-gray-600: #374151;          /* Maps to text-secondary */
  --color-gray-700: #374151;
  --color-gray-800: #1F2937;
  --color-gray-900: #111111;          /* Maps to text */

  /* Typography */
  --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-size-base: 17px;
  --font-size-sm: 15px;
  --font-size-label: 14px;
  --font-size-md: 18px;
  --line-height-tight: 1.3;
  --line-height-normal: 1.6;

  /* Spacing (8/16/24 scale) */
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 12px;
  --spacing-lg: 16px;
  --spacing-xl: 20px;
  --spacing-2xl: 24px;

  /* Touch Targets */
  --min-touch-target: 48px;

  /* Border Radius */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 24px;
  --radius-pill: 100px;               /* Pill-shaped buttons */
  --radius-full: 9999px;

  /* Focus States */
  --focus-outline: 3px solid var(--color-primary-secondary);
  --focus-offset: 3px;
  --focus-ring: 0 0 0 4px rgba(109, 49, 194, 0.5);

  /* Transitions */
  --transition-fast: 150ms ease;
  --transition-base: 200ms ease;
}

/* ========================================
   Base Container
   ======================================== */

.hep-container {
  background: var(--color-white);
  border-radius: var(--radius-lg);  /* 24px per design system */
  display: flex;
  flex-direction: column;
  font-family: var(--font-family);
  max-height: 92vh;  /* Design system modal max height */
  overflow: hidden;
}

.hep-container *,
.hep-container *::before,
.hep-container *::after {
  box-sizing: border-box;
}

/* ========================================
   Mobile Grab Handle
   ======================================== */

.hep-grab-handle {
  width: 36px;
  height: 4px;
  background: var(--color-border);  /* Design system border color */
  border-radius: var(--radius-full);
  margin: var(--spacing-sm) auto var(--spacing-xs);
  display: none;
}

/* ========================================
   Header
   ======================================== */

.hep-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-lg) var(--spacing-xl);
  border-bottom: 1px solid var(--color-gray-100);
  flex-shrink: 0;
}

.hep-header-left {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  flex: 1;
  min-width: 0;
}

.hep-header-icon {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-primary-light);
  border-radius: var(--radius-md);
  color: var(--color-primary);
  flex-shrink: 0;
}

.hep-header-icon--success {
  background: var(--color-primary-light);      /* Purple light background */
  color: var(--color-primary-action);          /* Action Purple (not green!) */
}

.hep-header-back {
  width: 44px;
  height: 44px;
  min-width: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  flex-shrink: 0;
}

.hep-header-back:hover {
  opacity: 0.7;
}

.hep-header-title {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-gray-900);
  line-height: 1.3;
  margin: 0;
}

.hep-header-subtitle {
  font-size: 14px;
  font-weight: 400;
  color: var(--color-gray-500);
  line-height: 1.3;
  margin-top: 2px;
}

.hep-header-close {
  width: 44px;
  height: 44px;
  min-width: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  flex-shrink: 0;
}

.hep-header-close:hover {
  opacity: 0.7;
}

.hep-header-close:focus-visible {
  outline: var(--focus-outline);
  outline-offset: var(--focus-offset);
}

/* ========================================
   Back Link - Below Header Navigation
   ======================================== */

.hep-back-link {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) 0;
  margin-bottom: var(--spacing-lg);
  background: none;
  border: none;
  font-family: var(--font-family);
  font-size: var(--font-size-sm);
  font-weight: 500;
  color: var(--color-primary);
  cursor: pointer;
  transition: opacity var(--transition-fast);
}

.hep-back-link:hover {
  opacity: 0.7;
}

.hep-back-link:focus-visible {
  outline: var(--focus-outline);
  outline-offset: var(--focus-offset);
}

.hep-back-link svg {
  flex-shrink: 0;
}

/* ========================================
   Body - Scrollable Content
   ======================================== */

.hep-body {
  flex: 1;
  overflow-y: auto;
  padding: var(--spacing-xl);
  -webkit-overflow-scrolling: touch;
}

/* ========================================
   Pristine View - Readonly Details
   ======================================== */

.hep-pristine-view {
  display: flex;
  flex-direction: column;
}

.hep-detail-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-md) 0;
  border-bottom: 1px solid var(--color-gray-100);
}

.hep-detail-row:last-of-type {
  border-bottom: none;
}

.hep-detail-label {
  font-size: 14px;
  font-weight: 400;
  color: var(--color-gray-600);
}

.hep-detail-value {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-gray-900);
  text-align: right;
}

/* Pricing Section */
.hep-pricing-section {
  background: var(--color-gray-50);
  border-radius: var(--radius-md);
  padding: var(--spacing-lg);
  margin-top: var(--spacing-lg);
}

.hep-pricing-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-gray-700);
  margin-bottom: var(--spacing-md);
}

.hep-pricing-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-sm) 0;
}

.hep-pricing-row--total {
  border-top: 1px solid var(--color-gray-200);
  margin-top: var(--spacing-sm);
  padding-top: var(--spacing-md);
}

.hep-pricing-label {
  font-size: 14px;
  font-weight: 400;
  color: var(--color-gray-600);
}

.hep-pricing-value {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-gray-900);
}

.hep-pricing-row--total .hep-pricing-label,
.hep-pricing-row--total .hep-pricing-value {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-primary);
}

/* ========================================
   Editing View - Form Fields
   ======================================== */

.hep-editing-view {
  display: flex;
  flex-direction: column;
  gap: 0;
}

.hep-form-section {
  margin-bottom: var(--spacing-xl);
}

.hep-form-section:last-child {
  margin-bottom: 0;
}

.hep-form-section--inline {
  margin-top: var(--spacing-md);
  margin-bottom: 0;
}

.hep-form-label {
  display: block;
  font-size: 13px;
  font-weight: 600;
  color: var(--color-gray-600);
  margin-bottom: var(--spacing-sm);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* ========================================
   Footer - Action Buttons
   ======================================== */

.hep-footer {
  display: flex;
  gap: var(--spacing-md);
  padding: var(--spacing-lg) var(--spacing-xl);
  border-top: 1px solid var(--color-gray-100);
  flex-shrink: 0;
}

.hep-footer--vertical {
  flex-direction: column;
}

.hep-footer--vertical .hep-btn {
  width: 100%;
}

/* ========================================
   Buttons - Pill-Shaped per Design System
   ======================================== */

.hep-btn {
  flex: 1;
  padding: var(--spacing-lg) var(--spacing-2xl);  /* 16px 24px */
  border-radius: var(--radius-pill);              /* 100px - always pill-shaped */
  font-family: var(--font-family);
  font-size: var(--font-size-base);               /* 17px */
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition-fast);
  border: 2px solid transparent;
  text-align: center;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-height: var(--min-touch-target);            /* 48px minimum */
  min-width: 120px;
}

.hep-btn:focus-visible {
  outline: var(--focus-outline);
  outline-offset: var(--focus-offset);
}

.hep-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Primary Button - Solid purple */
.hep-btn-primary {
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: var(--color-white);
}

.hep-btn-primary:hover:not(:disabled) {
  background: var(--color-primary-hover);
  border-color: var(--color-primary-hover);
}

/* Secondary Button - Outlined purple */
.hep-btn-secondary {
  background: transparent;
  color: var(--color-primary);
  border: 2px solid var(--color-primary);
}

.hep-btn-secondary:hover:not(:disabled) {
  background: var(--color-primary-light);
}

/* Success Button - Uses Action Purple (NOT green!) */
.hep-btn-success {
  background: var(--color-primary-action);
  border-color: var(--color-primary-action);
  color: var(--color-white);
}

.hep-btn-success:hover:not(:disabled) {
  background: #4A4EB8;  /* Slightly darker action purple */
  border-color: #4A4EB8;
}

/* Danger/Reject Button - OUTLINED ONLY per design system */
.hep-btn-reject-outline {
  background: transparent;
  color: var(--color-danger);
  border: 2px solid var(--color-danger);
}

.hep-btn-reject-outline:hover:not(:disabled) {
  background: var(--color-danger-light);
}

/* ========================================
   Form Inputs (Base styles for sub-components)
   ======================================== */

/* Base input styling - Design System compliant */
.hep-input-base {
  width: 100%;
  height: var(--min-touch-target);              /* 48px minimum touch target */
  padding: 0 var(--spacing-lg);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);              /* 12px */
  font-family: var(--font-family);
  font-size: var(--font-size-base);             /* 17px minimum readable */
  color: var(--color-text);
  background: var(--color-white);
  transition: all var(--transition-fast);
}

.hep-input-base:hover {
  border-color: var(--color-primary-secondary);
}

.hep-input-base:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: var(--focus-ring);
}

.hep-input-base:focus-visible {
  outline: var(--focus-outline);
  outline-offset: var(--focus-offset);
}

.hep-input-base::placeholder {
  color: var(--color-text-muted);
}

.hep-input-base:disabled {
  background: var(--color-primary-light);
  color: var(--color-text-muted);
  cursor: not-allowed;
}

/* Date Input Wrapper */
.hep-date-input-wrapper {
  position: relative;
}

.hep-input-date {
  padding-right: 48px;
}

.hep-date-icon {
  position: absolute;
  right: var(--spacing-lg);
  top: 50%;
  transform: translateY(-50%);
  color: var(--color-gray-400);
  pointer-events: none;
}

/* Number Input */
.hep-input-number {
  -moz-appearance: textfield;
}

.hep-input-number::-webkit-outer-spin-button,
.hep-input-number::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Dropdown Wrapper */
.hep-dropdown-wrapper {
  position: relative;
}

/* Dropdown Button (styled as input) */
.hep-dropdown {
  width: 100%;
  height: 48px;
  padding: 0 var(--spacing-lg);
  border: 1px solid var(--color-gray-200);
  border-radius: var(--radius-lg);
  font-family: var(--font-family);
  font-size: 15px;
  color: var(--color-gray-900);
  background: var(--color-white);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  text-align: left;
  transition: all var(--transition-fast);
}

.hep-dropdown:hover {
  border-color: var(--color-gray-300);
}

.hep-dropdown:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px var(--color-primary-light);
}

.hep-placeholder {
  color: var(--color-gray-400);
}

.hep-dropdown-chevron {
  color: var(--color-gray-400);
  transition: transform var(--transition-fast);
  flex-shrink: 0;
}

.hep-dropdown-chevron--open {
  transform: rotate(180deg);
}

/* Dropdown Menu */
.hep-dropdown-menu {
  position: absolute;
  top: calc(100% + 4px);
  left: 0;
  right: 0;
  max-height: 240px;
  overflow-y: auto;
  background: var(--color-white);
  border: 1px solid var(--color-gray-200);
  border-radius: var(--radius-lg);
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.12);
  z-index: 100;
}

.hep-dropdown-option {
  padding: var(--spacing-md) var(--spacing-lg);
  font-size: 15px;
  color: var(--color-gray-700);
  cursor: pointer;
  transition: background var(--transition-fast);
}

.hep-dropdown-option:hover {
  background: var(--color-gray-50);
}

.hep-dropdown-option--selected {
  background: var(--color-primary-light);
  color: var(--color-primary);
  font-weight: 500;
}

.hep-dropdown-option:not(:last-child) {
  border-bottom: 1px solid var(--color-gray-100);
}

/* ========================================
   House Rules Selector (Chip + Add Pattern)
   Like NeighborhoodSearchFilter
   ======================================== */

.hep-rules-selector {
  position: relative;
}

/* Chips row - wrapping container for selected rules */
.hep-rules-chips {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-sm);
  align-items: center;
  min-height: 48px;
  padding: var(--spacing-sm) 0;
}

/* Individual rule chip - compact blue pill */
.hep-rule-chip {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  background: var(--color-primary);
  color: var(--color-white);
  border-radius: 9999px;
  font-size: 14px;
  font-weight: 500;
  white-space: nowrap;
  line-height: 1;
}

/* Remove button inside chip */
.hep-rule-chip-remove {
  width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.25);
  border: none;
  border-radius: 9999px;
  color: var(--color-white);
  font-size: 14px;
  font-weight: 400;
  cursor: pointer;
  transition: background var(--transition-fast);
  padding: 0;
  line-height: 1;
  margin-left: 2px;
}

.hep-rule-chip-remove:hover {
  background: rgba(255, 255, 255, 0.4);
}

/* Add button - solid circle with "+" (matches neighborhood-add-btn pattern) */
.hep-rules-add-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  padding: 0;
  border: none;
  background: var(--color-gray-100);
  border-radius: 9999px;
  font-size: 18px;
  font-weight: 500;
  color: var(--color-gray-500);
  cursor: pointer;
  transition: all 0.15s;
  flex-shrink: 0;
}

.hep-rules-add-btn:hover {
  background: var(--color-primary-light);
  color: var(--color-primary);
}

/* Empty state button - shows when no rules selected */
.hep-rules-empty {
  width: 100%;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 var(--spacing-lg);
  border: 1px solid var(--color-gray-200);
  border-radius: var(--radius-lg);
  background: var(--color-white);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.hep-rules-empty:hover {
  border-color: var(--color-gray-300);
}

.hep-rules-empty--disabled {
  opacity: 0.6;
  cursor: not-allowed;
  background: var(--color-gray-50);
}

.hep-rules-empty-text {
  color: var(--color-gray-400);
  font-size: 15px;
}

.hep-rules-empty-icon {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-gray-100);
  border-radius: 9999px;
  color: var(--color-gray-500);
  font-size: 18px;
  font-weight: 500;
  flex-shrink: 0;
}

.hep-rules-empty:hover .hep-rules-empty-icon {
  background: var(--color-primary-light);
  color: var(--color-primary);
}

/* Dropdown menu */
.hep-rules-dropdown {
  position: absolute;
  top: calc(100% + 4px);
  left: 0;
  right: 0;
  max-height: 240px;
  overflow-y: auto;
  background: var(--color-white);
  border: 1px solid var(--color-gray-200);
  border-radius: var(--radius-lg);
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.12);
  z-index: 100;
}

/* Option in dropdown */
.hep-rules-option {
  display: block;
  width: 100%;
  padding: var(--spacing-md) var(--spacing-lg);
  border: none;
  background: transparent;
  text-align: left;
  font-size: 15px;
  color: var(--color-gray-700);
  cursor: pointer;
  transition: background var(--transition-fast);
}

.hep-rules-option:hover {
  background: var(--color-gray-50);
}

.hep-rules-option:not(:last-child) {
  border-bottom: 1px solid var(--color-gray-100);
}

/* Empty dropdown state */
.hep-rules-dropdown-empty {
  padding: var(--spacing-xl);
  text-align: center;
  color: var(--color-gray-400);
  font-size: 14px;
}

/* ========================================
   House Rules Popup Modal
   Design System compliant centered modal
   ======================================== */

/* Popup overlay - dark backdrop with click-to-close */
.hep-rules-popup-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: var(--spacing-2xl);
}

/* Popup container - 24px border radius per design system */
.hep-rules-popup {
  background: var(--color-white);
  border-radius: var(--radius-lg);               /* 24px */
  width: 100%;
  max-width: 360px;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
              0 10px 10px -5px rgba(0, 0, 0, 0.04);
  overflow: hidden;
  animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

@keyframes slideUp {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Popup header */
.hep-rules-popup-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-lg);                    /* 16px */
  border-bottom: 1px solid var(--color-border);
  flex-shrink: 0;
}

.hep-rules-popup-title {
  font-size: var(--font-size-md);                /* 18px */
  font-weight: 600;
  color: var(--color-text);
}

.hep-rules-popup-close {
  width: var(--min-touch-target);                /* 48px touch target */
  height: var(--min-touch-target);
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  border-radius: var(--radius-md);
  color: var(--color-text-muted);
  cursor: pointer;
  transition: all var(--transition-fast);
  margin: -8px;                                  /* Extend touch area */
}

.hep-rules-popup-close:hover {
  background: var(--color-primary-light);
  color: var(--color-primary);
}

.hep-rules-popup-close:focus-visible {
  outline: var(--focus-outline);
  outline-offset: var(--focus-offset);
}

/* Popup body - scrollable options list */
.hep-rules-popup-body {
  flex: 1;
  overflow-y: auto;
  padding: var(--spacing-sm) 0;
  -webkit-overflow-scrolling: touch;
}

/* Individual option button - 48px minimum height */
.hep-rules-popup-option {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  min-height: var(--min-touch-target);           /* 48px touch target */
  padding: var(--spacing-md) var(--spacing-lg);
  background: transparent;
  border: none;
  text-align: left;
  font-family: var(--font-family);
  font-size: var(--font-size-base);              /* 17px */
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: background var(--transition-fast);
}

.hep-rules-popup-option:hover {
  background: var(--color-primary-tint);
}

.hep-rules-popup-option:focus-visible {
  outline: var(--focus-outline);
  outline-offset: -3px;
}

.hep-rules-popup-option--selected {
  background: var(--color-primary-light);
  color: var(--color-primary);
}

.hep-rules-popup-option--selected:hover {
  background: var(--color-primary-light);
}

.hep-rules-popup-option-text {
  flex: 1;
  font-weight: 400;
}

.hep-rules-popup-option--selected .hep-rules-popup-option-text {
  font-weight: 500;
}

/* Checkbox indicator */
.hep-rules-popup-checkbox {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 2px solid var(--color-border);
  border-radius: var(--radius-sm);
  flex-shrink: 0;
  margin-left: var(--spacing-md);
  transition: all var(--transition-fast);
}

.hep-rules-popup-checkbox--checked {
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: var(--color-white);
}

/* Popup footer */
.hep-rules-popup-footer {
  padding: var(--spacing-lg);                    /* 16px */
  border-top: 1px solid var(--color-border);
  flex-shrink: 0;
}

/* Done button - pill-shaped per design system */
.hep-rules-popup-done {
  width: 100%;
  min-height: var(--min-touch-target);           /* 48px */
  padding: var(--spacing-lg) var(--spacing-2xl);
  background: var(--color-primary);
  color: var(--color-white);
  border: 2px solid var(--color-primary);
  border-radius: var(--radius-pill);             /* 100px - pill shaped */
  font-family: var(--font-family);
  font-size: var(--font-size-base);              /* 17px */
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.hep-rules-popup-done:hover {
  background: var(--color-primary-hover);
  border-color: var(--color-primary-hover);
}

.hep-rules-popup-done:focus-visible {
  outline: var(--focus-outline);
  outline-offset: var(--focus-offset);
}

/* ========================================
   Confirmation Popup
   ======================================== */

.hep-popup-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: var(--spacing-xl);
}

.hep-popup {
  background: var(--color-white);
  border-radius: var(--radius-lg);
  padding: var(--spacing-2xl);
  max-width: 400px;
  width: 100%;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
}

.hep-popup-title {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-gray-900);
  margin: 0 0 var(--spacing-lg) 0;
}

.hep-popup-content {
  font-size: 14px;
  color: var(--color-gray-600);
  line-height: 1.5;
  margin: 0 0 var(--spacing-2xl) 0;
}

.hep-popup-actions {
  display: flex;
  gap: var(--spacing-md);
  justify-content: flex-end;
}

/* ========================================
   Schedule Selector (ScheduleSelector.jsx)
   ======================================== */

.hss-host-schedule-selector {
  padding: var(--spacing-lg);
  background: var(--color-gray-50);
  border-radius: var(--radius-md);
}

.hss-nights-grid {
  display: flex;
  gap: var(--spacing-xs);
  justify-content: flex-start;
  margin-bottom: var(--spacing-md);
}

.hss-night-cell {
  width: 40px;
  height: 40px;
  border: 2px solid var(--color-gray-200);
  background: var(--color-white);
  border-radius: var(--radius-md);
  font-size: 14px;
  font-weight: 600;
  color: var(--color-gray-500);
  cursor: pointer;
  transition: all var(--transition-fast);
  display: flex;
  align-items: center;
  justify-content: center;
}

.hss-night-cell:hover:not(.hss-unavailable):not(.hss-disabled) {
  border-color: var(--color-primary);
  color: var(--color-primary);
}

.hss-night-cell.hss-selected {
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: var(--color-white);
}

.hss-night-cell.hss-unavailable,
.hss-night-cell.hss-disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.hss-selection-summary {
  background: var(--color-gray-50);
  border-radius: var(--radius-md);
  padding: var(--spacing-md);
}

.hss-summary-item {
  display: flex;
  justify-content: space-between;
  font-size: 14px;
  padding: var(--spacing-xs) 0;
}

.hss-summary-label {
  color: var(--color-gray-500);
}

.hss-summary-value {
  font-weight: 500;
  color: var(--color-gray-800);
}

/* ========================================
   Reservation Price Breakdown (General View)
   Mockup-matched design: clean rows, "Changed" badges
   ======================================== */

.hep-breakdown {
  display: flex;
  flex-direction: column;
  gap: 0;
}

.hep-breakdown-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-md) 0;
}

.hep-breakdown-label {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  font-size: var(--font-size-label);
  font-weight: 400;
  color: var(--color-text-secondary);
}

.hep-breakdown-value {
  font-size: var(--font-size-label);
  font-weight: 500;
  color: var(--color-text);
  text-align: right;
}

/* Changed values: original struck through + new in Action Purple */
.hep-breakdown-value--changed {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}

.hep-breakdown-original {
  color: var(--color-gray-400);
  text-decoration: line-through;
  font-size: var(--font-size-xs, 12px);
  font-weight: 400;
}

.hep-breakdown-new {
  color: var(--color-primary-action);
  font-weight: 600;
}

/* "Changed" badge - compact pill next to label */
.hep-change-badge {
  display: inline-flex;
  align-items: center;
  background: var(--color-primary-light);
  color: var(--color-primary-action);
  padding: 2px var(--spacing-sm);
  border-radius: var(--radius-full);
  font-size: 11px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

/* Divider between sections */
.hep-breakdown-divider {
  border: none;
  border-top: 1px solid var(--color-gray-200);
  margin: var(--spacing-md) 0;
}

/* Total row - emphasized styling */
.hep-breakdown-total {
  padding-top: var(--spacing-lg);
}

.hep-breakdown-total .hep-breakdown-label {
  font-size: var(--font-size-base);
  font-weight: 600;
  color: var(--color-text);
}

.hep-breakdown-total .hep-breakdown-value {
  font-size: var(--font-size-base);
  font-weight: 600;
  color: var(--color-primary);
}

.hep-breakdown-total .hep-breakdown-new {
  font-size: var(--font-size-base);
}

/* ========================================
   Responsive - Mobile (Bottom Sheet Pattern)
   Per Split Lease Design System v1.0
   ======================================== */

@media (max-width: 480px) {
  /* Show grab handle on mobile */
  .hep-grab-handle {
    display: block;
  }

  /* Container becomes bottom sheet with rounded top corners */
  .hep-container {
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;  /* 24px 24px 0 0 */
    max-height: 92vh;
    animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  }

  /* Header: 16px padding, 18px title weight 400 per spec */
  .hep-header {
    padding: var(--spacing-lg);                  /* 16px */
  }

  .hep-header-title {
    font-size: var(--font-size-md);              /* 18px */
    font-weight: 400;                            /* Mobile: NOT bold per design system */
  }

  .hep-header-subtitle {
    font-size: var(--font-size-sm);              /* 15px minimum */
  }

  /* Mobile header icons smaller */
  .hep-header-icon,
  .hep-header-back {
    width: 20px;
    height: 20px;
  }

  .hep-header-icon svg,
  .hep-header-back svg {
    width: 20px;
    height: 20px;
  }

  .hep-body {
    padding: var(--spacing-lg);                  /* 16px */
  }

  /* Footer: 12px top, 20px bottom for safe area */
  .hep-footer {
    flex-direction: column;
    padding: var(--spacing-md) var(--spacing-lg) var(--spacing-xl);
    padding-bottom: calc(var(--spacing-xl) + env(safe-area-inset-bottom, 0px));
  }

  .hep-footer .hep-btn {
    width: 100%;
  }

  /* Confirmation Popup */
  .hep-popup {
    padding: var(--spacing-lg);
    max-width: calc(100vw - 32px);
  }

  .hep-popup-actions {
    flex-direction: column;
  }

  .hep-popup-actions .hep-btn {
    width: 100%;
  }

  /* House Rules Popup - Mobile Bottom Sheet */
  .hep-rules-popup-overlay {
    align-items: flex-end;
    padding: 0;
  }

  .hep-rules-popup {
    max-width: 100%;
    max-height: 85vh;
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;  /* 24px 24px 0 0 */
    animation: slideUpFull 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  }

  @keyframes slideUpFull {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  .hep-rules-popup-header {
    padding: var(--spacing-lg);                  /* 16px */
  }

  .hep-rules-popup-title {
    font-size: var(--font-size-md);              /* 18px */
    font-weight: 400;                            /* Mobile: NOT bold per design system */
  }

  .hep-rules-popup-option {
    padding: var(--spacing-md) var(--spacing-lg);
  }

  .hep-rules-popup-footer {
    padding: var(--spacing-md) var(--spacing-lg) var(--spacing-xl);
    padding-bottom: calc(var(--spacing-xl) + env(safe-area-inset-bottom, 0px));
  }
}

/* ========================================
   Reduced Motion Preference
   ======================================== */

@media (prefers-reduced-motion: reduce) {
  .hep-container,
  .hep-rules-popup,
  .hep-btn,
  .hep-input-base,
  .hep-dropdown,
  .hep-dropdown-chevron {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ========================================
   High Contrast Mode
   ======================================== */

@media (prefers-contrast: high) {
  .hep-container {
    --color-border: #000;
    --color-text-muted: #374151;
  }

  .hep-btn {
    border-width: 3px;
  }

  .hep-input-base {
    border-width: 2px;
  }

  .hep-rules-popup-checkbox {
    border-width: 3px;
  }
}

/* ========================================
   Accept Mode Styles
   ======================================== */

.hep-header--accept .hep-header-icon--success {
  background: linear-gradient(135deg, #10B981 0%, #059669 100%);
  color: var(--color-white);
}

.hep-accept-view {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

.hep-accept-message {
  background: var(--color-primary-light);
  border-radius: var(--radius-md);
  padding: var(--spacing-lg);
  border-left: 4px solid var(--color-primary);
}

.hep-accept-message p {
  margin: 0;
  color: var(--color-text);
  font-size: var(--font-size-base);
  line-height: var(--line-height-normal);
}

.hep-footer--accept {
  gap: var(--spacing-md);
}

.hep-footer--accept .hep-btn-success {
  background: linear-gradient(135deg, #10B981 0%, #059669 100%);
  color: var(--color-white);
  border: none;
}

.hep-footer--accept .hep-btn-success:hover:not(:disabled) {
  background: linear-gradient(135deg, #059669 0%, #047857 100%);
}

.hep-footer--accept .hep-btn-success:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}
