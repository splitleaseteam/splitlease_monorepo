import{r as l,j as e,c as be,R as je}from"./client-BJVKzfAi.js";import{u as Ne,a as ve}from"./Toast-BQk6Nzgd.js";import{s as ye}from"./supabase-BoCLEw6R.js";import{P as S}from"./pricingConstants-B1FVgRNI.js";import{m as $}from"./displayUtils-CS8KoWLq.js";import{A as I}from"./AdminHeader-tCInZd3n.js";import{E as ke}from"./ErrorBoundary-9_HbXv1y.js";/* empty css             */import"./config-QPKPRtag.js";import"./auth-QZ4BJadW.js";import"./star-OtPMgcH9.js";import"./createLucideIcon-CgZZH2OU.js";import"./file-text-Bqp_Hw0X.js";import"./triangle-alert-Bp6DQQmR.js";import"./users-d0RSvnp4.js";import"./pen-line-Duo49k9O.js";import"./calendar-CDI4qHEX.js";import"./mail-CRbL90NL.js";import"./user-check-CoCGzn5Y.js";import"./dollar-sign-Dn2-KjNW.js";import"./send-C4mziT0-.js";import"./x-CrJVeoCh.js";const fe="https://qcfifybkaddcoimjroca.supabase.co",Q=25,Ce=["Manhattan","Brooklyn","Queens","Bronx","Staten Island"],Re=["Full-Time","Part-Time","Flexible"];function Se(t){const i=t.host||{};return{id:t._id,name:t["ðŸ·Name"]||"Untitled Listing",active:t["âœ…Active"]??!1,rentalType:t["ðŸ Rental Type"]||"",borough:t["ðŸ“Borough"]||"",neighborhood:t["ðŸ“Neighborhood"]||"",unitMarkup:t["ðŸ’°Unit Markup"],weeklyHostRate:t["ðŸ’°Weekly Host Rate"],monthlyHostRate:t["ðŸ’°Monthly Host Rate"],nightlyRate2:t["ðŸ’°Nightly Host Rate for 2 nights"],nightlyRate3:t["ðŸ’°Nightly Host Rate for 3 nights"],nightlyRate4:t["ðŸ’°Nightly Host Rate for 4 nights"],nightlyRate5:t["ðŸ’°Nightly Host Rate for 5 nights"],nightlyRate6:t["ðŸ’°Nightly Host Rate for 6 nights"],nightlyRate7:t["ðŸ’°Nightly Host Rate for 7 nights"],cleaningCost:t["ðŸ’°Cleaning Cost / Maintenance Fee"],damageDeposit:t["ðŸ’°Damage Deposit"],priceOverride:t["ðŸ’°Price Override"],extraCharges:t["ðŸ’°Extra Charges"],hostId:i._id||null,hostEmail:i.email||"",hostName:`${i["First Name"]||""} ${i["Last Name"]||""}`.trim()||"Unknown Host",createdAt:t["Created Date"]?new Date(t["Created Date"]):null,modifiedAt:t["Modified Date"]?new Date(t["Modified Date"]):null}}function Fe({showToast:t}){const[i,h]=l.useState([]),[_,o]=l.useState(!0),[g,p]=l.useState(null),[m,c]=l.useState(""),[x,L]=l.useState(0),[y,O]=l.useState(""),[k,E]=l.useState(""),[v,H]=l.useState(""),[f,T]=l.useState(""),[r,U]=l.useState(!1),[A,W]=l.useState("createdAt"),[M,G]=l.useState("desc"),[B,K]=l.useState(1),[b,P]=l.useState([]),[C,V]=l.useState(null),[q,D]=l.useState({}),[X,z]=l.useState(null),Z=l.useMemo(()=>[{value:"",label:"All Types"},...Re.map(s=>({value:s,label:s}))],[]),ee=l.useMemo(()=>[{value:"",label:"All Boroughs"},...Ce.map(s=>({value:s,label:s}))],[]),ie=l.useMemo(()=>[{value:"createdAt",label:"Created Date"},{value:"modifiedAt",label:"Modified Date"},{value:"name",label:"Name"},{value:"priceOverride",label:"Price Override"},{value:"weeklyHostRate",label:"Weekly Rate"}],[]);l.useEffect(()=>{(async()=>{try{const{data:{session:a}}=await ye.auth.getSession(),n=localStorage.getItem("sl_auth_token")||sessionStorage.getItem("sl_auth_token");c((a==null?void 0:a.access_token)||n||"")}catch(a){console.error("[QuickPrice] Token lookup failed:",a),c("")}})()},[]);const Y=l.useCallback(()=>{const s={"Content-Type":"application/json"};return m&&(s.Authorization=`Bearer ${m}`),s},[m]),u=l.useCallback(async(s,a={})=>{const n=await fetch(`${fe}/functions/v1/pricing-admin`,{method:"POST",headers:Y(),body:JSON.stringify({action:s,payload:a})}),d=await n.json();if(!n.ok||!d.success)throw new Error(d.error||`Action ${s} failed`);return d.data},[Y]),R=l.useCallback(async()=>{o(!0),p(null);try{const s={createdAt:"Created Date",modifiedAt:"Modified Date",name:"ðŸ·Name",priceOverride:"ðŸ’°Price Override",weeklyHostRate:"ðŸ’°Weekly Host Rate"},a=await u("list",{limit:Q,offset:(B-1)*Q,filters:{rentalType:k||void 0,borough:v||void 0,neighborhood:f||void 0,nameSearch:y||void 0,activeOnly:r||void 0},sortField:s[A]||"Created Date",sortOrder:M}),n=(a.listings||[]).map(Se);h(n),L(a.total||0)}catch(s){console.error("[QuickPrice] Fetch error:",s),p(s.message),t({title:"Failed to load listings",content:s.message,type:"error"})}finally{o(!1)}},[B,k,v,f,y,r,A,M,u,t]),J=l.useCallback(async()=>{try{const s=await u("getConfig");z(s)}catch(s){console.error("[QuickPrice] Config fetch error:",s),z({siteMarkupRate:S.SITE_MARKUP_RATE,fullTimeDiscountRate:S.FULL_TIME_DISCOUNT_RATE,fullTimeNightsThreshold:S.FULL_TIME_NIGHTS_THRESHOLD,minNights:S.MIN_NIGHTS,maxNights:S.MAX_NIGHTS,billingCycleWeeks:S.BILLING_CYCLE_WEEKS,isReadOnly:!0})}},[u]);l.useEffect(()=>{R(),J()},[R,J]),l.useEffect(()=>{K(1)},[y,k,v,f,r,A,M]);const te=Math.ceil(x/Q),se=l.useMemo(()=>({total:x,active:i.filter(s=>s.active).length,withOverride:i.filter(s=>s.priceOverride!=null).length,displayed:i.length}),[x,i]),ae=l.useCallback(s=>{P(a=>a.includes(s)?a.filter(n=>n!==s):[...a,s])},[]),le=l.useCallback(()=>{const s=i.map(a=>a.id);P(a=>s.every(d=>a.includes(d))?a.filter(d=>!s.includes(d)):[...new Set([...a,...s])])},[i]),ne=l.useCallback(()=>{P([])},[]),re=l.useMemo(()=>{const s=i.map(a=>a.id);return s.length>0&&s.every(a=>b.includes(a))},[i,b]),ce=l.useCallback(s=>{V(s),D({unitMarkup:s.unitMarkup??"",weeklyHostRate:s.weeklyHostRate??"",monthlyHostRate:s.monthlyHostRate??"",nightlyRate2:s.nightlyRate2??"",nightlyRate3:s.nightlyRate3??"",nightlyRate4:s.nightlyRate4??"",nightlyRate5:s.nightlyRate5??"",nightlyRate6:s.nightlyRate6??"",nightlyRate7:s.nightlyRate7??"",cleaningCost:s.cleaningCost??"",damageDeposit:s.damageDeposit??"",priceOverride:s.priceOverride??"",extraCharges:s.extraCharges??""})},[]),w=l.useCallback(()=>{V(null),D({})},[]),oe=l.useCallback((s,a)=>{D(n=>({...n,[s]:a}))},[]),de=l.useCallback(async()=>{if(!C)return;const s={unitMarkup:"ðŸ’°Unit Markup",weeklyHostRate:"ðŸ’°Weekly Host Rate",monthlyHostRate:"ðŸ’°Monthly Host Rate",nightlyRate2:"ðŸ’°Nightly Host Rate for 2 nights",nightlyRate3:"ðŸ’°Nightly Host Rate for 3 nights",nightlyRate4:"ðŸ’°Nightly Host Rate for 4 nights",nightlyRate5:"ðŸ’°Nightly Host Rate for 5 nights",nightlyRate6:"ðŸ’°Nightly Host Rate for 6 nights",nightlyRate7:"ðŸ’°Nightly Host Rate for 7 nights",cleaningCost:"ðŸ’°Cleaning Cost / Maintenance Fee",damageDeposit:"ðŸ’°Damage Deposit",priceOverride:"ðŸ’°Price Override",extraCharges:"ðŸ’°Extra Charges"},a={};for(const[n,d]of Object.entries(s)){const N=q[n],j=C[n],F=N===""?null:Number(N);F!==(j??null)&&(a[d]=F)}if(Object.keys(a).length===0){t({title:"No changes to save",type:"info"}),w();return}try{o(!0),await u("updatePrice",{listingId:C.id,fields:a}),h(n=>n.map(d=>{if(d.id!==C.id)return d;const N={...d};for(const[j]of Object.entries(s)){const F=q[j];N[j]=F===""?null:Number(F)}return N.modifiedAt=new Date,N})),t({title:"Pricing updated",type:"success"}),w()}catch(n){console.error("[QuickPrice] Update error:",n),t({title:"Failed to update pricing",content:n.message,type:"error"})}finally{o(!1)}},[C,q,u,t,w]),he=l.useCallback(async(s,a)=>{try{o(!0),await u("toggleActive",{listingId:s,active:a}),h(n=>n.map(d=>d.id===s?{...d,active:a,modifiedAt:new Date}:d)),t({title:`Listing ${a?"activated":"deactivated"}`,type:"success"})}catch(n){console.error("[QuickPrice] Toggle active error:",n),t({title:"Failed to update status",content:n.message,type:"error"})}finally{o(!1)}},[u,t]),pe=l.useCallback(async(s,a)=>{try{o(!0),await u("setOverride",{listingId:s,priceOverride:a}),h(n=>n.map(d=>d.id===s?{...d,priceOverride:a,modifiedAt:new Date}:d)),t({title:a===null?"Price override cleared":"Price override set",type:"success"})}catch(n){console.error("[QuickPrice] Set override error:",n),t({title:"Failed to set override",content:n.message,type:"error"})}finally{o(!1)}},[u,t]),ue=l.useCallback(async s=>{if(b.length!==0)try{o(!0),await u("bulkUpdate",{listingIds:b,fields:s}),await R(),t({title:`${b.length} listings updated`,type:"success"}),P([])}catch(a){console.error("[QuickPrice] Bulk update error:",a),t({title:"Bulk update failed",content:a.message,type:"error"})}finally{o(!1)}},[b,u,R,t]),ge=l.useCallback(async(s="csv")=>{const a=b.length>0?b:i.map(n=>n.id);if(a.length===0){t({title:"No listings to export",type:"warning"});return}try{o(!0);const n=await u("export",{listingIds:a,format:s}),d=new Blob([n.content],{type:s==="csv"?"text/csv":"application/json"}),N=URL.createObjectURL(d),j=document.createElement("a");j.href=N,j.download=`listings-pricing-export-${new Date().toISOString().split("T")[0]}.${s}`,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(N),t({title:"Export complete",type:"success"})}catch(n){console.error("[QuickPrice] Export error:",n),t({title:"Export failed",content:n.message,type:"error"})}finally{o(!1)}},[b,i,u,t]),_e=l.useCallback(()=>{G(s=>s==="asc"?"desc":"asc")},[]),me=l.useCallback(()=>{O(""),E(""),H(""),T(""),U(!1),W("createdAt"),G("desc")},[]),xe=l.useCallback(()=>{R()},[R]);return{listings:i,stats:se,pricingConfig:X,isLoading:_,error:g,searchQuery:y,setSearchQuery:O,rentalTypeFilter:k,setRentalTypeFilter:E,boroughFilter:v,setBoroughFilter:H,neighborhoodFilter:f,setNeighborhoodFilter:T,activeOnlyFilter:r,setActiveOnlyFilter:U,sortField:A,setSortField:W,sortOrder:M,toggleSortOrder:_e,rentalTypeOptions:Z,boroughOptions:ee,sortOptions:ie,page:B,setPage:K,totalPages:te,totalCount:x,selectedListings:b,handleSelectListing:ae,handleSelectAll:le,handleClearSelection:ne,isAllSelected:re,editingListing:C,editFormData:q,handleOpenEdit:ce,handleCloseEdit:w,handleEditFormChange:oe,handleSaveEdit:de,handleToggleActive:he,handleSetOverride:pe,handleBulkUpdate:ue,handleBulkExport:ge,handleClearFilters:me,handleRetry:xe}}function Le({searchQuery:t,onSearchChange:i,rentalTypeFilter:h,onRentalTypeChange:_,rentalTypeOptions:o,boroughFilter:g,onBoroughChange:p,boroughOptions:m,neighborhoodFilter:c,onNeighborhoodChange:x,activeOnlyFilter:L,onActiveOnlyChange:y,sortField:O,onSortFieldChange:k,sortOptions:E,sortOrder:v,onSortOrderToggle:H,onClearFilters:f}){const T=t||h||g||c||L;return e.jsxs("div",{className:"pricing-filters",children:[e.jsxs("div",{className:"pricing-filters__header",children:[e.jsx("h2",{className:"pricing-filters__title",children:"Filters"}),T&&e.jsx("button",{className:"pricing-filters__clear-btn",onClick:f,type:"button",children:"Clear all"})]}),e.jsxs("div",{className:"pricing-filters__group",children:[e.jsx("label",{className:"pricing-filters__label",htmlFor:"search",children:"Search"}),e.jsx("input",{id:"search",type:"text",className:"pricing-filters__input",placeholder:"Search by name...",value:t,onChange:r=>i(r.target.value)})]}),e.jsxs("div",{className:"pricing-filters__group",children:[e.jsx("label",{className:"pricing-filters__label",htmlFor:"rentalType",children:"Rental Type"}),e.jsx("select",{id:"rentalType",className:"pricing-filters__select",value:h,onChange:r=>_(r.target.value),children:o.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{className:"pricing-filters__group",children:[e.jsx("label",{className:"pricing-filters__label",htmlFor:"borough",children:"Borough"}),e.jsx("select",{id:"borough",className:"pricing-filters__select",value:g,onChange:r=>p(r.target.value),children:m.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{className:"pricing-filters__group",children:[e.jsx("label",{className:"pricing-filters__label",htmlFor:"neighborhood",children:"Neighborhood"}),e.jsx("input",{id:"neighborhood",type:"text",className:"pricing-filters__input",placeholder:"Filter by neighborhood...",value:c,onChange:r=>x(r.target.value)})]}),e.jsx("div",{className:"pricing-filters__group pricing-filters__group--toggle",children:e.jsxs("label",{className:"pricing-filters__toggle-label",children:[e.jsx("input",{type:"checkbox",className:"pricing-filters__checkbox",checked:L,onChange:r=>y(r.target.checked)}),e.jsx("span",{className:"pricing-filters__toggle-text",children:"Active listings only"})]})}),e.jsx("hr",{className:"pricing-filters__divider"}),e.jsxs("div",{className:"pricing-filters__group",children:[e.jsx("label",{className:"pricing-filters__label",htmlFor:"sortField",children:"Sort By"}),e.jsxs("div",{className:"pricing-filters__sort-row",children:[e.jsx("select",{id:"sortField",className:"pricing-filters__select pricing-filters__select--sort",value:O,onChange:r=>k(r.target.value),children:E.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))}),e.jsx("button",{className:`pricing-filters__sort-btn ${v==="desc"?"pricing-filters__sort-btn--desc":""}`,onClick:H,type:"button","aria-label":`Sort ${v==="asc"?"descending":"ascending"}`,children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16",children:e.jsx("path",{d:"M12 5v14M5 12l7 7 7-7",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})]})}function Oe({listings:t,selectedListings:i,onSelectListing:h,onSelectAll:_,isAllSelected:o,onEditListing:g,onToggleActive:p,onSetOverride:m}){return e.jsx("div",{className:"listings-table-container",children:e.jsxs("table",{className:"listings-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"listings-table__th listings-table__th--checkbox",children:e.jsx("input",{type:"checkbox",checked:o,onChange:_,"aria-label":"Select all listings"})}),e.jsx("th",{className:"listings-table__th",children:"Name"}),e.jsx("th",{className:"listings-table__th",children:"Type"}),e.jsx("th",{className:"listings-table__th",children:"Location"}),e.jsx("th",{className:"listings-table__th listings-table__th--number",children:"Weekly Rate"}),e.jsx("th",{className:"listings-table__th listings-table__th--number",children:"Monthly Rate"}),e.jsx("th",{className:"listings-table__th listings-table__th--number",children:"Override"}),e.jsx("th",{className:"listings-table__th listings-table__th--center",children:"Active"}),e.jsx("th",{className:"listings-table__th listings-table__th--actions",children:"Actions"})]})}),e.jsx("tbody",{children:t.map(c=>e.jsx(Ee,{listing:c,isSelected:i.includes(c.id),onSelect:h,onEdit:g,onToggleActive:p,onSetOverride:m},c.id))})]})})}function Ee({listing:t,isSelected:i,onSelect:h,onEdit:_,onToggleActive:o,onSetOverride:g}){var m;const p=()=>{if(t.priceOverride!=null)g(t.id,null);else{const c=prompt("Enter price override (or leave empty to cancel):");if(c!==null&&c!==""){const x=parseFloat(c);!isNaN(x)&&x>=0&&g(t.id,x)}}};return e.jsxs("tr",{className:`listings-table__row ${i?"listings-table__row--selected":""} ${t.active?"":"listings-table__row--inactive"}`,children:[e.jsx("td",{className:"listings-table__td listings-table__td--checkbox",children:e.jsx("input",{type:"checkbox",checked:i,onChange:()=>h(t.id),"aria-label":`Select ${t.name}`})}),e.jsx("td",{className:"listings-table__td listings-table__td--name",children:e.jsxs("div",{className:"listings-table__name-cell",children:[e.jsx("span",{className:"listings-table__name",children:t.name}),e.jsx("span",{className:"listings-table__host",children:t.hostName})]})}),e.jsx("td",{className:"listings-table__td",children:e.jsx("span",{className:`listings-table__type listings-table__type--${((m=t.rentalType)==null?void 0:m.toLowerCase().replace(/\s+/g,"-"))||"unknown"}`,children:t.rentalType||"N/A"})}),e.jsxs("td",{className:"listings-table__td listings-table__td--location",children:[e.jsx("span",{className:"listings-table__borough",children:t.borough||"N/A"}),t.neighborhood&&e.jsx("span",{className:"listings-table__neighborhood",children:t.neighborhood})]}),e.jsx("td",{className:"listings-table__td listings-table__td--number",children:t.weeklyHostRate!=null?$(t.weeklyHostRate):"â€”"}),e.jsx("td",{className:"listings-table__td listings-table__td--number",children:t.monthlyHostRate!=null?$(t.monthlyHostRate):"â€”"}),e.jsx("td",{className:"listings-table__td listings-table__td--number",children:t.priceOverride!=null?e.jsx("span",{className:"listings-table__override listings-table__override--set",children:$(t.priceOverride)}):e.jsx("span",{className:"listings-table__override listings-table__override--none",children:"â€”"})}),e.jsx("td",{className:"listings-table__td listings-table__td--center",children:e.jsx("button",{className:`listings-table__status-btn ${t.active?"listings-table__status-btn--active":"listings-table__status-btn--inactive"}`,onClick:()=>o(t.id,!t.active),title:t.active?"Click to deactivate":"Click to activate",children:t.active?"Active":"Inactive"})}),e.jsx("td",{className:"listings-table__td listings-table__td--actions",children:e.jsxs("div",{className:"listings-table__actions",children:[e.jsx("button",{className:"listings-table__action-btn listings-table__action-btn--edit",onClick:()=>_(t),title:"Edit pricing",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("button",{className:`listings-table__action-btn ${t.priceOverride!=null?"listings-table__action-btn--override-active":"listings-table__action-btn--override"}`,onClick:p,title:t.priceOverride!=null?"Clear override":"Set override",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16",children:[e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23",strokeLinecap:"round"}),e.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})})]})}function He({config:t}){if(!t)return e.jsxs("div",{className:"pricing-config-panel",children:[e.jsx("h2",{className:"pricing-config-panel__title",children:"Pricing Config"}),e.jsx("p",{className:"pricing-config-panel__loading",children:"Loading..."})]});const i=h=>`${(h*100).toFixed(0)}%`;return e.jsxs("div",{className:"pricing-config-panel",children:[e.jsxs("div",{className:"pricing-config-panel__header",children:[e.jsx("h2",{className:"pricing-config-panel__title",children:"Pricing Config"}),t.isReadOnly&&e.jsx("span",{className:"pricing-config-panel__badge",children:"Read Only"})]}),e.jsxs("div",{className:"pricing-config-panel__section",children:[e.jsx("h3",{className:"pricing-config-panel__section-title",children:"Markup & Discounts"}),e.jsxs("div",{className:"pricing-config-panel__item",children:[e.jsx("span",{className:"pricing-config-panel__label",children:"Site Markup"}),e.jsxs("span",{className:"pricing-config-panel__value pricing-config-panel__value--markup",children:["+",i(t.siteMarkupRate)]})]}),e.jsxs("div",{className:"pricing-config-panel__item",children:[e.jsx("span",{className:"pricing-config-panel__label",children:"Full-Time Discount"}),e.jsxs("span",{className:"pricing-config-panel__value pricing-config-panel__value--discount",children:["-",i(t.fullTimeDiscountRate)]})]})]}),e.jsxs("div",{className:"pricing-config-panel__section",children:[e.jsx("h3",{className:"pricing-config-panel__section-title",children:"Thresholds"}),e.jsxs("div",{className:"pricing-config-panel__item",children:[e.jsx("span",{className:"pricing-config-panel__label",children:"Full-Time Threshold"}),e.jsxs("span",{className:"pricing-config-panel__value",children:[t.fullTimeNightsThreshold," nights/week"]})]}),e.jsxs("div",{className:"pricing-config-panel__item",children:[e.jsx("span",{className:"pricing-config-panel__label",children:"Night Range"}),e.jsxs("span",{className:"pricing-config-panel__value",children:[t.minNights," - ",t.maxNights," nights"]})]})]}),e.jsxs("div",{className:"pricing-config-panel__section",children:[e.jsx("h3",{className:"pricing-config-panel__section-title",children:"Billing"}),e.jsxs("div",{className:"pricing-config-panel__item",children:[e.jsx("span",{className:"pricing-config-panel__label",children:"Billing Cycle"}),e.jsxs("span",{className:"pricing-config-panel__value",children:[t.billingCycleWeeks," weeks"]})]})]}),e.jsxs("div",{className:"pricing-config-panel__note",children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"14",height:"14",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),e.jsxs("span",{children:["To modify these values, update ",e.jsx("code",{children:"pricingConstants.js"})]})]})]})}function Te({listing:t,formData:i,onChange:h,onSave:_,onClose:o,isLoading:g}){const p=c=>x=>{h(c,x.target.value)},m=c=>{c.preventDefault(),_()};return e.jsx("div",{className:"price-edit-modal__overlay",onClick:o,children:e.jsxs("div",{className:"price-edit-modal",onClick:c=>c.stopPropagation(),children:[e.jsxs("div",{className:"price-edit-modal__header",children:[e.jsx("h2",{className:"price-edit-modal__title",children:"Edit Pricing"}),e.jsx("button",{className:"price-edit-modal__close-btn",onClick:o,type:"button","aria-label":"Close",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"20",height:"20",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18",strokeLinecap:"round"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18",strokeLinecap:"round"})]})})]}),e.jsxs("div",{className:"price-edit-modal__listing-info",children:[e.jsx("span",{className:"price-edit-modal__listing-name",children:t.name}),e.jsxs("span",{className:"price-edit-modal__listing-location",children:[t.borough,t.neighborhood?`, ${t.neighborhood}`:""]})]}),e.jsxs("form",{className:"price-edit-modal__form",onSubmit:m,children:[e.jsxs("div",{className:"price-edit-modal__section",children:[e.jsx("h3",{className:"price-edit-modal__section-title",children:"Main Rates"}),e.jsxs("div",{className:"price-edit-modal__grid",children:[e.jsxs("div",{className:"price-edit-modal__field",children:[e.jsx("label",{className:"price-edit-modal__label",htmlFor:"weeklyHostRate",children:"Weekly Host Rate"}),e.jsxs("div",{className:"price-edit-modal__input-wrapper",children:[e.jsx("span",{className:"price-edit-modal__currency",children:"$"}),e.jsx("input",{id:"weeklyHostRate",type:"number",className:"price-edit-modal__input",value:i.weeklyHostRate,onChange:p("weeklyHostRate"),min:"0",step:"1"})]})]}),e.jsxs("div",{className:"price-edit-modal__field",children:[e.jsx("label",{className:"price-edit-modal__label",htmlFor:"monthlyHostRate",children:"Monthly Host Rate"}),e.jsxs("div",{className:"price-edit-modal__input-wrapper",children:[e.jsx("span",{className:"price-edit-modal__currency",children:"$"}),e.jsx("input",{id:"monthlyHostRate",type:"number",className:"price-edit-modal__input",value:i.monthlyHostRate,onChange:p("monthlyHostRate"),min:"0",step:"1"})]})]}),e.jsxs("div",{className:"price-edit-modal__field",children:[e.jsx("label",{className:"price-edit-modal__label",htmlFor:"unitMarkup",children:"Unit Markup"}),e.jsxs("div",{className:"price-edit-modal__input-wrapper",children:[e.jsx("span",{className:"price-edit-modal__currency",children:"$"}),e.jsx("input",{id:"unitMarkup",type:"number",className:"price-edit-modal__input",value:i.unitMarkup,onChange:p("unitMarkup"),min:"0",step:"1"})]})]}),e.jsxs("div",{className:"price-edit-modal__field",children:[e.jsx("label",{className:"price-edit-modal__label",htmlFor:"priceOverride",children:"Price Override"}),e.jsxs("div",{className:"price-edit-modal__input-wrapper",children:[e.jsx("span",{className:"price-edit-modal__currency",children:"$"}),e.jsx("input",{id:"priceOverride",type:"number",className:"price-edit-modal__input price-edit-modal__input--highlight",value:i.priceOverride,onChange:p("priceOverride"),min:"0",step:"1",placeholder:"Leave empty for none"})]})]})]})]}),e.jsxs("div",{className:"price-edit-modal__section",children:[e.jsx("h3",{className:"price-edit-modal__section-title",children:"Nightly Host Rates"}),e.jsx("div",{className:"price-edit-modal__grid price-edit-modal__grid--compact",children:[2,3,4,5,6,7].map(c=>e.jsxs("div",{className:"price-edit-modal__field",children:[e.jsxs("label",{className:"price-edit-modal__label",htmlFor:`nightlyRate${c}`,children:[c," nights"]}),e.jsxs("div",{className:"price-edit-modal__input-wrapper",children:[e.jsx("span",{className:"price-edit-modal__currency",children:"$"}),e.jsx("input",{id:`nightlyRate${c}`,type:"number",className:"price-edit-modal__input",value:i[`nightlyRate${c}`],onChange:p(`nightlyRate${c}`),min:"0",step:"0.01"})]})]},c))})]}),e.jsxs("div",{className:"price-edit-modal__section",children:[e.jsx("h3",{className:"price-edit-modal__section-title",children:"Fees & Deposits"}),e.jsxs("div",{className:"price-edit-modal__grid",children:[e.jsxs("div",{className:"price-edit-modal__field",children:[e.jsx("label",{className:"price-edit-modal__label",htmlFor:"cleaningCost",children:"Cleaning Cost"}),e.jsxs("div",{className:"price-edit-modal__input-wrapper",children:[e.jsx("span",{className:"price-edit-modal__currency",children:"$"}),e.jsx("input",{id:"cleaningCost",type:"number",className:"price-edit-modal__input",value:i.cleaningCost,onChange:p("cleaningCost"),min:"0",step:"1"})]})]}),e.jsxs("div",{className:"price-edit-modal__field",children:[e.jsx("label",{className:"price-edit-modal__label",htmlFor:"damageDeposit",children:"Damage Deposit"}),e.jsxs("div",{className:"price-edit-modal__input-wrapper",children:[e.jsx("span",{className:"price-edit-modal__currency",children:"$"}),e.jsx("input",{id:"damageDeposit",type:"number",className:"price-edit-modal__input",value:i.damageDeposit,onChange:p("damageDeposit"),min:"0",step:"1"})]})]}),e.jsxs("div",{className:"price-edit-modal__field",children:[e.jsx("label",{className:"price-edit-modal__label",htmlFor:"extraCharges",children:"Extra Charges"}),e.jsxs("div",{className:"price-edit-modal__input-wrapper",children:[e.jsx("span",{className:"price-edit-modal__currency",children:"$"}),e.jsx("input",{id:"extraCharges",type:"number",className:"price-edit-modal__input",value:i.extraCharges,onChange:p("extraCharges"),min:"0",step:"1"})]})]})]})]}),e.jsxs("div",{className:"price-edit-modal__actions",children:[e.jsx("button",{type:"button",className:"price-edit-modal__btn price-edit-modal__btn--cancel",onClick:o,disabled:g,children:"Cancel"}),e.jsx("button",{type:"submit",className:"price-edit-modal__btn price-edit-modal__btn--save",disabled:g,children:g?"Saving...":"Save Changes"})]})]})]})})}function Ae({selectedCount:t,onSelectAll:i,onClearSelection:h,onBulkExport:_,isAllSelected:o}){return e.jsxs("div",{className:"bulk-actions-bar",children:[e.jsxs("div",{className:"bulk-actions-bar__info",children:[e.jsxs("span",{className:"bulk-actions-bar__count",children:[t," listing",t!==1?"s":""," selected"]}),e.jsx("button",{className:"bulk-actions-bar__link-btn",onClick:o?h:i,type:"button",children:o?"Clear selection":"Select all"})]}),e.jsxs("div",{className:"bulk-actions-bar__actions",children:[e.jsxs("button",{className:"bulk-actions-bar__btn",onClick:()=>_("csv"),type:"button",children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polyline",{points:"7,10 12,15 17,10",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3",strokeLinecap:"round"})]}),"Export CSV"]}),e.jsxs("button",{className:"bulk-actions-bar__btn",onClick:()=>_("json"),type:"button",children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polyline",{points:"7,10 12,15 17,10",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3",strokeLinecap:"round"})]}),"Export JSON"]})]})]})}function Me({message:t="Loading..."}){return e.jsxs("div",{className:"quick-price__state quick-price__state--loading",children:[e.jsx("div",{className:"quick-price__spinner"}),e.jsx("p",{className:"quick-price__state-message",children:t})]})}function Pe({title:t,message:i,onClearFilters:h}){return e.jsxs("div",{className:"quick-price__state quick-price__state--empty",children:[e.jsx("svg",{className:"quick-price__state-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",width:"48",height:"48",children:e.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("h3",{className:"quick-price__state-title",children:t}),e.jsx("p",{className:"quick-price__state-message",children:i}),h&&e.jsx("button",{className:"quick-price__state-btn",onClick:h,type:"button",children:"Clear filters"})]})}function qe({message:t,onRetry:i}){return e.jsxs("div",{className:"quick-price__state quick-price__state--error",children:[e.jsxs("svg",{className:"quick-price__state-icon quick-price__state-icon--error",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",width:"48",height:"48",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),e.jsx("h3",{className:"quick-price__state-title",children:"Something went wrong"}),e.jsx("p",{className:"quick-price__state-message",children:t}),i&&e.jsx("button",{className:"quick-price__state-btn",onClick:i,type:"button",children:"Try again"})]})}function we(){const{showToast:t}=Ne(),i=Fe({showToast:t});return i.isLoading&&!i.listings.length?e.jsxs("div",{className:"quick-price",children:[e.jsx(I,{}),e.jsx(Me,{message:"Loading listings..."})]}):i.error&&!i.listings.length?e.jsxs("div",{className:"quick-price",children:[e.jsx(I,{}),e.jsx(qe,{message:i.error,onRetry:i.handleRetry})]}):e.jsxs("div",{className:"quick-price",children:[e.jsx(I,{}),e.jsxs("header",{className:"quick-price__header",children:[e.jsxs("div",{className:"quick-price__header-content",children:[e.jsx("h1",{className:"quick-price__title",children:"Quick Price"}),e.jsx("p",{className:"quick-price__subtitle",children:"Manage listing prices and overrides"})]}),e.jsxs("div",{className:"quick-price__header-stats",children:[e.jsxs("div",{className:"quick-price__stat",children:[e.jsx("span",{className:"quick-price__stat-value",children:i.stats.total}),e.jsx("span",{className:"quick-price__stat-label",children:"Total"})]}),e.jsxs("div",{className:"quick-price__stat quick-price__stat--active",children:[e.jsx("span",{className:"quick-price__stat-value",children:i.stats.active}),e.jsx("span",{className:"quick-price__stat-label",children:"Active"})]}),e.jsxs("div",{className:"quick-price__stat quick-price__stat--override",children:[e.jsx("span",{className:"quick-price__stat-value",children:i.stats.withOverride}),e.jsx("span",{className:"quick-price__stat-label",children:"With Override"})]})]})]}),e.jsxs("div",{className:"quick-price__content",children:[e.jsx("aside",{className:"quick-price__sidebar quick-price__sidebar--left",children:e.jsx(Le,{searchQuery:i.searchQuery,onSearchChange:i.setSearchQuery,rentalTypeFilter:i.rentalTypeFilter,onRentalTypeChange:i.setRentalTypeFilter,rentalTypeOptions:i.rentalTypeOptions,boroughFilter:i.boroughFilter,onBoroughChange:i.setBoroughFilter,boroughOptions:i.boroughOptions,neighborhoodFilter:i.neighborhoodFilter,onNeighborhoodChange:i.setNeighborhoodFilter,activeOnlyFilter:i.activeOnlyFilter,onActiveOnlyChange:i.setActiveOnlyFilter,sortField:i.sortField,onSortFieldChange:i.setSortField,sortOptions:i.sortOptions,sortOrder:i.sortOrder,onSortOrderToggle:i.toggleSortOrder,onClearFilters:i.handleClearFilters})}),e.jsxs("main",{className:"quick-price__main",children:[i.selectedListings.length>0&&e.jsx(Ae,{selectedCount:i.selectedListings.length,onSelectAll:i.handleSelectAll,onClearSelection:i.handleClearSelection,onBulkExport:i.handleBulkExport,isAllSelected:i.isAllSelected}),i.listings.length===0?e.jsx(Pe,{title:i.searchQuery||i.rentalTypeFilter||i.boroughFilter?"No matching listings":"No listings found",message:i.searchQuery||i.rentalTypeFilter||i.boroughFilter?"Try adjusting your filters or search terms":"Listings will appear here once created",onClearFilters:i.searchQuery||i.rentalTypeFilter||i.boroughFilter?i.handleClearFilters:null}):e.jsxs(e.Fragment,{children:[e.jsx(Oe,{listings:i.listings,selectedListings:i.selectedListings,onSelectListing:i.handleSelectListing,onSelectAll:i.handleSelectAll,isAllSelected:i.isAllSelected,onEditListing:i.handleOpenEdit,onToggleActive:i.handleToggleActive,onSetOverride:i.handleSetOverride}),i.totalPages>1&&e.jsxs("div",{className:"quick-price__pagination",children:[e.jsx("button",{className:"quick-price__pagination-btn",onClick:()=>i.setPage(i.page-1),disabled:i.page===1,children:"Previous"}),e.jsxs("span",{className:"quick-price__pagination-info",children:["Page ",i.page," of ",i.totalPages," (",i.totalCount," total)"]}),e.jsx("button",{className:"quick-price__pagination-btn",onClick:()=>i.setPage(i.page+1),disabled:i.page===i.totalPages,children:"Next"})]})]})]}),e.jsx("aside",{className:"quick-price__sidebar quick-price__sidebar--right",children:e.jsx(He,{config:i.pricingConfig})})]}),i.editingListing&&e.jsx(Te,{listing:i.editingListing,formData:i.editFormData,onChange:i.handleEditFormChange,onSave:i.handleSaveEdit,onClose:i.handleCloseEdit,isLoading:i.isLoading}),i.isLoading&&i.listings.length>0&&e.jsx("div",{className:"quick-price__loading-overlay",children:e.jsx("div",{className:"quick-price__loading-spinner"})})]})}be(document.getElementById("root")).render(e.jsx(je.StrictMode,{children:e.jsx(ke,{children:e.jsx(ve,{children:e.jsx(we,{})})})}));
