import{r as g,j as e,c as Ke}from"./client-BJVKzfAi.js";import{s as ne}from"./supabase-BoCLEw6R.js";import{g as qe,u as Ye}from"./listingService-CLUhv1SF.js";import{u as Je,d as Ze}from"./photoUpload-vf9LU0fY.js";import{c as Xe,i as et,f as tt}from"./dataLookups-zG18yzis.js";import{A as de}from"./AdminHeader-tCInZd3n.js";import{a as ot}from"./Toast-BQk6Nzgd.js";import"./auth-QZ4BJadW.js";import"./constants-CPVJY5eo.js";import"./star-OtPMgcH9.js";import"./createLucideIcon-CgZZH2OU.js";import"./file-text-Bqp_Hw0X.js";import"./triangle-alert-Bp6DQQmR.js";import"./users-d0RSvnp4.js";import"./pen-line-Duo49k9O.js";import"./calendar-CDI4qHEX.js";import"./mail-CRbL90NL.js";import"./user-check-CoCGzn5Y.js";import"./dollar-sign-Dn2-KjNW.js";import"./send-C4mziT0-.js";import"./x-CrJVeoCh.js";const rt=[{id:"address",label:"Address & Space",icon:"home"},{id:"features",label:"Features",icon:"star"},{id:"leaseStyles",label:"Lease & Pricing",icon:"calendar"},{id:"photos",label:"Photos",icon:"camera"},{id:"rules",label:"Rules",icon:"clipboard"},{id:"reviews",label:"Safety & Details",icon:"shield"}],nt=3e4;function at(){const[t,o]=g.useState(null),[r,n]=g.useState(null),[l,s]=g.useState(null),[p,d]=g.useState("address"),[i,a]=g.useState(!1),[f,m]=g.useState(!1),[c,j]=g.useState(!1),[S,I]=g.useState(null),[x,w]=g.useState(null),[R,H]=g.useState(null),[M,$]=g.useState(""),[b,C]=g.useState([]),[O,oe]=g.useState([]),[Te,De]=g.useState([]),[Ie,Fe]=g.useState([]),[Me,Pe]=g.useState([]),[ze,Re]=g.useState([]),re=g.useRef(null),Z=g.useRef(!1);g.useEffect(()=>{const u=new URLSearchParams(window.location.search).get("id");u&&s(u)},[]),g.useEffect(()=>{async function h(){Xe()||await et(),We(),Ne(),_e(),Ee()}h()},[]),g.useEffect(()=>{l&&me(l)},[l]),g.useEffect(()=>{const h=u=>{if(Z.current)return u.preventDefault(),u.returnValue="",""};return window.addEventListener("beforeunload",h),()=>window.removeEventListener("beforeunload",h)},[]);async function We(){try{const{data:h}=await ne.from("zat_features_amenities").select('_id, Name, "In unit?"').eq("In unit?",!0),{data:u}=await ne.from("zat_features_amenities").select('_id, Name, "In unit?"').eq("In unit?",!1);oe(h||[]),De(u||[])}catch(h){console.error("Failed to load amenities:",h)}}async function Ne(){try{const{data:h}=await ne.schema("reference_table").from("zat_features_houserules").select("_id, Name, Icon");Fe(h||[])}catch(h){console.error("Failed to load house rules:",h)}}async function _e(){try{const{data:h}=await ne.from("zat_features_safety").select("_id, Name, Icon");Pe(h||[])}catch(h){console.error("Failed to load safety features:",h)}}function Ee(){const h=tt();Re(h)}async function me(h){a(!0),I(null);try{const u=await qe(h);if(!u){I("Listing not found"),o(null),n(null);return}o(u),n(structuredClone(u)),Z.current=!1,H(u["Modified Date"]?new Date(u["Modified Date"]):null);const B=new URLSearchParams(window.location.search);B.set("id",h),window.history.replaceState({},"",`?${B.toString()}`)}catch(u){console.error("Failed to load listing:",u),I(u.message||"Failed to load listing")}finally{a(!1)}}async function $e(h){if(!h||h.length<2){C([]);return}j(!0);try{const{data:u,error:B}=await ne.from("listing").select('_id, Name, "Address - Full Street Address", Active, Approved').or(`Name.ilike.%${h}%,_id.ilike.%${h}%`).limit(20).order("Modified Date",{ascending:!1});if(B)throw B;C(u||[])}catch(u){console.error("Search failed:",u),Y("error","Search failed: "+u.message)}finally{j(!1)}}const le=g.useCallback(h=>{o(u=>{if(!u)return u;const B={...u,...h};return Z.current=!0,B}),re.current&&clearTimeout(re.current),re.current=setTimeout(()=>{Z.current&&ie()},nt)},[]);async function ie(){if(!t||!r)return;const h={};for(const[u,B]of Object.entries(t))JSON.stringify(B)!==JSON.stringify(r[u])&&(h[u]=B);if(Object.keys(h).length===0){Y("info","No changes to save");return}m(!0);try{console.log("[ModifyListings] Saving changed fields:",Object.keys(h)),await Ye(t._id,h),n(structuredClone(t)),Z.current=!1,H(new Date),Y("success","Changes saved successfully")}catch(u){console.error("[ModifyListings] Save failed:",u),u.code==="23503"&&console.error("[ModifyListings] FK violation details:",{code:u.code,message:u.message,details:u.details,hint:u.hint}),Y("error","Failed to save: "+u.message)}finally{m(!1)}}async function Oe(h){await ie()}async function Ve(h){if(t)try{const u=t["Features - Photos"]||[],B=u.length,X=await Je({file:h},t._id,B),J={id:`photo_${Date.now()}`,url:X.url,Photo:X.url,"Photo (thumbnail)":X.url,storagePath:X.path,SortOrder:B,toggleMainPhoto:B===0};le({"Features - Photos":[...u,J]}),Y("success","Photo uploaded")}catch(u){console.error("Photo upload failed:",u),Y("error","Failed to upload photo: "+u.message)}}async function Ge(h){if(!t)return;const u=t["Features - Photos"]||[],B=u.find(J=>J.id===h);B!=null&&B.storagePath&&await Ze(B.storagePath);const X=u.filter(J=>J.id!==h).map((J,pe)=>({...J,SortOrder:pe,toggleMainPhoto:pe===0}));le({"Features - Photos":X}),Y("success","Photo deleted")}function Y(h,u){w({type:h,message:u}),setTimeout(()=>w(null),5e3)}function he(){if(!t||!r)return!1;for(const[h,u]of Object.entries(t))if(JSON.stringify(u)!==JSON.stringify(r[h]))return!0;return!1}function He(){return t?{address:{isComplete:!!(t.Name&&t["Address - Full Street Address"]),hasChanges:!1},features:{isComplete:!!t.Description,hasChanges:!1},leaseStyles:{isComplete:!!t["rental type"],hasChanges:!1},photos:{isComplete:(t["Features - Photos"]||[]).length>=3,hasChanges:!1},rules:{isComplete:!!t["Cancellation Policy"],hasChanges:!1},reviews:{isComplete:!0,hasChanges:!1}}:{}}function Ue(h){s(h._id),$(""),C([])}function Qe(){if(he()&&!window.confirm("You have unsaved changes. Discard them?"))return;o(null),n(null),s(null),Z.current=!1,new URLSearchParams(window.location.search).delete("id"),window.history.replaceState({},"",window.location.pathname)}return g.useEffect(()=>()=>{re.current&&clearTimeout(re.current)},[]),{listing:t,listingId:l,isLoading:i,isSaving:f,isSearching:c,error:S,alert:x,lastSaved:R,searchQuery:M,searchResults:b,setSearchQuery:$,searchListings:$e,selectSearchResult:Ue,activeSection:p,setActiveSection:d,sections:rt,sectionStatus:He(),loadListing:me,updateListingData:le,saveChanges:ie,saveSection:Oe,clearListing:Qe,hasUnsavedChanges:he(),onUploadPhoto:Ve,onDeletePhoto:Ge,amenitiesInUnit:O,amenitiesInBuilding:Te,houseRules:Ie,safetyFeatures:Me,cancellationPolicyOptions:ze,showAlert:Y,dismissAlert:()=>w(null)}}function A({label:t,name:o,value:r,onChange:n,placeholder:l="",required:s=!1,disabled:p=!1,maxLength:d,type:i="text",error:a,helpText:f}){return e.jsxs("div",{style:U.container,children:[t&&e.jsxs("label",{htmlFor:o,style:U.label,children:[t,s&&e.jsx("span",{style:U.required,children:"*"})]}),e.jsx("input",{id:o,name:o,type:i,value:r||"",onChange:n,placeholder:l,disabled:p,maxLength:d,style:{...U.input,...a?U.inputError:{},...p?U.inputDisabled:{}}}),d&&e.jsxs("span",{style:U.charCount,children:[(r||"").length,"/",d]}),f&&e.jsx("p",{style:U.helpText,children:f}),a&&e.jsx("p",{style:U.errorText,children:a})]})}const U={container:{display:"flex",flexDirection:"column",marginBottom:"1rem"},label:{fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.375rem"},required:{color:"#ef4444",marginLeft:"0.25rem"},input:{width:"100%",padding:"0.625rem 0.75rem",fontSize:"0.875rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",backgroundColor:"#ffffff",color:"#1f2937",outline:"none",transition:"border-color 0.15s, box-shadow 0.15s",boxSizing:"border-box"},inputError:{borderColor:"#ef4444",backgroundColor:"#fef2f2"},inputDisabled:{backgroundColor:"#f3f4f6",cursor:"not-allowed",color:"#9ca3af"},charCount:{fontSize:"0.75rem",color:"#6b7280",textAlign:"right",marginTop:"0.25rem"},helpText:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem",margin:0},errorText:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem",margin:0}};function fe({label:t,name:o,value:r,onChange:n,rows:l=4,placeholder:s="",required:p=!1,disabled:d=!1,maxLength:i,error:a,helpText:f}){return e.jsxs("div",{style:Q.container,children:[t&&e.jsxs("label",{htmlFor:o,style:Q.label,children:[t,p&&e.jsx("span",{style:Q.required,children:"*"})]}),e.jsx("textarea",{id:o,name:o,value:r||"",onChange:n,rows:l,placeholder:s,disabled:d,maxLength:i,style:{...Q.textarea,...a?Q.textareaError:{},...d?Q.textareaDisabled:{}}}),i&&e.jsxs("span",{style:Q.charCount,children:[(r||"").length,"/",i]}),f&&e.jsx("p",{style:Q.helpText,children:f}),a&&e.jsx("p",{style:Q.errorText,children:a})]})}const Q={container:{display:"flex",flexDirection:"column",marginBottom:"1rem"},label:{fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.375rem"},required:{color:"#ef4444",marginLeft:"0.25rem"},textarea:{width:"100%",padding:"0.625rem 0.75rem",fontSize:"0.875rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",backgroundColor:"#ffffff",color:"#1f2937",outline:"none",transition:"border-color 0.15s, box-shadow 0.15s",resize:"vertical",fontFamily:"inherit",boxSizing:"border-box"},textareaError:{borderColor:"#ef4444",backgroundColor:"#fef2f2"},textareaDisabled:{backgroundColor:"#f3f4f6",cursor:"not-allowed",color:"#9ca3af"},charCount:{fontSize:"0.75rem",color:"#6b7280",textAlign:"right",marginTop:"0.25rem"},helpText:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem",margin:0},errorText:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem",margin:0}};function F({label:t,name:o,value:r,onChange:n,options:l=[],placeholder:s="Select...",required:p=!1,disabled:d=!1,error:i,helpText:a}){return e.jsxs("div",{style:_.container,children:[t&&e.jsxs("label",{htmlFor:o,style:_.label,children:[t,p&&e.jsx("span",{style:_.required,children:"*"})]}),e.jsxs("div",{style:_.selectWrapper,children:[e.jsxs("select",{id:o,name:o,value:r??"",onChange:n,disabled:d,style:{..._.select,...i?_.selectError:{},...d?_.selectDisabled:{},...r===""||r===null||r===void 0?_.selectPlaceholder:{}},children:[e.jsx("option",{value:"",disabled:!0,children:s}),l.map(f=>e.jsx("option",{value:f.value,children:f.label},f.value))]}),e.jsx(st,{})]}),a&&e.jsx("p",{style:_.helpText,children:a}),i&&e.jsx("p",{style:_.errorText,children:i})]})}function st(){return e.jsx("svg",{style:_.chevron,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}const _={container:{display:"flex",flexDirection:"column",marginBottom:"1rem"},label:{fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.375rem"},required:{color:"#ef4444",marginLeft:"0.25rem"},selectWrapper:{position:"relative",display:"flex",alignItems:"center"},select:{width:"100%",padding:"0.625rem 2.5rem 0.625rem 0.75rem",fontSize:"0.875rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",backgroundColor:"#ffffff",color:"#1f2937",outline:"none",cursor:"pointer",appearance:"none",transition:"border-color 0.15s, box-shadow 0.15s",boxSizing:"border-box"},selectPlaceholder:{color:"#9ca3af"},selectError:{borderColor:"#ef4444",backgroundColor:"#fef2f2"},selectDisabled:{backgroundColor:"#f3f4f6",cursor:"not-allowed",color:"#9ca3af"},chevron:{position:"absolute",right:"0.75rem",width:"1rem",height:"1rem",color:"#6b7280",pointerEvents:"none"},helpText:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem",margin:0},errorText:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem",margin:0}},Ce=document.createElement("style");Ce.textContent=`
  input[type="checkbox"]:checked + span {
    background-color: #52ABEC !important;
    border-color: #52ABEC !important;
  }
  input[type="checkbox"]:focus + span {
    box-shadow: 0 0 0 2px rgba(82, 171, 236, 0.3);
  }
  input[type="checkbox"]:disabled + span {
    background-color: #f3f4f6 !important;
    cursor: not-allowed;
  }
`;document.head.appendChild(Ce);function se({label:t,name:o,options:r=[],selectedValues:n=[],onChange:l,columns:s=2,required:p=!1,groupByCategory:d=!1,error:i}){const a=(c,j)=>{let S;j?S=[...n,c]:S=n.filter(I=>I!==c),l(S)},f=d?r.reduce((c,j)=>{const S=j.category||"Other";return c[S]||(c[S]=[]),c[S].push(j),c},{}):{all:r},m={...z.grid,gridTemplateColumns:`repeat(${Math.min(s,4)}, 1fr)`};return e.jsxs("div",{style:z.container,children:[t&&e.jsxs("label",{style:z.label,children:[t,p&&e.jsx("span",{style:z.required,children:"*"})]}),d?Object.entries(f).map(([c,j])=>e.jsxs("div",{style:z.categorySection,children:[e.jsx("h4",{style:z.categoryTitle,children:c}),e.jsx("div",{style:m,children:j.map(S=>e.jsx(ge,{name:o,value:S.value,label:S.label,checked:n.includes(S.value),onChange:a},S.value))})]},c)):e.jsx("div",{style:m,children:r.map(c=>e.jsx(ge,{name:o,value:c.value,label:c.label,checked:n.includes(c.value),onChange:a},c.value))}),i&&e.jsx("p",{style:z.errorText,children:i})]})}function ge({name:t,value:o,label:r,checked:n,onChange:l}){return e.jsxs("label",{style:z.checkboxLabel,children:[e.jsx("input",{type:"checkbox",name:t,value:o,checked:n,onChange:s=>l(o,s.target.checked),style:z.checkbox}),e.jsx("span",{style:{...z.customCheckbox,...n?z.customCheckboxChecked:{}},children:n&&e.jsx(lt,{})}),e.jsx("span",{style:z.checkboxText,children:r})]})}function lt(){return e.jsx("svg",{style:z.checkIcon,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}const z={container:{marginBottom:"1rem"},label:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.75rem"},required:{color:"#ef4444",marginLeft:"0.25rem"},grid:{display:"grid",gap:"0.5rem"},categorySection:{marginBottom:"1rem"},categoryTitle:{fontSize:"0.8125rem",fontWeight:"600",color:"#6b7280",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.025em"},checkboxLabel:{display:"flex",alignItems:"center",cursor:"pointer",userSelect:"none",padding:"0.25rem 0"},checkbox:{position:"absolute",opacity:0,width:0,height:0},customCheckbox:{display:"flex",alignItems:"center",justifyContent:"center",width:"1rem",height:"1rem",border:"2px solid #d1d5db",borderRadius:"0.25rem",backgroundColor:"#ffffff",marginRight:"0.5rem",transition:"all 0.15s",flexShrink:0},customCheckboxChecked:{backgroundColor:"#52ABEC",borderColor:"#52ABEC"},checkIcon:{width:"0.625rem",height:"0.625rem",color:"#ffffff"},checkboxText:{fontSize:"0.8125rem",color:"#374151"},errorText:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.5rem",margin:0}};function Be({label:t,name:o,value:r,onChange:n,min:l,max:s,required:p=!1,disabled:d=!1,error:i,helpText:a}){return e.jsxs("div",{style:V.container,children:[t&&e.jsxs("label",{htmlFor:o,style:V.label,children:[t,p&&e.jsx("span",{style:V.required,children:"*"})]}),e.jsxs("div",{style:V.inputWrapper,children:[e.jsx("input",{id:o,name:o,type:"date",value:r||"",onChange:n,min:l,max:s,disabled:d,style:{...V.input,...i?V.inputError:{},...d?V.inputDisabled:{}}}),e.jsx(it,{})]}),a&&e.jsx("p",{style:V.helpText,children:a}),i&&e.jsx("p",{style:V.errorText,children:i})]})}function it(){return e.jsx("svg",{style:V.calendarIcon,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}const V={container:{display:"flex",flexDirection:"column",marginBottom:"1rem"},label:{fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.375rem"},required:{color:"#ef4444",marginLeft:"0.25rem"},inputWrapper:{position:"relative",display:"flex",alignItems:"center"},input:{width:"100%",padding:"0.625rem 2.5rem 0.625rem 0.75rem",fontSize:"0.875rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",backgroundColor:"#ffffff",color:"#1f2937",outline:"none",cursor:"pointer",transition:"border-color 0.15s, box-shadow 0.15s",boxSizing:"border-box"},inputError:{borderColor:"#ef4444",backgroundColor:"#fef2f2"},inputDisabled:{backgroundColor:"#f3f4f6",cursor:"not-allowed",color:"#9ca3af"},calendarIcon:{position:"absolute",right:"0.75rem",width:"1.125rem",height:"1.125rem",color:"#6b7280",pointerEvents:"none"},helpText:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem",margin:0},errorText:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem",margin:0}};function dt({label:t,name:o,checked:r,onChange:n,disabled:l=!1,helpText:s}){const p=()=>{l||n(!r)};return e.jsxs("div",{style:W.container,children:[e.jsxs("div",{style:W.toggleRow,children:[t&&e.jsx("span",{style:{...W.label,...l?W.labelDisabled:{}},children:t}),e.jsx("button",{type:"button",role:"switch","aria-checked":r,"aria-label":t,name:o,onClick:p,disabled:l,style:{...W.toggle,...r?W.toggleActive:W.toggleInactive,...l?W.toggleDisabled:{}},children:e.jsx("span",{style:{...W.toggleKnob,...r?W.toggleKnobActive:W.toggleKnobInactive}})})]}),s&&e.jsx("p",{style:W.helpText,children:s})]})}const W={container:{marginBottom:"0.75rem"},toggleRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem"},label:{fontSize:"0.875rem",fontWeight:"500",color:"#374151"},labelDisabled:{color:"#9ca3af"},toggle:{position:"relative",display:"inline-flex",height:"1.5rem",width:"2.75rem",alignItems:"center",borderRadius:"9999px",transition:"background-color 0.2s",border:"none",cursor:"pointer",outline:"none",padding:0,flexShrink:0},toggleActive:{backgroundColor:"#22c55e"},toggleInactive:{backgroundColor:"#d1d5db"},toggleDisabled:{opacity:.5,cursor:"not-allowed"},toggleKnob:{display:"inline-block",height:"1.125rem",width:"1.125rem",borderRadius:"9999px",backgroundColor:"#ffffff",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",transition:"transform 0.2s"},toggleKnobActive:{transform:"translateX(1.375rem)"},toggleKnobInactive:{transform:"translateX(0.1875rem)"},helpText:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem",margin:0}};function te({title:t,children:o,onSave:r,isSaving:n=!1,lastSaved:l,hasChanges:s=!1}){return e.jsxs("div",{style:G.container,children:[e.jsxs("div",{style:G.header,children:[e.jsx("h2",{style:G.title,children:t}),e.jsxs("div",{style:G.headerActions,children:[l&&e.jsxs("span",{style:G.lastSaved,children:["Last saved: ",ut(l)]}),s&&e.jsx("span",{style:G.unsavedBadge,children:"Unsaved changes"}),r&&e.jsx("button",{type:"button",onClick:r,disabled:n,style:{...G.saveButton,...n?G.saveButtonDisabled:{}},children:n?e.jsxs(e.Fragment,{children:[e.jsx(ct,{}),"Saving..."]}):"Save Section"})]})]}),e.jsx("div",{style:G.content,children:o})]})}function ct(){return e.jsxs("svg",{style:G.spinnerIcon,viewBox:"0 0 24 24",fill:"none",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",style:{opacity:.25}}),e.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})]})}function ut(t){try{return new Date(t).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return t}}const G={container:{backgroundColor:"#ffffff",borderRadius:"0.5rem",border:"1px solid #e5e7eb",marginBottom:"1.5rem",overflow:"hidden"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.5rem",borderBottom:"1px solid #e5e7eb",backgroundColor:"#f9fafb",flexWrap:"wrap",gap:"0.75rem"},title:{fontSize:"1.125rem",fontWeight:"600",color:"#111827",margin:0},headerActions:{display:"flex",alignItems:"center",gap:"1rem"},lastSaved:{fontSize:"0.75rem",color:"#6b7280"},unsavedBadge:{fontSize:"0.75rem",fontWeight:"500",color:"#b45309",backgroundColor:"#fef3c7",padding:"0.125rem 0.5rem",borderRadius:"9999px"},saveButton:{display:"flex",alignItems:"center",gap:"0.375rem",padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"500",color:"#ffffff",backgroundColor:"#52ABEC",border:"none",borderRadius:"0.375rem",cursor:"pointer",transition:"background-color 0.15s"},saveButtonDisabled:{backgroundColor:"#9ca3af",cursor:"not-allowed"},spinnerIcon:{width:"1rem",height:"1rem",animation:"spin 1s linear infinite"},content:{padding:"1.5rem"}},we=document.createElement("style");we.textContent=`
  @keyframes spin {
    to { transform: rotate(360deg); }
  }
`;document.head.appendChild(we);function mt({sections:t=[],activeSection:o,onSectionChange:r,completedSections:n={}}){return e.jsx("nav",{style:K.container,children:e.jsx("ul",{style:K.list,children:t.map((l,s)=>{const p=o===l.key,d=n[l.key];return e.jsx("li",{style:K.listItem,children:e.jsxs("button",{type:"button",onClick:()=>r(l.key),style:{...K.button,...p?K.buttonActive:{}},children:[e.jsx("span",{style:K.indexBadge,children:d?e.jsx(ht,{}):s+1}),e.jsx("span",{style:K.label,children:l.label}),p&&e.jsx(pt,{})]})},l.key)})})})}function ht(){return e.jsx("svg",{style:K.checkIcon,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}function pt(){return e.jsx("span",{style:K.activeIndicator})}const K={container:{width:"100%"},list:{listStyle:"none",margin:0,padding:0},listItem:{marginBottom:"0.25rem"},button:{display:"flex",alignItems:"center",width:"100%",padding:"0.75rem 1rem",fontSize:"0.875rem",fontWeight:"500",color:"#4b5563",backgroundColor:"transparent",border:"none",borderRadius:"0.5rem",cursor:"pointer",transition:"all 0.15s",textAlign:"left",position:"relative"},buttonActive:{backgroundColor:"#eff6ff",color:"#1d4ed8"},indexBadge:{display:"flex",alignItems:"center",justifyContent:"center",width:"1.5rem",height:"1.5rem",fontSize:"0.75rem",fontWeight:"600",backgroundColor:"#e5e7eb",color:"#4b5563",borderRadius:"9999px",marginRight:"0.75rem",flexShrink:0},checkIcon:{width:"0.875rem",height:"0.875rem",color:"#22c55e"},label:{flex:1},activeIndicator:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",width:"0.25rem",height:"1.5rem",backgroundColor:"#52ABEC",borderRadius:"0.125rem"}},Le=document.createElement("style");Le.textContent=`
  @keyframes spin {
    to { transform: rotate(360deg); }
  }
`;document.head.appendChild(Le);function ft({type:t="info",message:o,onClose:r,autoDismiss:n=5e3,title:l}){const[s,p]=g.useState(!0);g.useEffect(()=>{if(n>0){const a=setTimeout(()=>{p(!1),r&&setTimeout(r,300)},n);return()=>clearTimeout(a)}},[n,r]);const d=()=>{p(!1),r&&setTimeout(r,300)};if(!o)return null;const i=be[t]||be.info;return e.jsxs("div",{style:{...E.container,...i.container,opacity:s?1:0,transform:s?"translateY(0)":"translateY(-0.5rem)"},role:"alert",children:[e.jsx("div",{style:E.iconContainer,children:e.jsx(gt,{type:t})}),e.jsxs("div",{style:E.content,children:[l&&e.jsx("p",{style:{...E.title,...i.title},children:l}),e.jsx("p",{style:{...E.message,...i.message},children:o})]}),r&&e.jsx("button",{type:"button",onClick:d,style:E.closeButton,"aria-label":"Close alert",children:e.jsx(bt,{})})]})}function gt({type:t}){const o={success:e.jsx("svg",{style:E.icon,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),error:e.jsx("svg",{style:E.icon,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),warning:e.jsx("svg",{style:E.icon,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),info:e.jsx("svg",{style:E.icon,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})};return o[t]||o.info}function bt(){return e.jsx("svg",{style:E.closeIcon,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}const E={container:{display:"flex",alignItems:"flex-start",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1rem",transition:"opacity 0.3s, transform 0.3s"},iconContainer:{flexShrink:0,marginRight:"0.75rem"},icon:{width:"1.25rem",height:"1.25rem"},content:{flex:1},title:{fontSize:"0.875rem",fontWeight:"600",marginBottom:"0.25rem",margin:0},message:{fontSize:"0.875rem",margin:0},closeButton:{flexShrink:0,marginLeft:"0.75rem",padding:"0.25rem",backgroundColor:"transparent",border:"none",borderRadius:"0.25rem",cursor:"pointer",opacity:.6,transition:"opacity 0.15s"},closeIcon:{width:"1rem",height:"1rem"}},be={success:{container:{backgroundColor:"#ecfdf5",border:"1px solid #a7f3d0",color:"#065f46"},title:{color:"#065f46"},message:{color:"#047857"}},error:{container:{backgroundColor:"#fef2f2",border:"1px solid #fecaca",color:"#991b1b"},title:{color:"#991b1b"},message:{color:"#b91c1c"}},warning:{container:{backgroundColor:"#fffbeb",border:"1px solid #fde68a",color:"#92400e"},title:{color:"#92400e"},message:{color:"#b45309"}},info:{container:{backgroundColor:"#eff6ff",border:"1px solid #bfdbfe",color:"#1e40af"},title:{color:"#1e40af"},message:{color:"#1d4ed8"}}},yt=[{value:"Private Room",label:"Private Room"},{value:"Entire Place",label:"Entire Place"},{value:"Shared Room",label:"Shared Room"}],xt=[{value:0,label:"Studio"},{value:1,label:"1 Bedroom"},{value:2,label:"2 Bedrooms"},{value:3,label:"3 Bedrooms"},{value:4,label:"4 Bedrooms"},{value:5,label:"5+ Bedrooms"}],vt=[{value:1,label:"1 Bed"},{value:2,label:"2 Beds"},{value:3,label:"3 Beds"},{value:4,label:"4 Beds"},{value:5,label:"5 Beds"},{value:6,label:"6+ Beds"}],jt=[{value:.5,label:"0.5 Bathroom"},{value:1,label:"1 Bathroom"},{value:1.5,label:"1.5 Bathrooms"},{value:2,label:"2 Bathrooms"},{value:2.5,label:"2.5 Bathrooms"},{value:3,label:"3 Bathrooms"},{value:3.5,label:"3.5 Bathrooms"},{value:4,label:"4+ Bathrooms"}],kt=[{value:"Full Kitchen",label:"Full Kitchen"},{value:"Kitchenette",label:"Kitchenette"},{value:"Shared Kitchen",label:"Shared Kitchen"},{value:"No Kitchen",label:"No Kitchen"}],St=[{value:"Street Parking",label:"Street Parking"},{value:"No Parking",label:"No Parking"},{value:"Off-Street Parking",label:"Off-Street Parking"},{value:"Attached Garage",label:"Attached Garage"},{value:"Detached Garage",label:"Detached Garage"},{value:"Nearby Parking Structure",label:"Nearby Parking Structure"}],Ct=[{value:"Standard",label:"Standard"},{value:"Additional Host Restrictions",label:"Additional Host Restrictions"},{value:"Prior to First-Time Arrival",label:"Prior to First-Time Arrival"},{value:"After First-Time Arrival",label:"After First-Time Arrival"}],Bt=[{value:"No Preference",label:"No Preference"},{value:"Male Only",label:"Male Only"},{value:"Female Only",label:"Female Only"}],wt=[{value:"12:00 PM",label:"12:00 PM (Noon)"},{value:"1:00 PM",label:"1:00 PM"},{value:"2:00 PM",label:"2:00 PM"},{value:"3:00 PM",label:"3:00 PM"},{value:"4:00 PM",label:"4:00 PM"},{value:"5:00 PM",label:"5:00 PM"},{value:"6:00 PM",label:"6:00 PM"},{value:"Flexible",label:"Flexible"}],Lt=[{value:"8:00 AM",label:"8:00 AM"},{value:"9:00 AM",label:"9:00 AM"},{value:"10:00 AM",label:"10:00 AM"},{value:"11:00 AM",label:"11:00 AM"},{value:"12:00 PM",label:"12:00 PM (Noon)"},{value:"Flexible",label:"Flexible"}],At=[{value:"Nightly",label:"Nightly"},{value:"Weekly",label:"Weekly"},{value:"Monthly",label:"Monthly"}],Tt=[{value:"Every week",label:"Every week"},{value:"Every other week",label:"Every other week"},{value:"First week of month",label:"First week of month"},{value:"Last week of month",label:"Last week of month"}],Dt=[{value:1,label:"1 Guest"},{value:2,label:"2 Guests"},{value:3,label:"3 Guests"},{value:4,label:"4 Guests"},{value:5,label:"5 Guests"},{value:6,label:"6 Guests"},{value:7,label:"7 Guests"},{value:8,label:"8 Guests"},{value:9,label:"9 Guests"},{value:10,label:"10 Guests"},{value:15,label:"15 Guests"},{value:20,label:"20 Guests"}],ye=[{value:1,label:"1 Month"},{value:2,label:"2 Months"},{value:3,label:"3 Months"},{value:4,label:"4 Months"},{value:5,label:"5 Months"},{value:6,label:"6 Months"},{value:7,label:"7 Months"},{value:8,label:"8 Months"},{value:9,label:"9 Months"},{value:10,label:"10 Months"},{value:11,label:"11 Months"},{value:12,label:"12 Months"}];function xe({listing:t,onUpdate:o,onVerifyAddress:r,isSaving:n,onSave:l,lastSaved:s}){var w,R,H;const[p,d]=g.useState(!1);g.useEffect(()=>{(t["Location - Address"]||{}).validated&&d(!1)},[t._id,(w=t["Location - Address"])==null?void 0:w.validated]);const i=M=>{const{name:$,value:b}=M.target;o({[$]:b})},a=M=>{const{name:$,value:b}=M.target,C=t["Location - Address"]||{};o({"Location - Address":{...C,[$]:b}})},f=()=>{var M;if(r){const $=((M=t["Location - Address"])==null?void 0:M.address)||"";r($)}},m=t["Location - Address"]||{};console.log("[AddressSection] Current address state:",{listingId:t._id,address:m,validated:m.validated,hasCoordinates:!!(m.lat&&m.lng),showManualInputs:p});const c=t["Location - City"]||"",j=t.boroughName||t["Location - Borough"]||"",S=t["Location - State"]||"",I=t["Location - Zip Code"]||"",x=t.neighborhoodName||t["Location - Hood"]||"";return e.jsxs(te,{title:"Space Snapshot",onSave:l,isSaving:n,lastSaved:s,children:[e.jsxs("div",{style:N.grid,children:[e.jsx("div",{style:N.fullWidth,children:e.jsx(A,{label:"Listing Name",name:"Name",value:t.Name,onChange:i,maxLength:35,placeholder:"e.g., Cozy Studio in Brooklyn",helpText:"Maximum 35 characters"})}),e.jsxs("div",{style:N.fullWidth,children:[e.jsx(A,{label:"Full Address",name:"address",value:m.address,onChange:a,placeholder:"123 Main St, Brooklyn, NY 11201"}),r&&e.jsx("button",{type:"button",onClick:f,style:N.verifyButton,children:"Verify Address"})]}),!m.validated&&e.jsx("div",{style:N.fullWidth,children:e.jsx("button",{type:"button",onClick:()=>d(!p),style:N.toggleButton,children:p?"âˆ’ Hide manual inputs":"+ Show manual inputs"})}),p&&!m.validated&&e.jsxs(e.Fragment,{children:[e.jsx(A,{label:"Street Number",name:"number",value:m.number,onChange:a,placeholder:"123"}),e.jsx(A,{label:"Street Name",name:"street",value:m.street,onChange:a,placeholder:"Main St"}),e.jsx(A,{label:"City",name:"Location - City",value:c,onChange:i,placeholder:"New York"}),e.jsx(A,{label:"Borough",name:"boroughName",value:j,onChange:i,placeholder:"Brooklyn"}),e.jsx(A,{label:"State",name:"Location - State",value:S,onChange:i,placeholder:"New York"}),e.jsx(A,{label:"Zip Code",name:"Location - Zip Code",value:I,onChange:i,placeholder:"11201"}),e.jsx("div",{style:N.fullWidth,children:e.jsx(A,{label:"Neighborhood (manual input)",name:"neighborhood (manual input by user)",value:x,onChange:i,placeholder:"Park Slope"})})]}),e.jsx(F,{label:"Type of Space",name:"Features - Type of Space",value:t["Features - Type of Space"],onChange:i,options:yt,placeholder:"Select type..."}),e.jsx(F,{label:"Bedrooms",name:"Features - Qty Bedrooms",value:t["Features - Qty Bedrooms"],onChange:i,options:xt,placeholder:"Select..."}),e.jsx(F,{label:"Beds",name:"Features - Qty Beds",value:t["Features - Qty Beds"],onChange:i,options:vt,placeholder:"Select..."}),e.jsx(F,{label:"Bathrooms",name:"Features - Qty Bathrooms",value:t["Features - Qty Bathrooms"],onChange:i,options:jt,placeholder:"Select..."}),e.jsx(F,{label:"Kitchen Type",name:"Kitchen Type",value:t["Kitchen Type"],onChange:i,options:kt,placeholder:"Select..."}),e.jsx(F,{label:"Parking Type",name:"Features - Parking type",value:t["Features - Parking type"],onChange:i,options:St,placeholder:"Select..."})]}),(m.lat||m.lng)&&e.jsxs("div",{style:N.coordinatesDisplay,children:[e.jsx("span",{style:N.coordinatesLabel,children:"Coordinates:"}),e.jsxs("span",{style:N.coordinatesValue,children:[(R=m.lat)==null?void 0:R.toFixed(6),", ",(H=m.lng)==null?void 0:H.toFixed(6)]}),m.validated&&e.jsx("span",{style:N.validatedBadge,children:"Verified"})]})]})}const N={grid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},fullWidth:{gridColumn:"1 / -1"},verifyButton:{marginTop:"0.5rem",padding:"0.5rem 1rem",fontSize:"0.8125rem",fontWeight:"500",color:"#52ABEC",backgroundColor:"transparent",border:"1px solid #52ABEC",borderRadius:"0.375rem",cursor:"pointer",transition:"all 0.15s"},coordinatesDisplay:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"1rem",padding:"0.75rem",backgroundColor:"#f9fafb",borderRadius:"0.375rem",fontSize:"0.8125rem"},coordinatesLabel:{color:"#6b7280",fontWeight:"500"},coordinatesValue:{color:"#374151",fontFamily:"monospace"},validatedBadge:{padding:"0.125rem 0.5rem",backgroundColor:"#dcfce7",color:"#15803d",fontSize:"0.75rem",fontWeight:"500",borderRadius:"9999px"},toggleButton:{width:"100%",padding:"0.5rem 1rem",marginTop:"0.5rem",fontSize:"0.8125rem",fontWeight:"500",color:"#6b7280",backgroundColor:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"0.375rem",cursor:"pointer",transition:"all 0.15s","&:hover":{backgroundColor:"#e5e7eb",borderColor:"#9ca3af"}}};function It({listing:t,onUpdate:o,amenitiesInUnit:r=[],amenitiesInBuilding:n=[],isSaving:l,onSave:s,lastSaved:p}){const d=m=>{const{name:c,value:j}=m.target;o({[c]:j})},i=m=>{o({"Features - Amenities In-Unit":m})},a=m=>{o({"Features - Amenities In-Building":m})},f=m=>m.map(c=>({value:c._id||c.value,label:c.name||c.Name||c.label}));return e.jsxs(te,{title:"Features",onSave:s,isSaving:l,lastSaved:p,children:[e.jsx(fe,{label:"Description of Lodging",name:"Description",value:t.Description,onChange:d,rows:6,maxLength:2e3,placeholder:"Describe your space in detail. What makes it unique? What can guests expect?",helpText:"Be specific about what guests will have access to."}),e.jsx(fe,{label:"Neighborhood Description",name:"Description - Neighborhood",value:t["Description - Neighborhood"],onChange:d,rows:4,maxLength:1e3,placeholder:"Describe the neighborhood. What's nearby? What makes the location great?"}),e.jsxs("div",{style:P.amenitiesSection,children:[e.jsx("h3",{style:P.subheading,children:"Amenities Inside Unit"}),r.length>0?e.jsx(se,{name:"amenitiesInUnit",options:f(r),selectedValues:t["Features - Amenities In-Unit"]||[],onChange:i,columns:3}):e.jsx("p",{style:P.loadingText,children:"Loading amenities..."})]}),e.jsxs("div",{style:P.amenitiesSection,children:[e.jsx("h3",{style:P.subheading,children:"Amenities In Building"}),n.length>0?e.jsx(se,{name:"amenitiesInBuilding",options:f(n),selectedValues:t["Features - Amenities In-Building"]||[],onChange:a,columns:3}):e.jsx("p",{style:P.loadingText,children:"Loading amenities..."})]}),e.jsxs("div",{style:P.summary,children:[e.jsxs("div",{style:P.summaryItem,children:[e.jsx("span",{style:P.summaryLabel,children:"In-Unit Amenities:"}),e.jsxs("span",{style:P.summaryValue,children:[(t["Features - Amenities In-Unit"]||[]).length," selected"]})]}),e.jsxs("div",{style:P.summaryItem,children:[e.jsx("span",{style:P.summaryLabel,children:"Building Amenities:"}),e.jsxs("span",{style:P.summaryValue,children:[(t["Features - Amenities In-Building"]||[]).length," selected"]})]})]})]})}const P={amenitiesSection:{marginTop:"1.5rem",marginBottom:"1.5rem"},subheading:{fontSize:"1rem",fontWeight:"600",color:"#374151",marginBottom:"1rem"},loadingText:{fontSize:"0.875rem",color:"#6b7280",fontStyle:"italic"},summary:{display:"flex",gap:"2rem",padding:"1rem",backgroundColor:"#f9fafb",borderRadius:"0.5rem",marginTop:"1rem"},summaryItem:{display:"flex",alignItems:"center",gap:"0.5rem"},summaryLabel:{fontSize:"0.8125rem",color:"#6b7280"},summaryValue:{fontSize:"0.875rem",fontWeight:"600",color:"#374151"}},Ft=[{key:0,name:"Sunday",short:"Sun"},{key:1,name:"Monday",short:"Mon"},{key:2,name:"Tuesday",short:"Tue"},{key:3,name:"Wednesday",short:"Wed"},{key:4,name:"Thursday",short:"Thu"},{key:5,name:"Friday",short:"Fri"},{key:6,name:"Saturday",short:"Sat"}];function Mt({listing:t,onUpdate:o,isSaving:r,onSave:n,lastSaved:l}){const s=a=>{const{name:f,value:m,type:c}=a.target,j=c==="number"?m===""?null:Number(m):m;o({[f]:j})},p=a=>{const f=t["Days Available (List of Days)"]||[];let m;f.includes(a)?m=f.filter(c=>c!==a):m=[...f,a].sort((c,j)=>c-j),o({"Days Available (List of Days)":m})},d=t["rental type"]||"Monthly",i=t["Days Available (List of Days)"]||[];return e.jsxs(te,{title:"Lease Styles & Pricing",onSave:n,isSaving:r,lastSaved:l,children:[e.jsxs("div",{style:k.section,children:[e.jsx("h3",{style:k.subheading,children:"Rental Type"}),e.jsx("div",{style:k.radioGroup,children:At.map(a=>e.jsxs("label",{style:k.radioLabel,children:[e.jsx("input",{type:"radio",name:"rental type",value:a.value,checked:d===a.value,onChange:s,style:k.radioInput}),e.jsx("span",{style:k.radioText,children:a.label})]},a.value))})]}),e.jsxs("div",{style:k.section,children:[e.jsx("h3",{style:k.subheading,children:"Available Nights"}),e.jsx("p",{style:k.helpText,children:"Select which nights of the week your space is available."}),e.jsx("div",{style:k.daysGrid,children:Ft.map(a=>e.jsx("button",{type:"button",onClick:()=>p(a.key),style:{...k.dayButton,...i.includes(a.key)?k.dayButtonActive:{}},children:e.jsx("span",{style:k.dayShort,children:a.short})},a.key))}),e.jsxs("p",{style:k.selectedCount,children:[i.length," nights selected"]})]}),e.jsx("div",{style:k.section,children:e.jsx(F,{label:"Weekly Pattern",name:"Weeks offered",value:t["Weeks offered"],onChange:s,options:Tt,placeholder:"Select pattern..."})}),e.jsxs("div",{style:k.section,children:[e.jsx("h3",{style:k.subheading,children:"Pricing"}),e.jsxs("div",{style:k.grid,children:[e.jsx(A,{label:"Damage Deposit ($)",name:"ðŸ’°Damage Deposit",value:t["ðŸ’°Damage Deposit"],onChange:s,type:"number",placeholder:"500",helpText:"Minimum $500 recommended"}),e.jsx(A,{label:"Cleaning/Maintenance Fee ($)",name:"ðŸ’°Cleaning Cost / Maintenance Fee",value:t["ðŸ’°Cleaning Cost / Maintenance Fee"],onChange:s,type:"number",placeholder:"0"}),(d==="Monthly"||d==="Weekly")&&e.jsx(A,{label:"Monthly Host Rate ($)",name:"ðŸ’°Monthly Host Rate",value:t["ðŸ’°Monthly Host Rate"],onChange:s,type:"number",placeholder:"2000",helpText:"Your monthly compensation"}),d==="Weekly"&&e.jsx(A,{label:"Weekly Host Rate ($)",name:"ðŸ’°Weekly Host Rate",value:t["ðŸ’°Weekly Host Rate"],onChange:s,type:"number",placeholder:"600",helpText:"Your weekly compensation"})]}),d==="Nightly"&&e.jsxs("div",{style:k.nightlyRates,children:[e.jsx("h4",{style:k.nightlyHeading,children:"Nightly Rates by Duration"}),e.jsx("div",{style:k.nightlyGrid,children:[1,2,3,4,5,6,7].map(a=>e.jsx(A,{label:`${a} night${a>1?"s":""} ($)`,name:`ðŸ’°Nightly Host Rate for ${a} night${a>1?"s":""}`,value:t[`ðŸ’°Nightly Host Rate for ${a} night${a>1?"s":""}`],onChange:s,type:"number",placeholder:"0"},a))})]}),e.jsx(A,{label:"Extra Charges Description",name:"ðŸ’°Extra Charges",value:t["ðŸ’°Extra Charges"],onChange:s,placeholder:"e.g., Parking $50/month, Pet fee $25/night"})]})]})}const k={section:{marginBottom:"1.5rem"},subheading:{fontSize:"1rem",fontWeight:"600",color:"#374151",marginBottom:"0.75rem"},helpText:{fontSize:"0.8125rem",color:"#6b7280",marginBottom:"0.75rem"},radioGroup:{display:"flex",gap:"1.5rem",marginBottom:"1rem"},radioLabel:{display:"flex",alignItems:"center",cursor:"pointer"},radioInput:{marginRight:"0.5rem"},radioText:{fontSize:"0.875rem",color:"#374151"},daysGrid:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.5rem",marginBottom:"0.5rem"},dayButton:{padding:"0.75rem 0.5rem",border:"2px solid #e5e7eb",borderRadius:"0.5rem",backgroundColor:"#ffffff",cursor:"pointer",transition:"all 0.15s",textAlign:"center"},dayButtonActive:{borderColor:"#52ABEC",backgroundColor:"#eff6ff",color:"#1d4ed8"},dayShort:{fontSize:"0.75rem",fontWeight:"600"},selectedCount:{fontSize:"0.8125rem",color:"#6b7280",textAlign:"right"},grid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},nightlyRates:{marginTop:"1.5rem",padding:"1rem",backgroundColor:"#f9fafb",borderRadius:"0.5rem"},nightlyHeading:{fontSize:"0.875rem",fontWeight:"600",color:"#374151",marginBottom:"1rem"},nightlyGrid:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.75rem"}};function Pt({listing:t,onUpdate:o,onUploadPhoto:r,onDeletePhoto:n,isSaving:l,onSave:s,lastSaved:p}){const[d,i]=g.useState(!1),[a,f]=g.useState(0),m=g.useRef(null),c=t["Features - Photos"]||[],j=async b=>{const C=Array.from(b.target.files||[]);C.length!==0&&await I(C)},S=async b=>{b.preventDefault(),i(!1);const C=Array.from(b.dataTransfer.files).filter(O=>O.type.startsWith("image/"));C.length!==0&&await I(C)},I=async b=>{f(b.length);try{for(const C of b)r&&await r(C)}finally{f(0)}},x=b=>{b.preventDefault(),i(!0)},w=()=>{i(!1)},R=b=>{n&&n(b)},H=b=>{const C=c.map((O,oe)=>({...O,toggleMainPhoto:O.id===b,SortOrder:O.id===b?0:(O.SortOrder||oe)+1}));C.sort((O,oe)=>(O.SortOrder||0)-(oe.SortOrder||0)),o({"Features - Photos":C})},M=()=>{window.confirm("Are you sure you want to delete all photos?")&&o({"Features - Photos":[]})},$=()=>{var b;(b=m.current)==null||b.click()};return e.jsxs(te,{title:"Photos",onSave:s,isSaving:l,lastSaved:p,children:[e.jsxs("div",{style:y.validation,children:[e.jsxs("span",{style:{...y.validationText,color:c.length>=3?"#16a34a":"#b91c1c"},children:[c.length," photo",c.length!==1?"s":""," uploaded",c.length<3&&" (minimum 3 required)"]}),c.length>0&&e.jsx("button",{type:"button",onClick:M,style:y.deleteAllButton,children:"Delete All"})]}),e.jsxs("div",{onDrop:S,onDragOver:x,onDragLeave:w,onClick:$,style:{...y.uploadArea,...d?y.uploadAreaDragging:{}},children:[e.jsx("input",{ref:m,type:"file",accept:"image/*",multiple:!0,onChange:j,style:y.hiddenInput}),a>0?e.jsxs("div",{style:y.uploadingMessage,children:[e.jsx(Rt,{}),e.jsxs("span",{children:["Uploading ",a," photo",a>1?"s":"","..."]})]}):e.jsxs(e.Fragment,{children:[e.jsx(zt,{}),e.jsx("p",{style:y.uploadText,children:"Drag and drop photos here, or click to select"}),e.jsx("p",{style:y.uploadSubtext,children:"Supports JPG, PNG, WEBP up to 10MB each"})]})]}),c.length>0&&e.jsx("div",{style:y.photoGrid,children:c.map((b,C)=>e.jsxs("div",{style:y.photoCard,children:[e.jsxs("div",{style:y.photoImageWrapper,children:[e.jsx("img",{src:b.url||b.Photo,alt:`Photo ${C+1}`,style:y.photoImage}),b.toggleMainPhoto&&e.jsx("span",{style:y.mainPhotoBadge,children:"Main Photo"})]}),e.jsxs("div",{style:y.photoActions,children:[!b.toggleMainPhoto&&e.jsx("button",{type:"button",onClick:()=>H(b.id),style:y.actionButton,title:"Set as main photo",children:e.jsx(Wt,{})}),e.jsx("button",{type:"button",onClick:()=>R(b.id),style:{...y.actionButton,...y.deleteButton},title:"Delete photo",children:e.jsx(Nt,{})})]}),e.jsxs("span",{style:y.photoOrder,children:["#",C+1]})]},b.id||C))}),e.jsxs("div",{style:y.instructions,children:[e.jsx("h4",{style:y.instructionsTitle,children:"Photo Guidelines"}),e.jsxs("ul",{style:y.instructionsList,children:[e.jsx("li",{children:"Upload at least 3 high-quality photos"}),e.jsx("li",{children:"First photo will be used as the main listing image"}),e.jsx("li",{children:"Click the star icon to change the main photo"}),e.jsx("li",{children:"Show different areas: bedroom, living room, kitchen, bathroom"})]})]})]})}function zt(){return e.jsx("svg",{style:y.uploadIcon,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}function Rt(){return e.jsxs("svg",{style:y.spinnerIcon,viewBox:"0 0 24 24",fill:"none",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",style:{opacity:.25}}),e.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})]})}function Wt(){return e.jsx("svg",{style:y.icon,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}function Nt(){return e.jsx("svg",{style:y.icon,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}const y={validation:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},validationText:{fontSize:"0.875rem",fontWeight:"500"},deleteAllButton:{padding:"0.375rem 0.75rem",fontSize:"0.75rem",color:"#dc2626",backgroundColor:"transparent",border:"1px solid #fecaca",borderRadius:"0.375rem",cursor:"pointer"},uploadArea:{border:"2px dashed #d1d5db",borderRadius:"0.75rem",padding:"2rem",textAlign:"center",cursor:"pointer",transition:"all 0.15s",backgroundColor:"#fafafa"},uploadAreaDragging:{borderColor:"#52ABEC",backgroundColor:"#eff6ff"},hiddenInput:{display:"none"},uploadIcon:{width:"3rem",height:"3rem",color:"#9ca3af",margin:"0 auto 1rem"},uploadText:{fontSize:"0.875rem",color:"#374151",margin:"0 0 0.25rem"},uploadSubtext:{fontSize:"0.75rem",color:"#6b7280",margin:0},uploadingMessage:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",color:"#52ABEC"},spinnerIcon:{width:"1.5rem",height:"1.5rem",animation:"spin 1s linear infinite"},photoGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem",marginTop:"1.5rem"},photoCard:{position:"relative",border:"1px solid #e5e7eb",borderRadius:"0.5rem",overflow:"hidden",backgroundColor:"#ffffff"},photoImageWrapper:{position:"relative",aspectRatio:"4/3"},photoImage:{width:"100%",height:"100%",objectFit:"cover"},mainPhotoBadge:{position:"absolute",top:"0.5rem",left:"0.5rem",padding:"0.125rem 0.5rem",backgroundColor:"#22c55e",color:"#ffffff",fontSize:"0.625rem",fontWeight:"600",borderRadius:"9999px"},photoActions:{display:"flex",gap:"0.25rem",padding:"0.5rem",borderTop:"1px solid #e5e7eb"},actionButton:{flex:1,padding:"0.375rem",backgroundColor:"#f3f4f6",border:"none",borderRadius:"0.25rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},deleteButton:{backgroundColor:"#fef2f2",color:"#dc2626"},icon:{width:"1rem",height:"1rem"},photoOrder:{position:"absolute",bottom:"2.5rem",right:"0.5rem",padding:"0.125rem 0.375rem",backgroundColor:"rgba(0,0,0,0.6)",color:"#ffffff",fontSize:"0.625rem",borderRadius:"0.25rem"},instructions:{marginTop:"1.5rem",padding:"1rem",backgroundColor:"#eff6ff",borderRadius:"0.5rem"},instructionsTitle:{fontSize:"0.875rem",fontWeight:"600",color:"#1e40af",marginBottom:"0.5rem"},instructionsList:{margin:0,paddingLeft:"1.25rem",fontSize:"0.8125rem",color:"#1d4ed8"}},Ae=document.createElement("style");Ae.textContent=`
  @keyframes spin {
    to { transform: rotate(360deg); }
  }
`;document.head.appendChild(Ae);function _t({listing:t,onUpdate:o,houseRules:r=[],cancellationPolicyOptions:n=[],isSaving:l,onSave:s,lastSaved:p}){const[d,i]=g.useState(""),a=x=>{const{name:w,value:R,type:H}=x.target,M=H==="number"?R===""?null:Number(R):R;o({[w]:M})},f=x=>{o({"Features - House Rules":x})},m=()=>{if(!d)return;const x=t["Dates - Blocked"]||[];x.includes(d)||o({"Dates - Blocked":[...x,d].sort()}),i("")},c=x=>{const w=t["Dates - Blocked"]||[];o({"Dates - Blocked":w.filter(R=>R!==x)})},j=x=>x.map(w=>({value:w._id||w.value,label:w.name||w.Name||w.label})),S=n.length>0?n.map(x=>({value:x.id,label:x.display})):Ct,I=t["Dates - Blocked"]||[];return e.jsxs(te,{title:"Rules & Availability",onSave:s,isSaving:l,lastSaved:p,children:[e.jsxs("div",{style:D.grid,children:[e.jsx(F,{label:"Cancellation Policy",name:"Cancellation Policy",value:t["Cancellation Policy"],onChange:a,options:S,placeholder:"Select policy..."}),e.jsx(F,{label:"Preferred Gender",name:"Preferred Gender",value:t["Preferred Gender"],onChange:a,options:Bt}),e.jsx(F,{label:"Maximum Guests",name:"Features - Qty Guests",value:t["Features - Qty Guests"],onChange:a,options:Dt}),e.jsx(F,{label:"Check-in Time",name:"NEW Date Check-in Time",value:t["NEW Date Check-in Time"],onChange:a,options:wt}),e.jsx(F,{label:"Check-out Time",name:"NEW Date Check-out Time",value:t["NEW Date Check-out Time"],onChange:a,options:Lt}),e.jsx(F,{label:"Minimum Stay (Months)",name:"Minimum Months",value:t["Minimum Months"],onChange:a,options:ye,placeholder:"Select..."}),e.jsx(F,{label:"Maximum Stay (Months)",name:"Maximum Months",value:t["Maximum Months"],onChange:a,options:ye,placeholder:"Select..."})]}),e.jsxs("div",{style:D.section,children:[e.jsx("h3",{style:D.subheading,children:"House Rules"}),r.length>0?e.jsx(se,{name:"houseRules",options:j(r),selectedValues:t["Features - House Rules"]||[],onChange:f,columns:3}):e.jsx("p",{style:D.loadingText,children:"Loading house rules..."}),e.jsxs("p",{style:D.selectedCount,children:[(t["Features - House Rules"]||[]).length," rules selected"]})]}),e.jsxs("div",{style:D.section,children:[e.jsx("h3",{style:D.subheading,children:"Blocked Dates"}),e.jsx("p",{style:D.helpText,children:"Add dates when your space is not available for booking."}),e.jsxs("div",{style:D.addDateRow,children:[e.jsx(Be,{name:"newBlockedDate",value:d,onChange:x=>i(x.target.value),min:new Date().toISOString().split("T")[0]}),e.jsx("button",{type:"button",onClick:m,disabled:!d,style:{...D.addButton,...d?{}:D.addButtonDisabled},children:"Add Date"})]}),I.length>0&&e.jsx("div",{style:D.blockedDatesList,children:I.map(x=>e.jsxs("div",{style:D.blockedDateTag,children:[e.jsx("span",{children:Et(x)}),e.jsx("button",{type:"button",onClick:()=>c(x),style:D.removeButton,children:"Ã—"})]},x))}),I.length===0&&e.jsx("p",{style:D.emptyText,children:"No blocked dates added."})]})]})}function Et(t){try{return new Date(t+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return t}}const D={grid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1.5rem"},section:{marginTop:"1.5rem"},subheading:{fontSize:"1rem",fontWeight:"600",color:"#374151",marginBottom:"0.75rem"},helpText:{fontSize:"0.8125rem",color:"#6b7280",marginBottom:"0.75rem"},loadingText:{fontSize:"0.875rem",color:"#6b7280",fontStyle:"italic"},selectedCount:{fontSize:"0.8125rem",color:"#6b7280",marginTop:"0.5rem",textAlign:"right"},addDateRow:{display:"flex",gap:"0.75rem",alignItems:"flex-end",marginBottom:"1rem"},addButton:{padding:"0.625rem 1rem",fontSize:"0.875rem",fontWeight:"500",color:"#ffffff",backgroundColor:"#52ABEC",border:"none",borderRadius:"0.375rem",cursor:"pointer",whiteSpace:"nowrap"},addButtonDisabled:{backgroundColor:"#9ca3af",cursor:"not-allowed"},blockedDatesList:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},blockedDateTag:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.375rem 0.75rem",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"9999px",fontSize:"0.8125rem",color:"#991b1b"},removeButton:{padding:0,width:"1.25rem",height:"1.25rem",backgroundColor:"transparent",border:"none",borderRadius:"50%",cursor:"pointer",fontSize:"1rem",lineHeight:1,color:"#dc2626",display:"flex",alignItems:"center",justifyContent:"center"},emptyText:{fontSize:"0.875rem",color:"#6b7280",fontStyle:"italic"}};function $t({listing:t,onUpdate:o,safetyFeatures:r=[],isSaving:n,onSave:l,lastSaved:s}){const p=a=>{const{name:f,value:m,type:c}=a.target,j=c==="number"?m===""?null:Number(m):m;o({[f]:j})},d=a=>{o({"Features - Safety":a})},i=a=>a.map(f=>({value:f._id||f.value,label:f.name||f.Name||f.label}));return e.jsxs(te,{title:"Safety & Details",onSave:l,isSaving:n,lastSaved:s,children:[e.jsxs("div",{style:L.section,children:[e.jsx("h3",{style:L.subheading,children:"Safety Features"}),e.jsx("p",{style:L.helpText,children:"Select all safety features available in your property."}),r.length>0?e.jsx(se,{name:"safetyFeatures",options:i(r),selectedValues:t["Features - Safety"]||[],onChange:d,columns:3}):e.jsx("p",{style:L.loadingText,children:"Loading safety features..."}),e.jsxs("p",{style:L.selectedCount,children:[(t["Features - Safety"]||[]).length," features selected"]})]}),e.jsxs("div",{style:L.section,children:[e.jsx("h3",{style:L.subheading,children:"Property Details"}),e.jsxs("div",{style:L.grid,children:[e.jsx(A,{label:"Square Footage",name:"Features - SQFT Area",value:t["Features - SQFT Area"],onChange:p,type:"number",placeholder:"e.g., 800",helpText:"Total square feet of available space"}),e.jsx(Be,{label:"First Day Available",name:" First Available",value:t[" First Available"],onChange:p,min:new Date().toISOString().split("T")[0],helpText:"When can guests start booking?"})]})]}),e.jsxs("div",{style:L.section,children:[e.jsx("h3",{style:L.subheading,children:"External Reviews"}),e.jsx("p",{style:L.helpText,children:"If you have reviews on other platforms (Airbnb, VRBO, etc.), paste the link here."}),e.jsx(A,{label:"Previous Reviews Link",name:"Source Link",value:t["Source Link"],onChange:p,placeholder:"https://www.airbnb.com/rooms/12345678",helpText:"Optional - helps build trust with potential guests"})]}),e.jsxs("div",{style:L.summaryCard,children:[e.jsx("h4",{style:L.summaryTitle,children:"Listing Summary"}),e.jsxs("div",{style:L.summaryGrid,children:[e.jsx(ae,{label:"Safety Features",value:`${(t["Features - Safety"]||[]).length} selected`}),e.jsx(ae,{label:"Square Footage",value:t["Features - SQFT Area"]?`${t["Features - SQFT Area"]} sq ft`:"Not specified"}),e.jsx(ae,{label:"First Available",value:t[" First Available"]?Ot(t[" First Available"]):"Not set"}),e.jsx(ae,{label:"External Reviews",value:t["Source Link"]?"Link provided":"None"})]})]})]})}function ae({label:t,value:o}){return e.jsxs("div",{style:L.summaryItem,children:[e.jsx("span",{style:L.summaryLabel,children:t}),e.jsx("span",{style:L.summaryValue,children:o})]})}function Ot(t){try{return new Date(t+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return t}}const L={section:{marginBottom:"1.5rem"},subheading:{fontSize:"1rem",fontWeight:"600",color:"#374151",marginBottom:"0.5rem"},helpText:{fontSize:"0.8125rem",color:"#6b7280",marginBottom:"0.75rem"},loadingText:{fontSize:"0.875rem",color:"#6b7280",fontStyle:"italic"},selectedCount:{fontSize:"0.8125rem",color:"#6b7280",marginTop:"0.5rem",textAlign:"right"},grid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},summaryCard:{marginTop:"2rem",padding:"1.25rem",backgroundColor:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"0.5rem"},summaryTitle:{fontSize:"0.9375rem",fontWeight:"600",color:"#374151",marginBottom:"1rem"},summaryGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem"},summaryItem:{display:"flex",flexDirection:"column",gap:"0.125rem"},summaryLabel:{fontSize:"0.75rem",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.025em"},summaryValue:{fontSize:"0.875rem",fontWeight:"500",color:"#111827"}};function Vt({listing:t}){const o=[{label:"Search Ranking",value:t["Search Ranking"]??"Not ranked",description:"Position in search results"},{label:"Listing Code",value:t._id||t.id||"N/A",description:"Unique identifier"},{label:"Click Counter",value:t["Click Counter"]??0,description:"Total listing views"},{label:"Bulk Upload ID",value:t["Bulk Upload ID"]||"None",description:"Import batch reference"},{label:"Created Date",value:ve(t["Created Date"]),description:"When listing was created"},{label:"Modified Date",value:ve(t["Modified Date"]),description:"Last update"}];return e.jsxs("div",{style:ee.container,children:[e.jsx("h3",{style:ee.title,children:"Search Optimising"}),e.jsx("div",{style:ee.fieldList,children:o.map(r=>e.jsxs("div",{style:ee.field,children:[e.jsx("span",{style:ee.fieldLabel,children:r.label}),e.jsx("span",{style:ee.fieldValue,title:r.description,children:r.value})]},r.label))})]})}function ve(t){if(!t)return"N/A";try{return new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return t}}const ee={container:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"1rem"},title:{fontSize:"0.9375rem",fontWeight:"600",color:"#374151",marginBottom:"1rem",paddingBottom:"0.5rem",borderBottom:"1px solid #e5e7eb"},fieldList:{display:"flex",flexDirection:"column",gap:"0.75rem"},field:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"0.5rem"},fieldLabel:{fontSize:"0.8125rem",color:"#6b7280"},fieldValue:{fontSize:"0.8125rem",fontWeight:"500",color:"#111827",textAlign:"right",wordBreak:"break-all",maxWidth:"60%"}};function Gt({listing:t,onUpdate:o,isProcessing:r=!1}){const n=s=>p=>{o({[s]:p})},l=[{name:"Approved",label:"Approved",description:"Listing is approved for display",checked:!!t.Approved},{name:"Active",label:"Active",description:"Listing is currently active",checked:!!t.Active},{name:"availability confirmed",label:"Availability Confirmed",description:"Host has confirmed availability",checked:!!t["availability confirmed"]},{name:"Showcase",label:"Showcase",description:"Featured in showcase listings",checked:!!t.Showcase},{name:"Claimable",label:"Claimable",description:"Can be claimed by a host",checked:!!t.Claimable}];return e.jsxs("div",{style:q.container,children:[e.jsx("h3",{style:q.title,children:"Status"}),e.jsx("div",{style:q.toggleList,children:l.map(s=>e.jsxs("div",{style:q.toggleRow,children:[e.jsx(dt,{label:s.label,name:s.name,checked:s.checked,onChange:n(s.name),disabled:r}),e.jsx("span",{style:q.description,children:s.description})]},s.name))}),e.jsxs("div",{style:q.summary,children:[e.jsx(je,{label:"Visibility",status:t.Approved&&t.Active?"visible":"hidden"}),e.jsx(je,{label:"Booking",status:t["availability confirmed"]?"available":"unavailable"})]})]})}function je({label:t,status:o}){const r=o==="visible"||o==="available";return e.jsxs("div",{style:q.indicator,children:[e.jsx("span",{style:q.indicatorLabel,children:t}),e.jsx("span",{style:{...q.indicatorValue,color:r?"#16a34a":"#dc2626"},children:o.charAt(0).toUpperCase()+o.slice(1)})]})}const q={container:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"1rem"},title:{fontSize:"0.9375rem",fontWeight:"600",color:"#374151",marginBottom:"1rem",paddingBottom:"0.5rem",borderBottom:"1px solid #e5e7eb"},toggleList:{display:"flex",flexDirection:"column",gap:"1rem"},toggleRow:{display:"flex",flexDirection:"column",gap:"0.25rem"},description:{fontSize:"0.75rem",color:"#9ca3af",marginLeft:"2.75rem"},summary:{marginTop:"1.25rem",paddingTop:"1rem",borderTop:"1px solid #e5e7eb",display:"flex",gap:"1rem"},indicator:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem"},indicatorLabel:{fontSize:"0.75rem",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.025em"},indicatorValue:{fontSize:"0.875rem",fontWeight:"600"}};function Ht({listing:t}){const o=[{icon:ke,label:"Bedrooms",value:t["Features - Qty Bedrooms"]??"-"},{icon:ke,label:"Beds",value:t["Features - Qty Beds"]??"-"},{icon:Qt,label:"Bathrooms",value:t["Features - Qty Baths"]??"-"},{icon:Kt,label:"Kitchen",value:t["Features - Kitchen Type"]||"-"},{icon:qt,label:"Parking",value:t["Features - Parking"]||"-"},{icon:Yt,label:"Square Feet",value:t["Features - SQFT Area"]?`${t["Features - SQFT Area"]} sq ft`:"-"}];return e.jsxs("div",{style:T.container,children:[e.jsx("h3",{style:T.title,children:"Space Snapshot"}),e.jsxs("div",{style:T.nameSection,children:[e.jsx("span",{style:T.propertyName,children:t.Name||"Untitled Listing"}),e.jsx("span",{style:T.spaceType,children:t["Type of Space"]||"Space type not set"})]}),e.jsxs("div",{style:T.addressSection,children:[e.jsx(Ut,{style:T.locationIcon}),e.jsxs("div",{style:T.addressText,children:[e.jsx("span",{style:T.streetAddress,children:t["Address - Full Street Address"]||"Address not set"}),e.jsx("span",{style:T.cityState,children:[t["Address - City"],t["Address - State"],t["Address - Zip"]].filter(Boolean).join(", ")||"City, State not set"})]})]}),e.jsx("div",{style:T.detailsGrid,children:o.map(r=>e.jsxs("div",{style:T.detailItem,children:[e.jsx(r.icon,{style:T.detailIcon}),e.jsxs("div",{style:T.detailContent,children:[e.jsx("span",{style:T.detailValue,children:r.value}),e.jsx("span",{style:T.detailLabel,children:r.label})]})]},r.label))})]})}function Ut(t){return e.jsxs("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}function ke(t){return e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}function Qt(t){return e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"})})}function Kt(t){return e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}function qt(t){return e.jsxs("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0"})]})}function Yt(t){return e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v14a1 1 0 01-1 1H5a1 1 0 01-1-1V5z"})})}const T={container:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"1rem"},title:{fontSize:"0.9375rem",fontWeight:"600",color:"#374151",marginBottom:"1rem",paddingBottom:"0.5rem",borderBottom:"1px solid #e5e7eb"},nameSection:{marginBottom:"1rem"},propertyName:{display:"block",fontSize:"1rem",fontWeight:"600",color:"#111827",marginBottom:"0.25rem"},spaceType:{fontSize:"0.8125rem",color:"#6b7280"},addressSection:{display:"flex",gap:"0.75rem",marginBottom:"1rem",padding:"0.75rem",backgroundColor:"#f9fafb",borderRadius:"0.375rem"},locationIcon:{width:"1.25rem",height:"1.25rem",color:"#6b7280",flexShrink:0},addressText:{display:"flex",flexDirection:"column",gap:"0.125rem"},streetAddress:{fontSize:"0.875rem",color:"#111827",fontWeight:"500"},cityState:{fontSize:"0.8125rem",color:"#6b7280"},detailsGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem"},detailItem:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",backgroundColor:"#f9fafb",borderRadius:"0.375rem"},detailIcon:{width:"1rem",height:"1rem",color:"#9ca3af"},detailContent:{display:"flex",flexDirection:"column"},detailValue:{fontSize:"0.875rem",fontWeight:"600",color:"#111827"},detailLabel:{fontSize:"0.6875rem",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.025em"}};function Jt({listing:t}){const o=t._id||t.id,r=o?`/preview-split-lease/${o}`:null,n=o?`/view-split-lease/${o}`:null,l=t["Features - Photos"]||[],s=l.find(c=>c.toggleMainPhoto)||l[0],p=(s==null?void 0:s.url)||(s==null?void 0:s.Photo)||"/assets/images/placeholder-listing.png",d=t["ðŸ’°Monthly Host Rate"],i=t["ðŸ’°Weekly Host Rate"],a=d?`$${d.toLocaleString()}/mo`:i?`$${i.toLocaleString()}/wk`:"Price not set",f=t["Address - Neighborhood"]||t["Address - City"]||"Location not set",m=t["Address - Borough"]||"";return e.jsxs("div",{style:v.container,children:[e.jsx("h3",{style:v.title,children:"Listing Preview"}),e.jsxs("div",{style:v.card,children:[e.jsxs("div",{style:v.photoContainer,children:[e.jsx("img",{src:p,alt:t.Name||"Listing preview",style:v.photo,onError:c=>{c.target.src="/assets/images/placeholder-listing.png"}}),t.Showcase&&e.jsx("span",{style:v.showcaseBadge,children:"Featured"})]}),e.jsxs("div",{style:v.info,children:[e.jsx("span",{style:v.price,children:a}),e.jsx("span",{style:v.name,children:t.Name||"Untitled Listing"}),e.jsxs("span",{style:v.location,children:[f,m?`, ${m}`:""]}),e.jsxs("div",{style:v.stats,children:[e.jsxs("span",{style:v.stat,children:[t["Features - Qty Bedrooms"]??0," bed"]}),e.jsx("span",{style:v.statDivider,children:"Â·"}),e.jsxs("span",{style:v.stat,children:[t["Features - Qty Baths"]??0," bath"]}),t["Features - Qty Guests"]&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:v.statDivider,children:"Â·"}),e.jsxs("span",{style:v.stat,children:[t["Features - Qty Guests"]," guests"]})]})]})]})]}),e.jsxs("div",{style:v.actions,children:[n&&e.jsxs("a",{href:n,target:"_blank",rel:"noopener noreferrer",style:v.viewButton,children:[e.jsx(Zt,{style:v.buttonIcon}),"View as Guest"]}),r&&e.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",style:v.previewButton,children:[e.jsx(Xt,{style:v.buttonIcon}),"Host Preview"]})]}),e.jsxs("div",{style:v.statusRow,children:[e.jsx(ce,{label:"Photos",count:l.length,min:3}),e.jsx(ce,{label:"Approved",isActive:t.Approved}),e.jsx(ce,{label:"Active",isActive:t.Active})]})]})}function ce({label:t,count:o,min:r,isActive:n}){let l="neutral",s=t;o!==void 0&&r!==void 0?(l=o>=r?"success":"warning",s=`${o}/${r}`):n!==void 0&&(l=n?"success":"error",s=n?"Yes":"No");const d={success:{bg:"#dcfce7",text:"#166534"},warning:{bg:"#fef3c7",text:"#92400e"},error:{bg:"#fee2e2",text:"#991b1b"},neutral:{bg:"#f3f4f6",text:"#374151"}}[l];return e.jsxs("div",{style:{...v.statusPill,backgroundColor:d.bg,color:d.text},children:[e.jsx("span",{style:v.statusLabel,children:t}),e.jsx("span",{style:v.statusValue,children:s})]})}function Zt(t){return e.jsxs("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}function Xt(t){return e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}const v={container:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"0.5rem",padding:"1rem"},title:{fontSize:"0.9375rem",fontWeight:"600",color:"#374151",marginBottom:"1rem",paddingBottom:"0.5rem",borderBottom:"1px solid #e5e7eb"},card:{border:"1px solid #e5e7eb",borderRadius:"0.5rem",overflow:"hidden",marginBottom:"1rem"},photoContainer:{position:"relative",aspectRatio:"16/10",backgroundColor:"#f3f4f6"},photo:{width:"100%",height:"100%",objectFit:"cover"},showcaseBadge:{position:"absolute",top:"0.5rem",left:"0.5rem",padding:"0.25rem 0.5rem",backgroundColor:"#fbbf24",color:"#78350f",fontSize:"0.6875rem",fontWeight:"600",borderRadius:"0.25rem",textTransform:"uppercase"},info:{padding:"0.75rem"},price:{display:"block",fontSize:"1.125rem",fontWeight:"700",color:"#111827",marginBottom:"0.25rem"},name:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.125rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},location:{display:"block",fontSize:"0.8125rem",color:"#6b7280",marginBottom:"0.5rem"},stats:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem",color:"#6b7280"},stat:{},statDivider:{color:"#d1d5db"},actions:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},viewButton:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.375rem",padding:"0.5rem",fontSize:"0.8125rem",fontWeight:"500",color:"#374151",backgroundColor:"#f3f4f6",border:"none",borderRadius:"0.375rem",textDecoration:"none",cursor:"pointer"},previewButton:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.375rem",padding:"0.5rem",fontSize:"0.8125rem",fontWeight:"500",color:"#ffffff",backgroundColor:"#52ABEC",border:"none",borderRadius:"0.375rem",textDecoration:"none",cursor:"pointer"},buttonIcon:{width:"1rem",height:"1rem"},statusRow:{display:"flex",gap:"0.5rem"},statusPill:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"0.5rem",borderRadius:"0.375rem"},statusLabel:{fontSize:"0.6875rem",textTransform:"uppercase",letterSpacing:"0.025em"},statusValue:{fontSize:"0.8125rem",fontWeight:"600"}};function eo(){var r;const t=at();if(t.isLoading)return e.jsxs("div",{className:"modify-listings-page",children:[e.jsx(de,{}),e.jsx(ue,{}),e.jsxs("div",{className:"modify-listings-page__loading-container",children:[e.jsx("div",{className:"modify-listings-page__spinner"}),e.jsx("p",{className:"modify-listings-page__loading-text",children:"Loading listing..."})]})]});if(!t.listing)return e.jsxs("div",{className:"modify-listings-page",children:[e.jsx(de,{}),e.jsx(ue,{}),e.jsxs("div",{className:"modify-listings-page__search-container",children:[e.jsx("h2",{className:"modify-listings-page__search-title",children:"Modify Listings"}),e.jsx("p",{className:"modify-listings-page__search-subtitle",children:"Search for a listing by name or ID to begin editing."}),e.jsxs("div",{className:"modify-listings-page__search-input-wrapper",children:[e.jsx(to,{className:"modify-listings-page__search-icon"}),e.jsx("input",{type:"text",value:t.searchQuery,onChange:n=>{t.setSearchQuery(n.target.value),t.searchListings(n.target.value)},placeholder:"Search listings by name or ID...",className:"modify-listings-page__search-input"}),t.isSearching&&e.jsx("div",{className:"modify-listings-page__mini-spinner"})]}),t.searchResults.length>0&&e.jsx("div",{className:"modify-listings-page__search-results",children:t.searchResults.map(n=>e.jsxs("button",{onClick:()=>t.selectSearchResult(n),className:"modify-listings-page__search-result-item",children:[e.jsxs("div",{className:"modify-listings-page__search-result-main",children:[e.jsx("span",{className:"modify-listings-page__search-result-name",children:n.Name||"Unnamed Listing"}),e.jsx("span",{className:"modify-listings-page__search-result-address",children:n["Address - Full Street Address"]||"No address"})]}),e.jsxs("div",{className:"modify-listings-page__search-result-status",children:[e.jsx(Se,{label:n.Approved?"Approved":"Pending",type:n.Approved?"success":"warning"}),e.jsx(Se,{label:n.Active?"Active":"Inactive",type:n.Active?"success":"neutral"})]})]},n._id))}),t.error&&e.jsx("div",{className:"modify-listings-page__error-box",children:e.jsx("p",{children:t.error})})]})]});const o=()=>{const n={listing:t.listing,onUpdate:t.updateListingData,isSaving:t.isSaving,onSave:()=>t.saveSection(t.activeSection),lastSaved:t.lastSaved};switch(t.activeSection){case"address":return e.jsx(xe,{...n});case"features":return e.jsx(It,{...n,amenitiesInUnit:t.amenitiesInUnit,amenitiesInBuilding:t.amenitiesInBuilding});case"leaseStyles":return e.jsx(Mt,{...n});case"photos":return e.jsx(Pt,{...n,onUploadPhoto:t.onUploadPhoto,onDeletePhoto:t.onDeletePhoto});case"rules":return e.jsx(_t,{...n,houseRules:t.houseRules,cancellationPolicyOptions:t.cancellationPolicyOptions});case"reviews":return e.jsx($t,{...n,safetyFeatures:t.safetyFeatures});default:return e.jsx(xe,{...n})}};return e.jsxs("div",{className:"modify-listings-page",children:[e.jsx(de,{}),e.jsx(ue,{listingName:(r=t.listing)==null?void 0:r.Name,hasChanges:t.hasUnsavedChanges,onSave:t.saveChanges,onClear:t.clearListing,isSaving:t.isSaving}),t.alert&&e.jsx(ft,{type:t.alert.type,message:t.alert.message,onClose:t.dismissAlert}),e.jsxs("div",{className:"modify-listings-page__layout",children:[e.jsx("div",{className:"modify-listings-page__left-sidebar",children:e.jsx(mt,{sections:t.sections,activeSection:t.activeSection,onSectionChange:t.setActiveSection,sectionStatus:t.sectionStatus})}),e.jsx("div",{className:"modify-listings-page__main-content",children:o()}),e.jsxs("div",{className:"modify-listings-page__right-sidebar",children:[e.jsx(Jt,{listing:t.listing}),e.jsx(Gt,{listing:t.listing,onUpdate:t.updateListingData,isProcessing:t.isSaving}),e.jsx(Ht,{listing:t.listing}),e.jsx(Vt,{listing:t.listing})]})]})]})}function ue({listingName:t,hasChanges:o,onSave:r,onClear:n,isSaving:l}){return e.jsxs("header",{className:"modify-listings-page__header",children:[e.jsxs("div",{className:"modify-listings-page__header-left",children:[e.jsx("a",{href:"/",className:"modify-listings-page__logo",children:"Split Lease"}),e.jsx("span",{className:"modify-listings-page__header-divider",children:"/"}),e.jsx("span",{className:"modify-listings-page__header-title",children:"Modify Listings"}),t&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"modify-listings-page__header-divider",children:"/"}),e.jsx("span",{className:"modify-listings-page__listing-name",children:t})]}),o&&e.jsx("span",{className:"modify-listings-page__unsaved-badge",children:"Unsaved changes"})]}),e.jsx("div",{className:"modify-listings-page__header-right",children:t&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:n,className:"modify-listings-page__header-btn modify-listings-page__header-btn--secondary",children:"Close Listing"}),e.jsx("button",{onClick:r,disabled:l||!o,className:"modify-listings-page__header-btn modify-listings-page__header-btn--primary",children:l?"Saving...":"Save All"})]})})]})}function Se({label:t,type:o}){const r=`modify-listings-page__status-badge--${o}`;return e.jsx("span",{className:`modify-listings-page__status-badge ${r}`,children:t})}function to(t){return e.jsx("svg",{...t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}const oo=document.getElementById("root"),ro=Ke(oo);ro.render(e.jsx(ot,{children:e.jsx(eo,{})}));
