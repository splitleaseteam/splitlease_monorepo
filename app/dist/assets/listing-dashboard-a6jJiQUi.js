import{r as o,j as e,R as _e,c as Ie}from"./client-BJVKzfAi.js";/* empty css             */import{H as ue}from"./Header-BJKWma2V.js";import{F as me,R as De}from"./Footer-Bzf1rLKh.js";import{g as Me,a as Re,b as Fe,c as Pe,d as Le,E as Te}from"./EditListingDetails-DI6p90mO.js";import{S as Ee}from"./ScheduleCohost-BCDCqUUA.js";import{l as x,i as Be}from"./auth-QZ4BJadW.js";import{s as q}from"./supabase-BoCLEw6R.js";import{c as We,v as Oe}from"./tokenValidation-WTJVhUoY.js";import{g as fe}from"./session-D_2N6rS7.js";import{g as He}from"./nycZipCodes-DGfN4kWJ.js";import{g as $e,a as Ue,b as qe}from"./aiService-Bc-ZcM1i.js";import{a as Ge}from"./houseRulesService-B9S6foqA.js";import{I as Ne}from"./InformationalText-C-nhvRBy.js";import{H as Ce}from"./HostScheduleSelector-HOEnT3Yo.js";/* empty css                           */import{a as Ye}from"./Toast-BQk6Nzgd.js";import{E as ze}from"./ErrorBoundary-9_HbXv1y.js";import"./config-QPKPRtag.js";import"./constants-CPVJY5eo.js";import"./proposalDataFetcher-CipdyWU2.js";import"./proposalStatuses-1Bj0NYR4.js";import"./photoUpload-vf9LU0fY.js";import"./dataLookups-zG18yzis.js";const Qe=({isOpen:t=!1,onClose:i=()=>{},onSubmit:a=()=>{},currentUserEmail:s="",listingId:c="",isLoading:d=!1})=>{const[r,n]=o.useState(""),[h,y]=o.useState(s),[l,f]=o.useState({});o.useEffect(()=>{t&&(n(""),y(s),f({}))},[t,s]),o.useEffect(()=>{const b=S=>{S.key==="Escape"&&t&&i()};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[t,i]),o.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]);const L=()=>{const b={};return r.trim()||(b.reviewsUrl="Reviews URL is required"),h.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h)||(b.emailAddress="Please enter a valid email address"):b.emailAddress="Email address is required",f(b),Object.keys(b).length===0},R=async b=>{b.preventDefault(),L()&&await a({reviewsUrl:r.trim(),emailAddress:h.trim(),listingId:c})},p=b=>{b.target===b.currentTarget&&i()};return t?e.jsx("div",{className:"import-listing-modal-overlay",onClick:p,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:e.jsxs("div",{className:"import-listing-modal-container",onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{className:"import-listing-header",children:[e.jsxs("div",{className:"import-listing-header-top",children:[e.jsx("span",{className:"import-listing-icon","aria-hidden":"true",children:"â­"}),e.jsx("h2",{id:"modal-title",className:"import-listing-title",children:"Import Listing Reviews"})]}),e.jsx("button",{onClick:i,className:"import-listing-close-btn","aria-label":"Close modal",type:"button",children:"Ã—"})]}),e.jsxs("form",{onSubmit:R,className:"space-y-4","aria-label":"Import reviews form",children:[e.jsxs("div",{className:"import-listing-section",children:[e.jsx("label",{htmlFor:"reviews-url",className:"import-listing-label",children:"Reviews Page URL"}),e.jsx("input",{id:"reviews-url",type:"text",value:r,onChange:b=>n(b.target.value),placeholder:"Paste your Airbnb or VRBO reviews link here...",className:`import-listing-input ${l.reviewsUrl?"input-error":""}`,"aria-invalid":l.reviewsUrl?"true":"false","aria-describedby":l.reviewsUrl?"reviews-url-error":"reviews-url-help"}),l.reviewsUrl&&e.jsx("span",{id:"reviews-url-error",className:"error-message",role:"alert",children:l.reviewsUrl}),e.jsx("p",{id:"reviews-url-help",className:"import-listing-helper",children:"Supports Airbnb, VRBO, Booking.com, and other platforms."})]}),e.jsxs("div",{className:"import-listing-section",children:[e.jsx("label",{htmlFor:"email-address",className:"import-listing-label",children:"Your email address"}),e.jsx("input",{id:"email-address",type:"email",value:h,onChange:b=>y(b.target.value),placeholder:"Email Address...",className:`import-listing-input ${l.emailAddress?"input-error":""}`,"aria-invalid":l.emailAddress?"true":"false","aria-describedby":l.emailAddress?"email-error":void 0}),l.emailAddress&&e.jsx("span",{id:"email-error",className:"error-message",role:"alert",children:l.emailAddress})]}),e.jsxs("div",{className:"import-listing-info",role:"note","aria-label":"Import information",children:[e.jsx("div",{className:"info-icon",children:"â„¹ï¸"}),e.jsx("p",{className:"import-listing-info-text",children:"Our team will review your request and import your reviews within 24-48 hours. You'll receive an email confirmation once complete."})]}),e.jsx("div",{className:"import-listing-buttons",children:e.jsx("button",{type:"submit",disabled:d,className:"import-listing-btn import-listing-btn-primary","aria-label":d?"Submitting request":"Submit import request",children:d?"Submitting...":"Import Reviews"})})]})]})}):null},Ve=()=>e.jsx("svg",{className:"ai-import-spinner",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Je=()=>e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M20 6L9 17l-5-5"})}),Ke=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"}),e.jsx("path",{d:"M5 3v4"}),e.jsx("path",{d:"M19 17v4"}),e.jsx("path",{d:"M3 5h4"}),e.jsx("path",{d:"M17 19h4"})]}),Ze=()=>e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#22c55e",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"m9 12 2 2 4-4"})]}),be=["#6b4fbb","#22c55e","#fbbf24","#f472b6","#60a5fa","#31135d","#10b981"],ve=["circle","square","ribbon"],Xe=(t=50)=>Array.from({length:t},(i,a)=>({id:a,color:be[a%be.length],shape:ve[a%ve.length],left:Math.random()*100,delay:Math.random()*.8})),et=()=>{const t=Xe(50);return e.jsx("div",{className:"ai-import-confetti-container",children:t.map(i=>e.jsx("div",{className:`ai-import-confetti ai-import-confetti--${i.shape}`,style:{left:`${i.left}%`,backgroundColor:i.color,animationDelay:`${i.delay}s`}},i.id))})},tt=[{key:"inUnitAmenities",label:"In-Unit Amenities"},{key:"buildingAmenities",label:"Building Amenities"},{key:"neighborhood",label:"Neighborhood Description"},{key:"houseRules",label:"House Rules"},{key:"safetyFeatures",label:"Safety Features"},{key:"description",label:"Property Description (AI)"},{key:"name",label:"Listing Name (AI)"}],st=({isOpen:t=!1,onClose:i=()=>{},onComplete:a=()=>{},generationStatus:s={},isGenerating:c=!1,isComplete:d=!1,generatedData:r={},onStartGeneration:n=()=>{}})=>{const[h,y]=o.useState(!1);o.useEffect(()=>{t&&!h&&!c&&!d&&(y(!0),n())},[t,h,c,d,n]),o.useEffect(()=>{t||y(!1)},[t]),o.useEffect(()=>{const p=b=>{b.key==="Escape"&&t&&!c&&i()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[t,c,i]),o.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]);const l=p=>{p.target===p.currentTarget&&!c&&i()},f=()=>{a(r),i()},L=p=>{const b=s[p];return b==="complete"?e.jsx(Je,{}):b==="loading"?e.jsx(Ve,{}):null},R=p=>{const b=s[p];return b==="complete"?"ai-import-task--complete":b==="loading"?"ai-import-task--loading":"ai-import-task--pending"};return t?e.jsx("div",{className:"ai-import-modal-overlay",onClick:l,role:"dialog","aria-modal":"true","aria-labelledby":"ai-import-title",children:e.jsxs("div",{className:"ai-import-modal-container",onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"ai-import-header",children:[e.jsxs("div",{className:"ai-import-header-content",children:[e.jsx("span",{className:"ai-import-icon",children:e.jsx(Ke,{})}),e.jsx("h2",{id:"ai-import-title",className:"ai-import-title",children:d?"AI Import Complete!":"AI Import Assistant"})]}),!c&&e.jsx("button",{onClick:i,className:"ai-import-close-btn","aria-label":"Close modal",type:"button",children:"Ã—"})]}),d&&e.jsx(et,{}),e.jsx("div",{className:"ai-import-content",children:d?e.jsxs("div",{className:"ai-import-success",children:[e.jsx("div",{className:"ai-import-success-icon",children:e.jsx(Ze,{})}),e.jsx("h3",{className:"ai-import-success-title",children:"All fields generated successfully!"}),e.jsx("p",{className:"ai-import-success-text",children:"Your listing has been updated with AI-generated content. Review the changes below and make any adjustments as needed."}),e.jsxs("div",{className:"ai-import-summary",children:[e.jsxs("div",{className:"ai-import-summary-item",children:[e.jsx("span",{className:"ai-import-summary-label",children:"New Name:"}),e.jsx("span",{className:"ai-import-summary-value",children:r.name||"N/A"})]}),e.jsxs("div",{className:"ai-import-summary-item",children:[e.jsx("span",{className:"ai-import-summary-label",children:"Amenities Added:"}),e.jsxs("span",{className:"ai-import-summary-value",children:[(r.inUnitAmenitiesCount||0)+(r.buildingAmenitiesCount||0)," total"]})]}),e.jsxs("div",{className:"ai-import-summary-item",children:[e.jsx("span",{className:"ai-import-summary-label",children:"Rules & Safety:"}),e.jsxs("span",{className:"ai-import-summary-value",children:[(r.houseRulesCount||0)+(r.safetyFeaturesCount||0)," items"]})]})]})]}):e.jsxs("div",{className:"ai-import-loading",children:[e.jsx("p",{className:"ai-import-loading-text",children:"Generating your listing content using AI..."}),e.jsx("div",{className:"ai-import-tasks",children:tt.map(p=>e.jsxs("div",{className:`ai-import-task ${R(p.key)}`,children:[e.jsx("div",{className:"ai-import-task-icon",children:L(p.key)}),e.jsx("span",{className:"ai-import-task-label",children:p.label})]},p.key))}),e.jsx("p",{className:"ai-import-loading-note",children:"This may take a few moments. Please don't close this window."})]})}),e.jsx("div",{className:"ai-import-footer",children:d?e.jsx("button",{type:"button",onClick:f,className:"ai-import-btn ai-import-btn-primary",children:"View Changes"}):e.jsx("button",{type:"button",disabled:!0,className:"ai-import-btn ai-import-btn-disabled",children:"Generating..."})})]})}):null};function it(){const[t,i]=o.useState(null),[a,s]=o.useState({isChecking:!0,shouldRedirect:!1});return o.useEffect(()=>{(async()=>{var d,r,n,h,y,l,f;try{if(!await We()){x.debug("[useListingAuth] User not authenticated, redirecting to home"),s({isChecking:!1,shouldRedirect:!0}),setTimeout(()=>{window.location.href="/?login=true"},100);return}const R=await Oe({clearOnFailure:!1});if(R)i(R),s({isChecking:!1,shouldRedirect:!1}),x.debug("[useListingAuth] User data loaded:",R["Name - First"]||R.firstName);else{const{data:{session:p}}=await q.auth.getSession();if(p!=null&&p.user){const b={_id:((d=p.user.user_metadata)==null?void 0:d.user_id)||Be()||p.user.id,id:p.user.id,"Name - First":((r=p.user.user_metadata)==null?void 0:r.first_name)||fe()||((n=p.user.email)==null?void 0:n.split("@")[0])||"Host","Name - Last":((h=p.user.user_metadata)==null?void 0:h.last_name)||"",email:p.user.email,firstName:((y=p.user.user_metadata)==null?void 0:y.first_name)||fe()||((l=p.user.email)==null?void 0:l.split("@")[0])||"Host",lastName:((f=p.user.user_metadata)==null?void 0:f.last_name)||""};i(b),s({isChecking:!1,shouldRedirect:!1}),x.debug("[useListingAuth] Using fallback user data from session:",b.firstName)}else x.debug("[useListingAuth] No valid session, redirecting"),s({isChecking:!1,shouldRedirect:!0}),setTimeout(()=>{window.location.href="/?login=true"},100)}}catch(L){x.warn("[useListingAuth] Could not fetch user data:",L),s({isChecking:!1,shouldRedirect:!1})}})()},[]),{currentUser:t,authState:a}}function oe(t){if(!t)return[];if(Array.isArray(t))return t;if(typeof t=="string")try{const i=JSON.parse(t);return Array.isArray(i)?i:[]}catch(i){return x.warn("Failed to parse JSON array:",i),[]}return[]}async function at(){const t={amenities:{},safetyFeatures:{},houseRules:{},listingTypes:{},parkingOptions:{},storageOptions:{}};try{const{data:i}=await q.from("zat_features_amenity").select('_id, "Name", "Icon"');i&&i.forEach(n=>{t.amenities[n._id]={name:n.Name,icon:n.Icon},t.amenities[n.Name]={name:n.Name,icon:n.Icon}});const{data:a}=await q.from("zfut_safetyfeatures").select('_id, "Name", "Icon"');a&&a.forEach(n=>{t.safetyFeatures[n._id]={name:n.Name,icon:n.Icon}});const{data:s}=await q.schema("reference_table").from("zat_features_houserule").select('_id, "Name", "Icon"');s&&s.forEach(n=>{const h=n.Icon&&n.Icon.startsWith("//")?"https:"+n.Icon:n.Icon;t.houseRules[n._id]={name:n.Name,icon:h},t.houseRules[n.Name]={name:n.Name,icon:h}});const{data:c}=await q.schema("reference_table").from("zat_features_listingtype").select('_id, "Label ", "Icon"');c&&c.forEach(n=>{t.listingTypes[n._id]={name:n["Label "],icon:n.Icon}});const{data:d}=await q.schema("reference_table").from("zat_features_parkingoptions").select('_id, "Label"');d&&d.forEach(n=>{t.parkingOptions[n._id]={name:n.Label}});const{data:r}=await q.schema("reference_table").from("zat_features_storageoptions").select('_id, "Title"');r&&r.forEach(n=>{t.storageOptions[n._id]={name:n.Title}}),x.debug("ðŸ“š Lookup tables loaded")}catch(i){x.warn("âš ï¸ Failed to fetch lookup tables:",i)}return t}function nt(t,i=[],a={}){var R,p,b,S,_,N;if(!t)return null;const s=t._id;let c={};try{typeof t["Location - Address"]=="string"?c=JSON.parse(t["Location - Address"]):t["Location - Address"]&&(c=t["Location - Address"])}catch(v){x.warn("Failed to parse location address:",v)}const d=oe(t["Features - Amenities In-Unit"]).map(v=>{var D,k,w,T;return{id:v,name:((k=(D=a.amenities)==null?void 0:D[v])==null?void 0:k.name)||v,icon:((T=(w=a.amenities)==null?void 0:w[v])==null?void 0:T.icon)||null}}),r=oe(t["Features - Amenities In-Building"]).map(v=>{var D,k,w,T;return{id:v,name:((k=(D=a.amenities)==null?void 0:D[v])==null?void 0:k.name)||v,icon:((T=(w=a.amenities)==null?void 0:w[v])==null?void 0:T.icon)||null}}),n=oe(t["Features - Safety"]).map(v=>{var D,k,w,T;return{id:v,name:((k=(D=a.safetyFeatures)==null?void 0:D[v])==null?void 0:k.name)||v,icon:((T=(w=a.safetyFeatures)==null?void 0:w[v])==null?void 0:T.icon)||null}}),h=oe(t["Features - House Rules"]).map(v=>{var D,k,w,T;return{id:v,name:((k=(D=a.houseRules)==null?void 0:D[v])==null?void 0:k.name)||v,icon:((T=(w=a.houseRules)==null?void 0:w[v])==null?void 0:T.icon)||null}}),y=i.map((v,D)=>({id:v._id,url:v.Photo||v.URL||"",isCover:v.toggleMainPhoto||D===0,photoType:v.Type||"Other"})),l=oe(t["Days Available (List of Days)"]).map(v=>typeof v=="number"?v:parseInt(v,10)),f=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],L=oe(t["Days Available (List of Days)"]).map(v=>{const D=typeof v=="number"?v:parseInt(v,10);return f[D]}).filter(Boolean);return{id:s,_id:s,title:t.Name||"Untitled Listing",description:t.Description||"",descriptionNeighborhood:t["Description - Neighborhood"]||"",Name:t.Name||"",Description:t.Description||"","Description - Neighborhood":t["Description - Neighborhood"]||"","Location - City":t["Location - City"]||"","Location - State":t["Location - State"]||"","Location - Zip Code":t["Location - Zip Code"]||"","Location - Borough":t["Location - Borough"]||"","Location - Hood":t["Location - Hood"]||"","Features - Type of Space":t["Features - Type of Space"]||"","Features - Qty Bedrooms":t["Features - Qty Bedrooms"]||0,"Features - Qty Bathrooms":t["Features - Qty Bathrooms"]||0,"Features - Qty Beds":t["Features - Qty Beds"]||0,"Features - Qty Guests":t["Features - Qty Guests"]||1,"Features - SQFT Area":t["Features - SQFT Area"]||0,"Features - SQFT of Room":t["Features - SQFT of Room"]||0,"Kitchen Type":t["Kitchen Type"]||"","Features - Parking type":t["Features - Parking type"]||"","Features - Secure Storage Option":t["Features - Secure Storage Option"]||"","Features - House Rules":t["Features - House Rules"]||[],"Features - Photos":t["Features - Photos"]||[],"Features - Amenities In-Unit":t["Features - Amenities In-Unit"]||[],"Features - Amenities In-Building":t["Features - Amenities In-Building"]||[],"Features - Safety":t["Features - Safety"]||[],"First Available":t[" First Available"]||"","Minimum Nights":t["Minimum Nights"]||2,"Maximum Nights":t["Maximum Nights"]||7,"Cancellation Policy":t["Cancellation Policy"]||"",location:{id:s,address:c.address||t["Not Found - Location - Address "]||"",hoodsDisplay:t["Location - Hood"]||"",boroughDisplay:He(t["Location - Zip Code"])||"",city:t["Location - City"]||"",state:t["Location - State"]||"",zipCode:t["Location - Zip Code"]||"",latitude:c.lat||null,longitude:c.lng||null},status:t.Active?"Online":"Offline",isOnline:t.Active||!1,isApproved:t.Approved||!1,isComplete:t.Complete||!1,createdAt:t["Created Date"]?new Date(t["Created Date"]):null,activeSince:t["Created Date"]?new Date(t["Created Date"]):null,updatedAt:t["Modified Date"]?new Date(t["Modified Date"]):null,features:{id:s,typeOfSpace:{id:t["Features - Type of Space"],label:((p=(R=a.listingTypes)==null?void 0:R[t["Features - Type of Space"]])==null?void 0:p.name)||t["Features - Type of Space"]||"N/A"},parkingType:{id:t["Features - Parking type"],label:((S=(b=a.parkingOptions)==null?void 0:b[t["Features - Parking type"]])==null?void 0:S.name)||t["Features - Parking type"]||"No parking"},kitchenType:{id:t["Kitchen Type"],display:t["Kitchen Type"]||"No kitchen"},storageType:{id:t["Features - Secure Storage Option"],label:((N=(_=a.storageOptions)==null?void 0:_[t["Features - Secure Storage Option"]])==null?void 0:N.name)||t["Features - Secure Storage Option"]||"No storage"},qtyGuests:t["Features - Qty Guests"]||1,bedrooms:t["Features - Qty Bedrooms"]||0,bathrooms:t["Features - Qty Bathrooms"]||0,squareFootage:t["Features - SQFT Area"]||0,squareFootageRoom:t["Features - SQFT of Room"]||0},inUnitAmenities:d,buildingAmenities:r,safetyFeatures:n,houseRules:h,preferredGender:{id:t["Preferred Gender"],display:t["Preferred Gender"]||"Any"},maxGuests:t["Features - Qty Guests"]||2,leaseStyle:t["rental type"]||"Nightly",nightsPerWeekMin:t["Minimum Nights"]||2,nightsPerWeekMax:t["Maximum Nights"]||7,availableDays:l,nightsAvailable:L,pricing:{1:t["ðŸ’°Nightly Host Rate for 1 night"]||0,2:t["ðŸ’°Nightly Host Rate for 2 nights"]||0,3:t["ðŸ’°Nightly Host Rate for 3 nights"]||0,4:t["ðŸ’°Nightly Host Rate for 4 nights"]||0,5:t["ðŸ’°Nightly Host Rate for 5 nights"]||0,6:t["ðŸ’°Nightly Host Rate for 5 nights"]||0,7:t["ðŸ’°Nightly Host Rate for 7 nights"]||0},weeklyCompensation:{1:(t["ðŸ’°Nightly Host Rate for 1 night"]||0)*1,2:(t["ðŸ’°Nightly Host Rate for 2 nights"]||0)*2,3:(t["ðŸ’°Nightly Host Rate for 3 nights"]||0)*3,4:(t["ðŸ’°Nightly Host Rate for 4 nights"]||0)*4,5:(t["ðŸ’°Nightly Host Rate for 5 nights"]||0)*5,6:(t["ðŸ’°Nightly Host Rate for 5 nights"]||0)*6,7:(t["ðŸ’°Nightly Host Rate for 7 nights"]||0)*7},damageDeposit:t["ðŸ’°Damage Deposit"]||0,maintenanceFee:t["ðŸ’°Cleaning Cost / Maintenance Fee"]||0,monthlyHostRate:t["ðŸ’°Monthly Host Rate"]||0,weeklyHostRate:t["ðŸ’°Weekly Host Rate"]||0,weeksOffered:t["Weeks offered"]||"",leaseTermMin:t["Minimum Weeks"]||6,leaseTermMax:t["Maximum Weeks"]||52,earliestAvailableDate:t[" First Available"]?new Date(t[" First Available"]):new Date,checkInTime:t["NEW Date Check-in Time"]||"1:00 pm",checkOutTime:t["NEW Date Check-out Time"]||"1:00 pm",blockedDates:oe(t["Dates - Blocked"]).map(v=>typeof v=="string"?v.split("T")[0]:v),cancellationPolicy:t["Cancellation Policy"]||"Standard",cancellationPolicyAdditionalRestrictions:t["Cancellation Policy - Additional Restrictions"]||"",photos:y,virtualTourUrl:t["video tour"]||null}}function ot(t){const[i,a]=o.useState(null),[s,c]=o.useState({proposals:0,virtualMeetings:0,leases:0,reviews:0}),[d,r]=o.useState(!0),[n,h]=o.useState(null),[y,l]=o.useState(null),f=o.useCallback(async(R=!1)=>{if(!t){x.error("âŒ No listing ID provided to useListingData"),h("No listing ID provided. Please access this page from your listings."),r(!1);return}R||r(!0),h(null);try{x.debug("ðŸ” Fetching listing:",t);const p=await q.from("listing").select("*").eq("_id",t).maybeSingle();if(p.error)throw new Error(`Failed to fetch listing: ${p.error.message}`);const b=p.data;if(!b)throw new Error("Listing not found");x.debug("âœ… Found listing:",b._id);const[S,_,N,v,D,k]=await Promise.all([at(),q.from("listing_photo").select("*").eq("Listing",t).eq("Active",!0).order("SortOrder",{ascending:!0}),q.from("proposal").select("*",{count:"exact",head:!0}).eq("Listing",t),q.from("bookings_leases").select("*",{count:"exact",head:!0}).eq("Listing",t),q.from("virtualmeetingschedulesandlinks").select("*",{count:"exact",head:!0}).eq("Listing",t),q.from("external_reviews").select("*",{count:"exact",head:!0}).eq("listing_id",t)]);let w=[];const T=oe(b["Features - Photos"]);if(T.length>0){const I=T[0],F=typeof I=="object"&&I!==null;w=T.map((B,G)=>{const g=F&&(B.url||B.Photo||B.URL)||String(B);return{_id:F?B.id||`inline_${G}`:`inline_${G}`,Photo:g,URL:g,toggleMainPhoto:F?B.toggleMainPhoto??B.isCover??G===0:G===0,Type:F&&(B.type||B.Type)||"Other",SortOrder:F?B.SortOrder??B.sortOrder??G:G,Active:!0}}),x.debug("ðŸ“· Embedded photos from Features - Photos:",w.length)}else{const{data:I,error:F}=_;F&&x.warn("âš ï¸ Failed to fetch photos:",F),w=I||[],x.debug("ðŸ“· Photos from listing_photo table:",w.length)}const{count:H,error:K}=N;K&&x.warn("âš ï¸ Failed to fetch proposals count:",K);const{count:te,error:Z}=v;Z&&x.warn("âš ï¸ Failed to fetch leases count:",Z);const{count:P,error:X}=D;X&&x.warn("âš ï¸ Failed to fetch meetings count:",X);const{count:u,error:C}=k;C&&x.warn("âš ï¸ Failed to fetch reviews count:",C);const E=nt(b,w||[],S);a(E),c({proposals:H||0,virtualMeetings:P||0,leases:te||0,reviews:u||0}),x.debug("âœ… Listing loaded successfully");try{const{data:I,error:F}=await q.from("co_hostrequest").select("*").eq("Listing",t).order('"Created Date"',{ascending:!1}).limit(1).maybeSingle();F?x.warn("âš ï¸ Failed to fetch cohost request:",F):I&&(x.debug("ðŸ“‹ Found existing cohost request:",I._id),l(I))}catch(I){x.warn("âš ï¸ Error fetching cohost request:",I)}}catch(p){x.error("âŒ Error fetching listing:",p),R||h(p.message||"Failed to load listing")}finally{R||r(!1)}},[t]),L=o.useCallback(async R=>{const p={"First Available":" First Available"},b={};for(const[v,D]of Object.entries(R)){const k=p[v]||v;b[k]=D}const{error:S}=await q.from("listing").update(b).eq("_id",t);if(S)throw x.error("âŒ Error updating listing:",S),x.error("âŒ Full error:",JSON.stringify(S,null,2)),S;const{data:_,error:N}=await q.from("listing").select("*").eq("_id",t).maybeSingle();return N?(x.warn("âš ï¸ Update succeeded but failed to fetch updated data:",N),{_id:t,...b}):_},[t]);return o.useEffect(()=>{f()},[f]),{listing:i,setListing:a,counts:s,isLoading:d,error:n,existingCohostRequest:y,setExistingCohostRequest:l,fetchListing:f,updateListing:L}}function rt(t,i,a,s){const c=o.useCallback(async n=>{if(!t||!n)return;const h=t.photos.findIndex(f=>f.id===n);if(h===-1||h===0)return;const y=[...t.photos],[l]=y.splice(h,1);l.isCover=!0,y.forEach(f=>{f.isCover=!1}),y.unshift(l),i(f=>({...f,photos:y}));try{await q.from("listing_photo").update({toggleMainPhoto:!1}).eq("Listing",s),await q.from("listing_photo").update({toggleMainPhoto:!0,SortOrder:0}).eq("_id",n);for(let f=0;f<y.length;f++)y[f].id!==n&&await q.from("listing_photo").update({SortOrder:f}).eq("_id",y[f].id);x.debug("âœ… Cover photo updated in listing_photo table")}catch(f){x.error("âŒ Error updating cover photo:",f),a(!0)}},[t,i,a,s]),d=o.useCallback(async(n,h)=>{if(!t||n===h)return;const y=[...t.photos],[l]=y.splice(n,1);y.splice(h,0,l),y.forEach((f,L)=>{f.isCover=L===0}),i(f=>({...f,photos:y}));try{for(let f=0;f<y.length;f++)await q.from("listing_photo").update({SortOrder:f,toggleMainPhoto:f===0}).eq("_id",y[f].id);x.debug("âœ… Photos reordered in listing_photo table")}catch(f){x.error("âŒ Error reordering photos:",f),a(!0)}},[t,i,a]),r=o.useCallback(async n=>{if(!t||!n)return;const h=t.photos.findIndex(l=>l.id===n);if(h===-1)return;const y=t.photos.filter(l=>l.id!==n);y.length>0&&t.photos[h].isCover&&(y[0].isCover=!0),i(l=>({...l,photos:y}));try{await q.from("listing_photo").update({Active:!1}).eq("_id",n),y.length>0&&t.photos[h].isCover&&await q.from("listing_photo").update({toggleMainPhoto:!0}).eq("_id",y[0].id),x.debug("âœ… Photo deleted from listing_photo table")}catch(l){x.error("âŒ Error deleting photo:",l),a(!0)}},[t,i,a]);return{handleSetCoverPhoto:c,handleReorderPhotos:d,handleDeletePhoto:r}}function lt(t,i,a,s,c){const[d,r]=o.useState(!1),[n,h]=o.useState({name:"pending",description:"pending",neighborhood:"pending",inUnitAmenities:"pending",buildingAmenities:"pending",houseRules:"pending",safetyFeatures:"pending"}),[y,l]=o.useState(!1),[f,L]=o.useState(!1),[R,p]=o.useState({}),[b,S]=o.useState(new Set),_=o.useCallback(()=>{h({name:"pending",description:"pending",neighborhood:"pending",inUnitAmenities:"pending",buildingAmenities:"pending",houseRules:"pending",safetyFeatures:"pending"}),l(!1),L(!1),p({}),r(!0)},[]),N=o.useCallback(()=>{r(!1)},[]),v=o.useCallback(k=>{const w=new Set;a(T=>{if(!T)return T;const H={...T};return k.name&&k.name!==T.title&&(H.title=k.name,H.Name=k.name,w.add("name")),k.description&&k.description!==T.description&&(H.description=k.description,H.Description=k.description,w.add("description")),k.neighborhood&&k.neighborhood!==T.descriptionNeighborhood&&(H.descriptionNeighborhood=k.neighborhood,H["Description - Neighborhood"]=k.neighborhood,w.add("neighborhood")),(k.inUnitAmenitiesCount>0||k.buildingAmenitiesCount>0)&&w.add("amenities"),k.houseRulesCount>0&&w.add("rules"),k.safetyFeaturesCount>0&&w.add("safety"),H}),S(w),x.debug("âœ¨ Highlighting changed fields:",[...w]),setTimeout(()=>{S(new Set)},8e3),c&&setTimeout(()=>{s(!0)},500)},[a,c,s]),D=o.useCallback(async()=>{var H,K,te,Z,P,X,u,C,E,I,F,B,G,g,M,W,U,Q,Y,ie,$,V;if(!t){x.error("âŒ No listing data available for AI generation");return}l(!0);const k={},w={inUnit:((H=t.inUnitAmenities)==null?void 0:H.map(z=>z.name))||[],building:((K=t.buildingAmenities)==null?void 0:K.map(z=>z.name))||[]};let T=((te=t.location)==null?void 0:te.hoodsDisplay)||"";try{x.debug("ðŸ¤– Starting AI Import Assistant generation..."),x.debug("ðŸ“‹ Step 1: Loading common features and data first..."),h(m=>({...m,inUnitAmenities:"loading"}));try{const m=await Me();if(m.length>0){const A=((Z=t.inUnitAmenities)==null?void 0:Z.map(O=>O.name))||[],j=[...new Set([...A,...m])];w.inUnit=j,k.inUnitAmenities=j,k.inUnitAmenitiesCount=m.length,await i({"Features - Amenities In-Unit":j})}h(A=>({...A,inUnitAmenities:"complete"}))}catch(m){x.error("âŒ Error loading in-unit amenities:",m),h(A=>({...A,inUnitAmenities:"complete"}))}h(m=>({...m,buildingAmenities:"loading"}));try{const m=await Re();if(m.length>0){const A=((P=t.buildingAmenities)==null?void 0:P.map(O=>O.name))||[],j=[...new Set([...A,...m])];w.building=j,k.buildingAmenities=j,k.buildingAmenitiesCount=m.length,await i({"Features - Amenities In-Building":j})}h(A=>({...A,buildingAmenities:"complete"}))}catch(m){x.error("âŒ Error loading building amenities:",m),h(A=>({...A,buildingAmenities:"complete"}))}h(m=>({...m,neighborhood:"loading"}));try{let m=null;const A=(X=t.location)==null?void 0:X.hoodsDisplay;if(A&&(x.debug("ðŸ˜ï¸ Trying neighborhood lookup by name:",A),m=await Fe(A),m!=null&&m.description&&x.debug("âœ… Found neighborhood by name:",A)),!(m!=null&&m.description)){const j=(u=t.location)==null?void 0:u.zipCode;j&&(x.debug("ðŸ˜ï¸ Trying neighborhood lookup by ZIP:",j),m=await Pe(j),m!=null&&m.description&&x.debug("âœ… Found neighborhood by ZIP:",j))}if(!(m!=null&&m.description)){x.debug("ðŸ˜ï¸ No database match, trying AI generation...");const j={fullAddress:((C=t.location)==null?void 0:C.address)||"",city:((E=t.location)==null?void 0:E.city)||"",state:((I=t.location)==null?void 0:I.state)||"",zip:((F=t.location)==null?void 0:F.zipCode)||""};if(j.city||j.fullAddress){const O=await $e(j);O&&(m={description:O,neighborhoodName:A||""},x.debug("âœ… Generated neighborhood via AI"))}}m!=null&&m.description?(k.neighborhood=m.description,k.neighborhoodName=m.neighborhoodName,T=m.neighborhoodName||T,await i({"Description - Neighborhood":m.description})):x.warn("âš ï¸ No neighborhood description found via any method"),h(j=>({...j,neighborhood:"complete"}))}catch(m){x.error("âŒ Error loading neighborhood:",m),h(A=>({...A,neighborhood:"complete"}))}h(m=>({...m,houseRules:"loading"}));try{const m=await Ge();if(m.length>0){const A=((B=t.houseRules)==null?void 0:B.map(O=>O.name))||[],j=[...new Set([...A,...m])];k.houseRules=j,k.houseRulesCount=m.length,await i({"Features - House Rules":j})}h(A=>({...A,houseRules:"complete"}))}catch(m){x.error("âŒ Error loading house rules:",m),h(A=>({...A,houseRules:"complete"}))}h(m=>({...m,safetyFeatures:"loading"}));try{const m=await Le();if(m.length>0){const A=((G=t.safetyFeatures)==null?void 0:G.map(O=>O.name))||[],j=[...new Set([...A,...m])];k.safetyFeatures=j,k.safetyFeaturesCount=m.length,await i({"Features - Safety":j})}h(A=>({...A,safetyFeatures:"complete"}))}catch(m){x.error("âŒ Error loading safety features:",m),h(A=>({...A,safetyFeatures:"complete"}))}x.debug("ðŸ“‹ Step 2: Generating AI content with enriched data...");const z={listingName:t.title||"",address:`${((g=t.location)==null?void 0:g.city)||""}, ${((M=t.location)==null?void 0:M.state)||""}`,neighborhood:T,typeOfSpace:((U=(W=t.features)==null?void 0:W.typeOfSpace)==null?void 0:U.label)||"",bedrooms:((Q=t.features)==null?void 0:Q.bedrooms)??0,beds:((Y=t.features)==null?void 0:Y.bedrooms)??0,bathrooms:((ie=t.features)==null?void 0:ie.bathrooms)??0,kitchenType:((V=($=t.features)==null?void 0:$.kitchenType)==null?void 0:V.display)||"",amenitiesInsideUnit:w.inUnit,amenitiesOutsideUnit:w.building};x.debug("ðŸ¤– Generating AI content with enriched data:",z),h(m=>({...m,description:"loading"}));try{const m=await Ue(z);m&&(k.description=m,await i({Description:m})),h(A=>({...A,description:"complete"}))}catch(m){x.error("âŒ Error generating description:",m),h(A=>({...A,description:"complete"}))}h(m=>({...m,name:"loading"}));try{const m=await qe(z);m&&(k.name=m,await i({Name:m})),h(A=>({...A,name:"complete"}))}catch(m){x.error("âŒ Error generating name:",m),h(A=>({...A,name:"complete"}))}x.debug("âœ… AI Import Assistant generation complete:",k),p(k),L(!0)}catch(z){x.error("âŒ AI generation error:",z)}finally{l(!1)}},[t,i]);return{showAIImportAssistant:d,aiGenerationStatus:n,isAIGenerating:y,isAIComplete:f,aiGeneratedData:R,highlightedFields:b,handleAIAssistant:_,handleCloseAIImportAssistant:N,handleAIImportComplete:v,handleStartAIGeneration:D}}function ct(){var G;const i=o.useCallback(()=>{const g=new URLSearchParams(window.location.search);return g.get("id")||g.get("listing_id")},[])(),a=it(),s=ot(i),c=rt(s.listing,s.setListing,g=>s.fetchListing(g),i),d=lt(s.listing,s.updateListing,s.setListing,g=>s.fetchListing(g),i),[r,n]=o.useState("manage"),[h,y]=o.useState(null),[l,f]=o.useState(null),[L,R]=o.useState(!1),[p,b]=o.useState(!1),[S,_]=o.useState(!1),N=o.useCallback(g=>{switch(n(g),g){case"preview":s.listing&&window.open(`/preview-split-lease.html?id=${s.listing.id}`,"_blank");break}},[s.listing]),v=o.useCallback(async()=>{var M,W,U,Q;if(!((M=s.listing)!=null&&M.id)){(W=window.showToast)==null||W.call(window,{title:"Error",content:"No listing ID available",type:"error"});return}const g=`${window.location.origin}/view-split-lease/${s.listing.id}`;try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(g);else{const Y=document.createElement("textarea");Y.value=g,Y.style.position="fixed",Y.style.left="-9999px",document.body.appendChild(Y),Y.select(),document.execCommand("copy"),document.body.removeChild(Y)}(U=window.showToast)==null||U.call(window,{title:"Link Copied!",content:"Listing link has been copied to your clipboard",type:"success"})}catch(Y){x.error("Failed to copy link:",Y),(Q=window.showToast)==null||Q.call(window,{title:"Copy Failed",content:"Unable to copy link to clipboard",type:"error"})}},[(G=s.listing)==null?void 0:G.id]),D=o.useCallback(g=>{switch(g){case"preview":s.listing&&window.open(`/preview-split-lease.html?id=${s.listing.id}`,"_blank");break;case"copy-link":v();break;case"proposals":s.listing&&(window.location.href=`/host-proposals?listingId=${s.listing.id}`);break;case"meetings":n("virtual-meetings");break;case"manage":n("manage");break;case"leases":n("leases");break}},[s.listing,v]),k=o.useCallback(()=>{window.location.href="/host-dashboard"},[]),w=o.useCallback(g=>{s.setListing(M=>({...M,description:g}))},[s.setListing]),T=o.useCallback(async g=>{if(!i){x.error("âŒ No listing ID found for cancellation policy update");return}try{await s.updateListing({"Cancellation Policy":g}),s.setListing(M=>({...M,cancellationPolicy:g,"Cancellation Policy":g})),x.debug("âœ… Cancellation policy saved successfully")}catch(M){x.error("âŒ Failed to save cancellation policy:",M)}},[i,s]),H=o.useCallback(async g=>{if(!i){x.error("âŒ No listing ID found for cancellation restrictions update");return}try{await s.updateListing({"Cancellation Policy - Additional Restrictions":g}),s.setListing(M=>({...M,cancellationPolicyAdditionalRestrictions:g,"Cancellation Policy - Additional Restrictions":g})),x.debug("âœ… Cancellation restrictions saved successfully")}catch(M){x.error("âŒ Failed to save cancellation restrictions:",M)}},[i,s]),K=o.useCallback(()=>{R(!0)},[]),te=o.useCallback(()=>{R(!1)},[]),Z=o.useCallback(g=>{g&&s.setExistingCohostRequest({_id:g.requestId||g._id,status:"pending",createdAt:g.createdAt||new Date().toISOString(),...g})},[s]),P=o.useCallback(()=>{b(!0)},[]),X=o.useCallback(()=>{b(!1)},[]),u=o.useCallback(async g=>{var M,W;_(!0);try{x.debug("ðŸ“¥ Submitting import reviews request:",g);const U=await fetch("https://qcfifybkaddcoimjroca.supabase.co/functions/v1/slack",{method:"POST",headers:{"Content-Type":"application/json",apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFjZmlmeWJrYWRkY29pbWpyb2NhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0NzU0MDUsImV4cCI6MjA3NTA1MTQwNX0.glGwHxds0PzVLF1Y8VBGX0jYz3zrLsgE9KAWWwkYms8"},body:JSON.stringify({action:"faq_inquiry",payload:{name:((M=a.currentUser)==null?void 0:M.firstName)||((W=a.currentUser)==null?void 0:W.name)||"Host",email:g.emailAddress,inquiry:`ðŸ“¥ **Import Reviews Request**

**Listing ID:** ${g.listingId||"N/A"}
**Reviews URL:** ${g.reviewsUrl}
**Requested by:** ${g.emailAddress}

Please import reviews from the above URL for this listing.`}})});if(!U.ok){const Q=await U.json();throw new Error(Q.error||"Failed to submit request")}x.debug("âœ… Import reviews request submitted successfully"),alert("Your request has been submitted! Our team will import your reviews within 24-48 hours."),b(!1)}catch(U){x.error("âŒ Error submitting import reviews request:",U),alert("Failed to submit request. Please try again later.")}finally{_(!1)}},[a.currentUser]),C=o.useCallback((g,M=null)=>{y(g),f(M)},[]),E=o.useCallback(()=>{y(null),f(null),i&&s.fetchListing(!0)},[i,s]),I=o.useCallback(g=>{g&&typeof g=="object"&&s.setListing(M=>{if(!M)return M;const W={...M};return g.Name!==void 0&&(W.title=g.Name,W.Name=g.Name),g.Description!==void 0&&(W.description=g.Description,W.Description=g.Description),g["Description - Neighborhood"]!==void 0&&(W.descriptionNeighborhood=g["Description - Neighborhood"],W["Description - Neighborhood"]=g["Description - Neighborhood"]),W})},[s]),F=o.useCallback(async(g,M)=>{var W,U,Q;if(!i){(W=window.showToast)==null||W.call(window,{title:"Error",content:"No listing ID available",type:"error"});return}try{const ie={checkInTime:"NEW Date Check-in Time",checkOutTime:"NEW Date Check-out Time",earliestAvailableDate:" First Available",leaseTermMin:"Minimum Weeks",leaseTermMax:"Maximum Weeks"}[g];if(!ie){x.error("Unknown availability field:",g);return}await s.updateListing({[ie]:M}),s.setListing($=>({...$,[g]:M})),(U=window.showToast)==null||U.call(window,{title:"Changes Saved",content:"Availability settings updated successfully",type:"success"})}catch(Y){x.error("Failed to save availability field:",Y),(Q=window.showToast)==null||Q.call(window,{title:"Save Failed",content:"Could not save changes. Please try again.",type:"error"})}},[i,s]),B=o.useCallback(async g=>{if(!i){x.error("âŒ No listing ID found for blocked dates update");return}try{await s.updateListing({"Dates - Blocked":JSON.stringify(g)}),s.setListing(M=>({...M,blockedDates:g})),x.debug("âœ… Blocked dates saved successfully")}catch(M){x.error("âŒ Failed to save blocked dates:",M)}},[i,s]);return{authState:a.authState,currentUser:a.currentUser,listing:s.listing,counts:s.counts,isLoading:s.isLoading,error:s.error,existingCohostRequest:s.existingCohostRequest,handleSetCoverPhoto:c.handleSetCoverPhoto,handleDeletePhoto:c.handleDeletePhoto,handleReorderPhotos:c.handleReorderPhotos,showAIImportAssistant:d.showAIImportAssistant,aiGenerationStatus:d.aiGenerationStatus,isAIGenerating:d.isAIGenerating,isAIComplete:d.isAIComplete,aiGeneratedData:d.aiGeneratedData,highlightedFields:d.highlightedFields,handleAIAssistant:d.handleAIAssistant,handleCloseAIImportAssistant:d.handleCloseAIImportAssistant,handleAIImportComplete:d.handleAIImportComplete,handleStartAIGeneration:d.handleStartAIGeneration,activeTab:r,editSection:h,editFocusField:l,showScheduleCohost:L,showImportReviews:p,isImportingReviews:S,handleTabChange:N,handleCardClick:D,handleBackClick:k,handleDescriptionChange:w,handleCancellationPolicyChange:T,handleCancellationRestrictionsChange:H,handleCopyLink:v,handleScheduleCohost:K,handleCloseScheduleCohost:te,handleCohostRequestSubmitted:Z,handleImportReviews:P,handleCloseImportReviews:X,handleSubmitImportReviews:u,handleEditSection:C,handleCloseEdit:E,handleSaveEdit:I,handleAvailabilityChange:F,handleBlockedDatesChange:B,updateListing:s.updateListing}}const Se=o.createContext(null);function dt({children:t}){const i=ct();return e.jsx(Se.Provider,{value:i,children:t})}function ee(){const t=o.useContext(Se);if(!t)throw new Error("useListingDashboard must be used within ListingDashboardProvider");return t}const ht=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"8",x2:"21",y1:"6",y2:"6"}),e.jsx("line",{x1:"8",x2:"21",y1:"12",y2:"12"}),e.jsx("line",{x1:"8",x2:"21",y1:"18",y2:"18"}),e.jsx("line",{x1:"3",x2:"3.01",y1:"6",y2:"6"}),e.jsx("line",{x1:"3",x2:"3.01",y1:"12",y2:"12"}),e.jsx("line",{x1:"3",x2:"3.01",y1:"18",y2:"18"})]}),ut=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",x2:"8",y1:"13",y2:"13"}),e.jsx("line",{x1:"16",x2:"8",y1:"17",y2:"17"}),e.jsx("line",{x1:"10",x2:"8",y1:"9",y2:"9"})]}),mt=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),e.jsx("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),e.jsx("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),pt=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"m9 15 2 2 4-4"})]}),gt=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),e.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),e.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),e.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),e.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]});function xt({onInviteClick:t}){const{activeTab:i,counts:a,listing:s,handleTabChange:c}=ee(),d=h=>{h==="all-listings"?window.location.href="/host-overview":h==="proposals"?window.location.href=`/host-proposals?listingId=${s.id}`:c(h)},n=[{id:"all-listings",label:"All My Listings",icon:e.jsx(ht,{}),visible:!0},{id:"proposals",label:"Proposals",icon:e.jsx(ut,{}),badge:a.proposals,visible:a.proposals>0},{id:"virtual-meetings",label:"Virtual Meetings",icon:e.jsx(mt,{}),badge:a.virtualMeetings,visible:a.virtualMeetings>0},{id:"leases",label:"Leases",icon:e.jsx(pt,{}),badge:a.leases,visible:a.leases>0}].filter(h=>h.visible);return e.jsx("div",{className:"listing-dashboard-nav",children:e.jsxs("div",{className:"listing-dashboard-nav__tabs-row",children:[e.jsx("div",{className:"listing-dashboard-nav__tabs",children:n.map(h=>e.jsxs("button",{onClick:()=>d(h.id),className:`listing-dashboard-nav__tab ${i===h.id?"listing-dashboard-nav__tab--active":""}`,children:[h.icon,e.jsx("span",{children:h.label}),h.badge!==void 0&&h.badge>0&&e.jsx("span",{className:"listing-dashboard-nav__badge",children:h.badge})]},h.id))}),t&&e.jsxs("button",{className:"listing-dashboard-nav__invite-btn",onClick:t,children:[e.jsx(gt,{}),e.jsx("span",{children:"Give $50, Get $50"})]})]})})}function yt({icon:t,label:i,onClick:a,badge:s}){return e.jsxs("button",{onClick:a,className:"listing-dashboard-action-card",children:[s&&e.jsx("span",{className:"listing-dashboard-action-card__badge"}),e.jsx("div",{className:"listing-dashboard-action-card__icon",children:t}),e.jsx("span",{className:"listing-dashboard-action-card__label",children:i})]})}const ft=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),bt=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),e.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]}),vt=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",x2:"8",y1:"13",y2:"13"}),e.jsx("line",{x1:"16",x2:"8",y1:"17",y2:"17"}),e.jsx("line",{x1:"10",x2:"8",y1:"9",y2:"9"})]}),jt=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),e.jsx("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),e.jsx("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),wt=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"m9 15 2 2 4-4"})]});function kt(){const{counts:t,handleCardClick:i}=ee(),s=[{id:"preview",icon:e.jsx(ft,{}),label:"Preview Listing",visible:!0},{id:"copy-link",icon:e.jsx(bt,{}),label:"Copy Listing Link",visible:!0},{id:"proposals",icon:e.jsx(vt,{}),label:"Proposals",badge:t.proposals>0,visible:t.proposals>0},{id:"meetings",icon:e.jsx(jt,{}),label:"Virtual Meetings",badge:t.virtualMeetings>0,visible:t.virtualMeetings>0},{id:"leases",icon:e.jsx(wt,{}),label:"Leases",badge:t.leases>0,visible:t.leases>0}].filter(d=>d.visible),c=d=>{i&&i(d)};return e.jsx("div",{className:"listing-dashboard-action-grid",children:s.map(d=>e.jsx(yt,{icon:d.icon,label:d.label,onClick:()=>c(d.id),badge:d.badge},d.id))})}const _t=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M12 16v-4"}),e.jsx("path",{d:"M12 8h.01"})]}),Nt=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Ct=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"m9 18 6-6-6-6"})});function St(){const{existingCohostRequest:t,handleScheduleCohost:i}=ee(),a=!!t,s=(t==null?void 0:t["Status - Co-Host Request"])||(t==null?void 0:t.status);return e.jsxs("button",{className:`listing-dashboard-alert listing-dashboard-alert--clickable ${a?"listing-dashboard-alert--has-request":""}`,onClick:i,type:"button",children:[e.jsx("div",{className:"listing-dashboard-alert__icon",children:a?e.jsx(Nt,{}):e.jsx(_t,{})}),e.jsx("div",{className:"listing-dashboard-alert__content",children:a?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"listing-dashboard-alert__text",children:"Co-Host Request Submitted"}),e.jsxs("span",{className:"listing-dashboard-alert__subtext",children:["Status: ",s==="pending"?"Pending assignment":s," â€” Click to view details"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"listing-dashboard-alert__text",children:"Need help setting up? Ask a Specialist Co-host!"}),e.jsx("span",{className:"listing-dashboard-alert__subtext",children:"Our specialists can help you optimize your listing and attract more quality tenants."})]})}),e.jsx("div",{className:"listing-dashboard-alert__chevron",children:e.jsx(Ct,{})})]})}const At=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"}),e.jsx("path",{d:"M5 3v4"}),e.jsx("path",{d:"M19 17v4"}),e.jsx("path",{d:"M3 5h4"}),e.jsx("path",{d:"M17 19h4"})]}),It=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"m6 9 6 6 6-6"})}),Dt=[{id:"property-info",label:"Property Info"},{id:"description",label:"Description"},{id:"amenities",label:"Amenities"},{id:"details",label:"Details"},{id:"pricing",label:"Pricing & Lease Style"},{id:"rules",label:"Rules"},{id:"availability",label:"Availability"},{id:"photos",label:"Photos"},{id:"cancellation-policy",label:"Cancellation Policy"}];function Mt(){const{handleAIAssistant:t}=ee(),[i,a]=o.useState(!1),s=o.useRef(null),c=d=>{a(!1);const r=document.getElementById(d);if(r){const y=r.getBoundingClientRect().top+window.pageYOffset-80;window.scrollTo({top:y,behavior:"smooth"})}};return o.useEffect(()=>{const d=r=>{s.current&&!s.current.contains(r.target)&&a(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]),e.jsxs("div",{className:"listing-dashboard-secondary",children:[e.jsxs("button",{onClick:t,className:"listing-dashboard-secondary__ai-btn",children:[e.jsx(At,{}),e.jsx("span",{children:"AI Import Assistant"})]}),e.jsxs("div",{className:"listing-dashboard-secondary__dropdown",ref:s,children:[e.jsxs("button",{className:"listing-dashboard-secondary__dropdown-btn",onClick:()=>a(!i),children:[e.jsx("span",{children:"Choose a Section"}),e.jsx(It,{})]}),i&&e.jsx("div",{className:"listing-dashboard-secondary__dropdown-menu",children:Dt.map(d=>e.jsx("button",{className:"listing-dashboard-secondary__dropdown-item",onClick:()=>c(d.id),children:d.label},d.id))})]})]})}const Rt=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),Ft=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("path",{d:"M12 17h.01"})]}),Pt=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})});function Lt(t){const{isOnline:i,isApproved:a,isComplete:s}=t;return i&&a&&s?{title:"Listing is Live",content:"Your listing is approved and visible to guests. People can now find and book your space on Split Lease.",expandedContent:null}:!a&&s&&!i?{title:"Under Review",content:"Your listing is being reviewed by the Split Lease team. This typically takes 24-48 hours.",expandedContent:"Our team reviews each listing to ensure quality and safety standards are met. You'll receive an email notification once your listing is approved and ready to go live. If we need any additional information, we'll reach out via email."}:s?a&&!i?{title:"Listing Paused",content:"Your listing has been approved but is currently offline. You can reactivate it anytime to make it visible to guests again.",expandedContent:null}:{title:"Listing Status",content:"Your listing is currently offline. Contact support if you need help getting your listing approved.",expandedContent:null}:{title:"Listing Incomplete",content:"Your listing is missing required information. Complete all sections to submit for review.",expandedContent:"To make your listing visible to guests, please fill out all required fields including photos, pricing, availability, and property details. Once complete, your listing will be submitted for review."}}function Tt(t){const i={year:"numeric",month:"long",day:"numeric"};return new Date(t).toLocaleDateString("en-US",i)}function Et(){const{listing:t,counts:i,handleImportReviews:a,handleEditSection:s}=ee(),[c,d]=o.useState(!1),r=o.useRef(null),n=Lt(t);return e.jsxs("div",{id:"property-info",className:"listing-dashboard-property",children:[e.jsxs("div",{className:"listing-dashboard-property__header",children:[e.jsx("h2",{className:"listing-dashboard-property__listing-name",children:t.title||"Untitled Listing"}),e.jsx("button",{className:"listing-dashboard-section__edit",onClick:()=>s("name"),children:"edit"})]}),e.jsxs("button",{className:"listing-dashboard-property__import-btn",onClick:a,children:[e.jsx(Rt,{}),e.jsx("span",{children:"Import reviews from other sites"})]}),e.jsxs("div",{className:"listing-dashboard-property__details",children:[e.jsxs("p",{className:"listing-dashboard-property__address",children:[e.jsx("span",{className:"listing-dashboard-property__address-text",children:t.location.address})," - ",e.jsx("span",{className:"listing-dashboard-property__hood",children:t.location.hoodsDisplay})]}),e.jsxs("p",{className:"listing-dashboard-property__status",children:[e.jsx("span",{className:"listing-dashboard-property__status-label",children:"Status:"}),t.isOnline?e.jsx("span",{className:"listing-dashboard-property__status-value listing-dashboard-property__status-value--online",children:"Listing is online"}):e.jsxs("button",{ref:r,className:"listing-dashboard-property__status-trigger",onClick:()=>d(!0),type:"button",children:[e.jsx("span",{className:"listing-dashboard-property__status-value listing-dashboard-property__status-value--offline",children:"Listing is offline"}),e.jsx(Ft,{})]})]}),e.jsxs("p",{className:"listing-dashboard-property__active-since",children:["Listing has been active since"," ",e.jsx("span",{className:"listing-dashboard-property__date",children:Tt(t.activeSince)})]})]}),i.reviews>0&&e.jsx("div",{className:"listing-dashboard-property__reviews",children:e.jsxs("button",{className:"listing-dashboard-property__reviews-btn",onClick:a,children:[e.jsx(Pt,{}),e.jsxs("span",{children:["Show my reviews (",i.reviews,")"]})]})}),e.jsx(Ne,{isOpen:c,onClose:()=>d(!1),triggerRef:r,title:n.title,content:n.content,expandedContent:n.expandedContent,showMoreAvailable:!!n.expandedContent})]})}const Bt=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M2 4v16"}),e.jsx("path",{d:"M2 8h18a2 2 0 0 1 2 2v10"}),e.jsx("path",{d:"M2 17h20"}),e.jsx("path",{d:"M6 8v9"})]}),Wt=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 6 6.5 3.5a1.5 1.5 0 0 0-1-.5C4.683 3 4 3.683 4 4.5V17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5"}),e.jsx("line",{x1:"10",x2:"8",y1:"5",y2:"7"}),e.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),e.jsx("line",{x1:"7",x2:"7",y1:"19",y2:"21"}),e.jsx("line",{x1:"17",x2:"17",y1:"19",y2:"21"})]}),Ot=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}),e.jsx("path",{d:"M3 9h18"}),e.jsx("path",{d:"M9 21V9"})]}),Ht=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}),e.jsx("path",{d:"M12 3v18"}),e.jsx("path",{d:"M3 12h4"}),e.jsx("path",{d:"M17 12h4"})]}),$t=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"18.5",cy:"17.5",r:"3.5"}),e.jsx("circle",{cx:"5.5",cy:"17.5",r:"3.5"}),e.jsx("circle",{cx:"15",cy:"5",r:"1"}),e.jsx("path",{d:"M12 17.5V14l-3-3 4-3 2 3h2"})]}),Ut=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 11v3a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1v-3"}),e.jsx("path",{d:"M12 19H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-3.83"}),e.jsx("path",{d:"m3 11 7.77-6.04a2 2 0 0 1 2.46 0L21 11H3Z"})]}),qt={"Smoke Detector":e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("circle",{cx:"12",cy:"12",r:"4"}),e.jsx("path",{d:"M12 2v2"}),e.jsx("path",{d:"M12 20v2"}),e.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),e.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),e.jsx("path",{d:"M2 12h2"}),e.jsx("path",{d:"M20 12h2"}),e.jsx("path",{d:"m6.34 17.66-1.41 1.41"}),e.jsx("path",{d:"m19.07 4.93-1.41 1.41"})]}),"Carbon Monoxide Detector":e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),e.jsx("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"})]}),"First Aid Kit":e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M8 2v4"}),e.jsx("path",{d:"M16 2v4"}),e.jsx("rect",{width:"18",height:"14",x:"3",y:"6",rx:"2"}),e.jsx("path",{d:"M12 10v6"}),e.jsx("path",{d:"M9 13h6"})]}),"Fire Sprinklers":e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z"})}),"Lock on Bedroom Door":e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),"Fire Extinguisher":e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M15 6.5V3a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v3.5"}),e.jsx("path",{d:"M9 18h6"}),e.jsx("path",{d:"M18 3h-3"}),e.jsx("path",{d:"M11 3.5V6"}),e.jsx("rect",{width:"10",height:"12",x:"7",y:"6",rx:"2"})]})},Gt=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"m9 12 2 2 4-4"})]}),Yt=({onClick:t})=>e.jsxs("button",{type:"button",className:"listing-dashboard-details__empty-tag",onClick:t,children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M8 12h8"}),e.jsx("path",{d:"M12 8v8"})]}),e.jsx("span",{children:"No safety features selected"})]});function zt(){var d,r,n,h;const{listing:t,handleEditSection:i}=ee(),a=(t==null?void 0:t.features)||{},s=(t==null?void 0:t.safetyFeatures)||[],c=y=>qt[y]||e.jsx(Gt,{});return e.jsxs("div",{id:"details",className:"listing-dashboard-section",children:[e.jsxs("div",{className:"listing-dashboard-section__header",children:[e.jsx("h2",{className:"listing-dashboard-section__title",children:"Details"}),e.jsx("button",{className:"listing-dashboard-section__edit",onClick:()=>i("details"),children:"edit"})]}),e.jsxs("div",{className:"listing-dashboard-details",children:[e.jsxs("div",{className:"listing-dashboard-details__specs",children:[e.jsx("div",{className:"listing-dashboard-details__type",children:e.jsxs("span",{children:["Type of Space: ",((d=a.typeOfSpace)==null?void 0:d.label)||"N/A"]})}),e.jsxs("div",{className:"listing-dashboard-details__counts",children:[e.jsxs("div",{className:"listing-dashboard-details__count-item",children:[e.jsx(Bt,{}),e.jsxs("span",{children:[a.bedrooms||0," bedrooms"]})]}),e.jsxs("div",{className:"listing-dashboard-details__count-item",children:[e.jsx(Wt,{}),e.jsxs("span",{children:[a.bathrooms||0," bathrooms"]})]}),e.jsxs("div",{className:"listing-dashboard-details__count-item",children:[e.jsx(Ot,{}),e.jsxs("span",{children:[a.squareFootage||0," sq.ft."]})]})]}),e.jsxs("div",{className:"listing-dashboard-details__features-row",children:[e.jsxs("div",{className:"listing-dashboard-details__feature-item",children:[e.jsx(Ht,{}),e.jsx("span",{children:((r=a.storageType)==null?void 0:r.label)||"No storage"})]}),e.jsxs("div",{className:"listing-dashboard-details__feature-item",children:[e.jsx($t,{}),e.jsx("span",{children:((n=a.parkingType)==null?void 0:n.label)||"No parking"})]}),e.jsxs("div",{className:"listing-dashboard-details__feature-item",children:[e.jsx(Ut,{}),e.jsx("span",{children:((h=a.kitchenType)==null?void 0:h.display)||"No kitchen"})]})]})]}),e.jsxs("div",{className:"listing-dashboard-details__safety",children:[e.jsx("h3",{className:"listing-dashboard-details__subtitle",children:"Safety Features"}),s.length>0?e.jsx("div",{className:"listing-dashboard-details__safety-grid",children:s.map(y=>e.jsxs("div",{className:"listing-dashboard-details__safety-item",children:[e.jsx("span",{className:"listing-dashboard-details__safety-icon",children:c(y.name)}),e.jsx("span",{children:y.name})]},y.id))}):e.jsx(Yt,{onClick:()=>i("details")})]})]})]})}const Qt=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"m9 12 2 2 4-4"})]}),je=({icon:t,name:i})=>t?e.jsx("img",{src:t,alt:i,width:"20",height:"20",className:"listing-dashboard-amenities__icon-img"}):e.jsx(Qt,{}),we=({onClick:t})=>e.jsxs("button",{type:"button",className:"listing-dashboard-amenities__empty-tag",onClick:t,children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M8 12h8"}),e.jsx("path",{d:"M12 8v8"})]}),e.jsx("span",{children:"No amenities selected"})]});function Vt(){const{listing:t,handleEditSection:i}=ee(),a=(t==null?void 0:t.inUnitAmenities)||[],s=(t==null?void 0:t.buildingAmenities)||[],c=a.length>0,d=s.length>0;return e.jsxs("div",{id:"amenities",className:"listing-dashboard-section",children:[e.jsxs("div",{className:"listing-dashboard-section__header",children:[e.jsx("h2",{className:"listing-dashboard-section__title",children:"Amenities"}),e.jsx("button",{className:"listing-dashboard-section__edit",onClick:()=>i("amenities"),children:"edit"})]}),e.jsxs("div",{className:"listing-dashboard-amenities",children:[e.jsxs("div",{className:"listing-dashboard-amenities__group",children:[e.jsx("h3",{className:"listing-dashboard-amenities__group-title",children:"In-unit"}),c?e.jsx("div",{className:"listing-dashboard-amenities__grid",children:a.map(r=>e.jsxs("div",{className:"listing-dashboard-amenities__item",children:[e.jsx("span",{className:"listing-dashboard-amenities__icon",children:e.jsx(je,{icon:r.icon,name:r.name})}),e.jsx("span",{className:"listing-dashboard-amenities__name",children:r.name})]},r.id))}):e.jsx(we,{onClick:()=>i("amenities")})]}),e.jsxs("div",{className:"listing-dashboard-amenities__group",children:[e.jsx("h3",{className:"listing-dashboard-amenities__group-title",children:"Building / Neighborhood"}),d?e.jsx("div",{className:"listing-dashboard-amenities__grid",children:s.map(r=>e.jsxs("div",{className:"listing-dashboard-amenities__item",children:[e.jsx("span",{className:"listing-dashboard-amenities__icon",children:e.jsx(je,{icon:r.icon,name:r.name})}),e.jsx("span",{className:"listing-dashboard-amenities__name",children:r.name})]},r.id))}):e.jsx(we,{onClick:()=>i("amenities","building")})]})]})]})}function Jt(){const{listing:t,handleEditSection:i}=ee();return e.jsxs("div",{id:"description",className:"listing-dashboard-descriptions",children:[e.jsxs("div",{className:"listing-dashboard-section",children:[e.jsxs("div",{className:"listing-dashboard-section__header",children:[e.jsx("h2",{className:"listing-dashboard-section__title",children:"Description of Lodging"}),e.jsx("button",{className:"listing-dashboard-section__edit",onClick:()=>i("description"),children:"edit"})]}),e.jsx("div",{className:"listing-dashboard-section__content",children:e.jsx("p",{className:"listing-dashboard-description__text",children:(t==null?void 0:t.description)||"No description provided."})})]}),e.jsxs("div",{className:"listing-dashboard-section",children:[e.jsxs("div",{className:"listing-dashboard-section__header",children:[e.jsx("h2",{className:"listing-dashboard-section__title",children:"Neighborhood Description"}),e.jsx("button",{className:"listing-dashboard-section__edit",onClick:()=>i("neighborhood"),children:"edit"})]}),e.jsx("div",{className:"listing-dashboard-section__content",children:e.jsx("p",{className:"listing-dashboard-description__text",children:(t==null?void 0:t.descriptionNeighborhood)||"No neighborhood description provided."})})]})]})}function Kt({weeklyCompensation:t={},nightsPerWeekMin:i=2,nightsPerWeekMax:a=7}){const s=r=>{const n=t[r]||0;return Math.round(n/r)},c=[];for(let r=i;r<=a;r++)c.push(r);const d=r=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(r);return e.jsxs("div",{className:"ld-nightly-legend",children:[e.jsx("div",{className:"ld-nightly-legend__header",children:"Weekly Total by Occupancy"}),e.jsx("div",{className:"ld-nightly-legend__palette-container",children:e.jsx("div",{className:"ld-nightly-legend__palette-row",children:c.map((r,n)=>{const h=t[r]||0,y=s(r),l=n+1;return e.jsxs("div",{className:`ld-nightly-legend__swatch ld-nightly-legend__swatch--n${l}`,children:[e.jsxs("span",{className:"ld-nightly-legend__swatch-nights",children:[r," nights"]}),e.jsx("span",{className:"ld-nightly-legend__swatch-total",children:d(h)}),e.jsxs("span",{className:"ld-nightly-legend__swatch-rate",children:[d(y),"/nt"]})]},r)})})}),e.jsx("div",{className:"ld-nightly-legend__hint",children:"Weekly total based on selected number of nights"})]})}const Zt={1:"1 week on, 1 week off",2:"2 weeks on, 2 weeks off",3:"1 week on, 3 weeks off",custom:"Custom pattern"};function Xt(){const{listing:t,handleEditSection:i}=ee(),a=(t==null?void 0:t.weeklyCompensation)||{},s=(t==null?void 0:t.nightsAvailable)||[],c=((t==null?void 0:t.leaseStyle)||"Nightly").toLowerCase()==="nightly",d=((t==null?void 0:t.leaseStyle)||"").toLowerCase()==="monthly",r=((t==null?void 0:t.leaseStyle)||"").toLowerCase()==="weekly",n=h=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(h);return e.jsxs("div",{id:"pricing",className:"listing-dashboard-section",children:[e.jsxs("div",{className:"listing-dashboard-section__header",children:[e.jsx("h2",{className:"listing-dashboard-section__title",children:"Pricing and Lease Style"}),e.jsx("button",{className:"listing-dashboard-section__edit",onClick:()=>i("pricing"),children:"edit"})]}),e.jsxs("div",{className:"listing-dashboard-pricing",children:[e.jsxs("div",{className:"listing-dashboard-pricing__left",children:[e.jsxs("div",{className:"listing-dashboard-pricing__info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Selected Lease Style:"})," ",(t==null?void 0:t.leaseStyle)||"Nightly"]}),r&&(t==null?void 0:t.weeksOffered)&&e.jsxs("p",{children:[e.jsx("strong",{children:"Weekly Pattern:"})," ",Zt[t.weeksOffered]||t.weeksOffered]})]}),c&&e.jsxs("div",{className:"listing-dashboard-pricing__days",children:[e.jsx("p",{className:"listing-dashboard-pricing__days-label",children:"Nights / Week"}),e.jsx(Ce,{listing:{nightsAvailable:s},selectedNights:s,isClickable:!1,mode:"preview"}),e.jsxs("div",{className:"listing-dashboard-pricing__legend",children:[e.jsx("span",{className:"listing-dashboard-pricing__legend-dot listing-dashboard-pricing__legend-dot--available"}),e.jsx("span",{children:s.length===7?"All nights available":`${s.length} nights available`})]})]})]}),e.jsxs("div",{className:"listing-dashboard-pricing__right",children:[d?e.jsxs("div",{className:"listing-dashboard-pricing__monthly-rate",children:[e.jsx("p",{className:"listing-dashboard-pricing__monthly-rate-label",children:"Monthly Host Rate"}),e.jsxs("p",{className:"listing-dashboard-pricing__monthly-rate-value",children:[n((t==null?void 0:t.monthlyHostRate)||0),e.jsx("span",{className:"listing-dashboard-pricing__monthly-rate-period",children:"/month"})]})]}):r?e.jsxs("div",{className:"listing-dashboard-pricing__weekly-rate",children:[e.jsx("p",{className:"listing-dashboard-pricing__weekly-rate-label",children:"Weekly Host Rate"}),e.jsxs("p",{className:"listing-dashboard-pricing__weekly-rate-value",children:[n((t==null?void 0:t.weeklyHostRate)||0),e.jsx("span",{className:"listing-dashboard-pricing__weekly-rate-period",children:"/week"})]})]}):c?e.jsx(Kt,{weeklyCompensation:a,nightsPerWeekMin:(t==null?void 0:t.nightsPerWeekMin)||2,nightsPerWeekMax:(t==null?void 0:t.nightsPerWeekMax)||7}):null,e.jsxs("div",{className:"listing-dashboard-pricing__fees",children:[e.jsx("p",{children:e.jsx("strong",{children:"Additional Charges"})}),e.jsxs("p",{children:["Damage Deposit: ",n((t==null?void 0:t.damageDeposit)||0)]}),e.jsxs("p",{children:["Maintenance Fee: ",n((t==null?void 0:t.maintenanceFee)||0)]})]})]})]}),e.jsx("div",{className:"listing-dashboard-section__footer",children:e.jsxs("button",{className:"listing-dashboard-section__edit-bottom",onClick:()=>i("pricing"),children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Edit Pricing & Lease Style"]})})]})}const es=[{id:"nightly",title:"Nightly",description:"Rent your space by the night. Best for hosts who want flexibility and higher potential income through short-term stays.",benefits:["Maximized nightly rates","Flexible calendar management"]},{id:"weekly",title:"Weekly (Split Lease)",description:"Rent your space for specific weeks (e.g., Week 1 & 3 of every month). Best for hosts who use their space regularly but want to monetize it when away.",benefits:["Consistent schedule","Predictable income from recurring guests"]},{id:"monthly",title:"Monthly (Sublet)",description:"Standard month-to-month lease (e.g., continuous stay from August to December). Best for hosts who want steady occupancy with minimal management.",benefits:["Continuous occupancy with stable income","Set your monthly rate"]}],ts=_e.memo(function({activeStyle:i,onSelect:a,disabled:s=!1}){return e.jsxs("div",{className:"pricing-edit__styles",children:[e.jsx("h3",{className:"pricing-edit__subtitle",children:"Select your Lease Style"}),e.jsx("div",{className:"pricing-edit__style-grid",children:es.map(c=>e.jsxs("div",{className:`pricing-edit__style-card ${i===c.id?"pricing-edit__style-card--active":""} ${s?"pricing-edit__style-card--disabled":""}`,onClick:()=>!s&&a(c.id),role:"button",tabIndex:s?-1:0,onKeyDown:d=>{!s&&(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),a(c.id))},"aria-pressed":i===c.id,"aria-disabled":s,children:[e.jsxs("div",{className:"pricing-edit__style-header",children:[e.jsx("div",{className:"pricing-edit__style-radio",children:i===c.id&&e.jsx("div",{className:"pricing-edit__style-radio-inner"})}),e.jsx("h4",{className:"pricing-edit__style-title",children:c.title})]}),e.jsx("p",{className:"pricing-edit__style-description",children:c.description}),e.jsx("ul",{className:"pricing-edit__style-benefits",children:c.benefits.map((d,r)=>e.jsxs("li",{className:"pricing-edit__style-benefit",children:[e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),d]},r))})]},c.id))})]})});function ss({selectedNights:t,onNightSelectionChange:i,onSelectAllNights:a,minNights:s,setMinNights:c,maxNights:d,setMaxNights:r,nightlyPricing:n,setNightlyPricing:h,calculateNightlyRate:y,formatCurrency:l,isOwner:f,infoRefs:L,onInfoClick:R}){return e.jsxs("div",{className:"pricing-edit-nightly",children:[e.jsxs("div",{className:"pricing-edit-schedule",children:[e.jsxs("div",{className:"pricing-edit-schedule__header",children:[e.jsx("label",{children:"Select Available Nights"}),e.jsx("button",{className:"pricing-edit-schedule__select-all",onClick:a,disabled:!f,children:"Select All Nights"})]}),e.jsx(Ce,{selectedNights:t,onSelectionChange:i,isClickable:f,mode:"normal"}),e.jsxs("div",{className:"pricing-edit-schedule__legend",children:[e.jsxs("div",{className:"pricing-edit-schedule__legend-item",children:[e.jsx("span",{className:"pricing-edit-schedule__legend-dot pricing-edit-schedule__legend-dot--selected"}),e.jsxs("span",{children:[t.length," Nights Available"]})]}),e.jsxs("div",{className:"pricing-edit-schedule__legend-item",children:[e.jsx("span",{className:"pricing-edit-schedule__legend-dot pricing-edit-schedule__legend-dot--unselected"}),e.jsxs("span",{children:[7-t.length," Nights Not Available"]})]})]})]}),e.jsxs("div",{className:"pricing-edit-nights-range",children:[e.jsxs("label",{children:["Ideal # of Nights Per Week",e.jsx("button",{ref:L.nightsPerWeek,className:"pricing-edit-field__help",onClick:R("nightsPerWeek"),"aria-label":"Learn more about nights per week",children:e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})})]}),e.jsxs("div",{className:"pricing-edit-nights-range__inputs",children:[e.jsx("input",{type:"number",value:s,onChange:p=>c(Number(p.target.value)),min:2,max:6,disabled:!f}),e.jsx("span",{children:"to"}),e.jsx("input",{type:"number",value:d,onChange:p=>r(Number(p.target.value)),min:s,max:7,disabled:!f})]})]}),e.jsxs("div",{className:"pricing-edit-compensation",children:[e.jsx("h3",{children:"Weekly Compensation Rates"}),e.jsx("div",{className:"pricing-edit-compensation__grid",children:[2,3,4,5].map(p=>{var b;return t.length<p?null:e.jsxs("div",{className:"pricing-edit-compensation__item",children:[e.jsxs("label",{children:["Your Compensation / Week @ ",p," nights / week occupancy",e.jsx("button",{ref:(b=L.weeklyComp)==null?void 0:b[p],className:"pricing-edit-field__help",onClick:R(`weeklyComp${p}`),"aria-label":`Learn more about ${p}-night pricing`,children:e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})})]}),e.jsx("input",{type:"number",value:n[p],onChange:S=>h(_=>({..._,[p]:Number(S.target.value)})),placeholder:`$${p*100} (weekly)`,disabled:!f}),e.jsxs("span",{className:"pricing-edit-compensation__rate",children:[l(y(n[p],p)),"/night"]})]},p)})})]})]})}const is=[{value:"",label:"Select a Weekly Pattern"},{value:"1",label:"1 week on, 1 week off"},{value:"2",label:"2 weeks on, 2 weeks off"},{value:"3",label:"1 week on, 3 weeks off"},{value:"custom",label:"Custom pattern"}];function as({weeksOffered:t,setWeeksOffered:i,weeklyRate:a,setWeeklyRate:s,isOwner:c,infoRefs:d,onInfoClick:r}){return e.jsxs("div",{className:"pricing-edit-weekly",children:[e.jsxs("div",{className:"pricing-edit-field",children:[e.jsx("label",{children:"Weeks Offered*"}),e.jsx("select",{value:t,onChange:n=>i(n.target.value),disabled:!c,children:is.map(n=>e.jsx("option",{value:n.value,children:n.label},n.value))})]}),e.jsxs("div",{className:"pricing-edit-field",children:[e.jsxs("label",{children:["Weekly Pricing*",e.jsx("button",{ref:d.weeklyPricing,className:"pricing-edit-field__help",onClick:r("weeklyPricing"),"aria-label":"Learn more about weekly pricing",children:e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})})]}),e.jsx("input",{type:"number",value:a,onChange:n=>s(Number(n.target.value)),placeholder:"Define Weekly Rent",disabled:!c})]})]})}function ns({monthlyRate:t,setMonthlyRate:i,monthlyAgreement:a,setMonthlyAgreement:s,isOwner:c,infoRefs:d,onInfoClick:r}){return e.jsxs("div",{className:"pricing-edit-monthly",children:[e.jsxs("div",{className:"pricing-edit-field",children:[e.jsxs("label",{children:["Monthly Host Compensation*",e.jsx("button",{ref:d.monthlyComp,className:"pricing-edit-field__help",onClick:r("monthlyComp"),"aria-label":"Learn more about monthly compensation",children:e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})})]}),e.jsx("input",{type:"number",value:t,onChange:n=>i(Number(n.target.value)),placeholder:"Define Monthly Rent",min:1e3,max:1e4,disabled:!c}),e.jsx("span",{className:"pricing-edit-field__hint",children:"Please set an amount between $1,000 and $10,000 for your listing"})]}),e.jsxs("div",{className:"pricing-edit-agreement",children:[e.jsxs("div",{className:"pricing-edit-agreement__info",children:[e.jsx("p",{children:"Our Split Lease 'Monthly' model helps guests meet rent obligations through a subsidy. For financial stability, we may need to sublease unused nights. If this isn't ideal, our other models might be more fitting for you, as they don't require this provision."}),e.jsxs("button",{ref:d.monthlyAgreement,className:"pricing-edit-agreement__help",onClick:r("monthlyAgreement"),"aria-label":"Learn more about monthly model agreement",children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),"Learn more"]})]}),e.jsx("div",{className:"pricing-edit-agreement__checkbox",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:a==="agree",onChange:n=>s(n.target.checked?"agree":""),disabled:!c}),e.jsx("span",{children:"I understand and agree to the above provision"})]})})]})]})}function os({listing:t,onClose:i,onSave:a,isOwner:s=!0}){var $,V,z,m,A;const[c,d]=o.useState((t==null?void 0:t.leaseStyle)||"Nightly"),[r,n]=o.useState((t==null?void 0:t.damageDeposit)||500),[h,y]=o.useState((t==null?void 0:t.maintenanceFee)||125),[l,f]=o.useState((t==null?void 0:t.nightsAvailable)||[]),[L,R]=o.useState((t==null?void 0:t.nightsPerWeekMin)||2),[p,b]=o.useState((t==null?void 0:t.nightsPerWeekMax)||7),[S,_]=o.useState({2:(($=t==null?void 0:t.weeklyCompensation)==null?void 0:$[2])||0,3:((V=t==null?void 0:t.weeklyCompensation)==null?void 0:V[3])||0,4:((z=t==null?void 0:t.weeklyCompensation)==null?void 0:z[4])||0,5:((m=t==null?void 0:t.weeklyCompensation)==null?void 0:m[5])||0}),[N,v]=o.useState((t==null?void 0:t.weeksOffered)||""),[D,k]=o.useState((t==null?void 0:t.weeklyHostRate)||0),[w,T]=o.useState((t==null?void 0:t.monthlyHostRate)||0),[H,K]=o.useState(""),[te,Z]=o.useState(!1),[P,X]=o.useState(null),[u,C]=o.useState(!1),E=o.useMemo(()=>{if(c!==((t==null?void 0:t.leaseStyle)||"Nightly")||r!==((t==null?void 0:t.damageDeposit)||500)||h!==((t==null?void 0:t.maintenanceFee)||125))return!0;if(c==="Nightly"){const j=(t==null?void 0:t.nightsAvailable)||[];if(l.length!==j.length||!l.every(ae=>j.includes(ae))||L!==((t==null?void 0:t.nightsPerWeekMin)||2)||p!==((t==null?void 0:t.nightsPerWeekMax)||7))return!0;const O=(t==null?void 0:t.weeklyCompensation)||{};if(S[2]!==(O[2]||0)||S[3]!==(O[3]||0)||S[4]!==(O[4]||0)||S[5]!==(O[5]||0))return!0}return c==="Weekly"&&(D!==((t==null?void 0:t.weeklyHostRate)||0)||N!==((t==null?void 0:t.weeksOffered)||""))||c==="Monthly"&&w!==((t==null?void 0:t.monthlyHostRate)||0)},[c,r,h,l,L,p,S,D,N,w,t]),I={pricingControls:o.useRef(null),damageDeposit:o.useRef(null),maintenanceFee:o.useRef(null),nightsPerWeek:o.useRef(null),weeklyComp:{2:o.useRef(null),3:o.useRef(null),4:o.useRef(null),5:o.useRef(null)},weeklyPricing:o.useRef(null),monthlyComp:o.useRef(null),monthlyAgreement:o.useRef(null)},F={pricingControls:{title:"Pricing Controls",content:"Set your pricing preferences for your listing based on your chosen rental style. Your rates determine how much you earn when guests book."},damageDeposit:{title:"Damage Deposit",content:"A refundable security deposit to cover potential damages during the stay. This protects your property and is returned to the guest if no damage occurs.",expandedContent:"The minimum damage deposit is $500. This amount is held during the stay and refunded within 7 days after checkout, minus any deductions for damages."},maintenanceFee:{title:"Maintenance Fee",content:"A recurring monthly fee to cover cleaning and maintenance costs between guest stays.",expandedContent:"This fee helps ensure your property stays in top condition. It covers regular cleaning, minor repairs, and general upkeep."},nightsPerWeek:{title:"Nights Per Week",content:"Set the minimum and maximum number of nights guests can book per week. This gives you control over your schedule while maximizing occupancy."},weeklyComp2:{title:"2-Night Occupancy",content:"Set the weekly rate you want to receive when guests book 2 nights per week.",expandedContent:"Your nightly rate at 2 nights/week will be calculated by dividing your weekly compensation by 2."},weeklyComp3:{title:"3-Night Occupancy",content:"Set the weekly rate you want to receive when guests book 3 nights per week.",expandedContent:"Your nightly rate at 3 nights/week will be calculated by dividing your weekly compensation by 3."},weeklyComp4:{title:"4-Night Occupancy",content:"Set the weekly rate you want to receive when guests book 4 nights per week.",expandedContent:"Your nightly rate at 4 nights/week will be calculated by dividing your weekly compensation by 4."},weeklyComp5:{title:"5-Night Occupancy",content:"Set the weekly rate you want to receive when guests book 5 nights per week.",expandedContent:"Your nightly rate at 5 nights/week will be calculated by dividing your weekly compensation by 5."},weeklyPricing:{title:"Weekly Rate",content:"Set the weekly rate for your listing. This is the total amount you'll receive for each week a guest stays."},monthlyComp:{title:"Monthly Compensation",content:"Set the monthly rate for your listing. This should be between $1,000 and $10,000.",expandedContent:"Your monthly rate is the total you'll receive each month. Split Lease handles all guest payments and ensures consistent monthly income."},monthlyAgreement:{title:"Monthly Model Agreement",content:"Our Split Lease Monthly model helps guests meet rent obligations through a subsidy. For financial stability, we may need to sublease unused nights.",expandedContent:"If this arrangement isn't ideal for you, consider our Nightly or Weekly models which don't require this provision. These offer more flexibility in how your space is used."}},B=j=>O=>{O.stopPropagation(),X(P===j?null:j)},G=o.useCallback(()=>{console.log("ðŸ”™ Go Back clicked:",{hasChanges:E,onCloseExists:typeof i=="function"}),E?(console.log("ðŸ“‹ Showing confirmation modal"),C(!0)):(console.log("âœ… No changes, calling onClose()"),typeof i=="function"?i():console.error("âŒ onClose is not a function:",i))},[E,i]),g=o.useCallback(j=>{f(j)},[]),M=o.useCallback(()=>{f(["sunday","monday","tuesday","wednesday","thursday","friday","saturday"])},[]),W=(j,O)=>!j||O===0?0:Math.round(j/O),U=o.useCallback(()=>{if(!s||r<500)return!1;switch(c){case"Nightly":return!(l.length<2||l.length>=2&&!S[2]||l.length>=3&&!S[3]||l.length>=4&&!S[4]||l.length>=5&&!S[5]);case"Weekly":return N!==""&&D>0;case"Monthly":return H==="agree"&&w>=1e3&&w<=1e4;default:return!1}},[s,r,c,l,S,N,D,H,w]),Q=()=>{const j=[],O=(t==null?void 0:t.leaseStyle)||"Nightly";if(c!==O&&j.push(`Lease style: ${O} â†’ ${c}`),r!==((t==null?void 0:t.damageDeposit)||500)&&j.push(`Damage deposit: $${(t==null?void 0:t.damageDeposit)||500} â†’ $${r}`),h!==((t==null?void 0:t.maintenanceFee)||125)&&j.push(`Maintenance fee: $${(t==null?void 0:t.maintenanceFee)||125} â†’ $${h}`),c==="Nightly"){const ae=(t==null?void 0:t.nightsAvailable)||[];(l.length!==ae.length||!l.every(ne=>ae.includes(ne)))&&j.push(`Available nights updated (${l.length} nights)`);const J=(t==null?void 0:t.weeklyCompensation)||{};[2,3,4,5].some(ne=>S[ne]!==(J[ne]||0))&&j.push("Nightly rates updated")}else c==="Weekly"?(D!==((t==null?void 0:t.weeklyHostRate)||0)&&j.push(`Weekly rate: $${D}/week`),N!==((t==null?void 0:t.weeksOffered)||"")&&j.push("Weekly pattern updated")):c==="Monthly"&&w!==((t==null?void 0:t.monthlyHostRate)||0)&&j.push(`Monthly rate: $${w}/month`);return j},Y=async()=>{var j,O;if(U()){Z(!0);try{const ae=Q(),J={"rental type":c,"ðŸ’°Damage Deposit":r,"ðŸ’°Cleaning Cost / Maintenance Fee":h,"Minimum Nights":L,"Maximum Nights":p};if(c==="Nightly"){const ce={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6},ne=l.map(le=>ce[le]).sort((le,he)=>le-he);J["Days Available (List of Days)"]=JSON.stringify(ne),J["ðŸ’°Nightly Host Rate for 2 nights"]=W(S[2],2),J["ðŸ’°Nightly Host Rate for 3 nights"]=W(S[3],3),J["ðŸ’°Nightly Host Rate for 4 nights"]=W(S[4],4),J["ðŸ’°Nightly Host Rate for 5 nights"]=W(S[5],5),J["ðŸ’°Nightly Host Rate for 6 nights"]=W(S[5],6),J["ðŸ’°Nightly Host Rate for 7 nights"]=W(S[5],7)}else c==="Weekly"?(J["Weeks offered"]=N,J["ðŸ’°Weekly Host Rate"]=D):c==="Monthly"&&(J["ðŸ’°Monthly Host Rate"]=w);await a(J),(j=window.showToast)==null||j.call(window,{title:"Pricing Updated!",content:ae.length>0?ae.join(" â€¢ "):"Pricing settings saved",type:"success"}),i()}catch(ae){x.error("Error saving pricing:",ae),(O=window.showToast)==null||O.call(window,{title:"Save Failed",content:"Failed to save pricing. Please try again.",type:"error"})}finally{Z(!1)}}},ie=j=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(j);return e.jsxs("div",{className:"pricing-edit-overlay",children:[e.jsxs("div",{className:"pricing-edit-container",children:[e.jsx("div",{className:"pricing-edit-header",children:e.jsxs("button",{className:"pricing-edit-back",onClick:G,children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),e.jsx("span",{children:"Go Back"})]})}),e.jsxs("div",{className:"pricing-edit-content",children:[e.jsxs("div",{className:"pricing-edit-title-row",children:[e.jsxs("div",{className:"pricing-edit-title",children:[e.jsx("h2",{children:"Pricing Controls"}),e.jsx("button",{ref:I.pricingControls,className:"pricing-edit-help",onClick:B("pricingControls"),children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})})]}),e.jsx("button",{className:`pricing-edit-save ${U()?"":"pricing-edit-save--disabled"}`,onClick:Y,disabled:!U()||te,children:te?"Saving...":"Save"})]}),e.jsx(ts,{activeStyle:c.toLowerCase(),onSelect:j=>{const O=j.charAt(0).toUpperCase()+j.slice(1);d(O)}}),e.jsxs("div",{className:"pricing-edit-common-fields",children:[e.jsxs("div",{className:"pricing-edit-field",children:[e.jsxs("label",{children:["Damage Deposit*",e.jsx("button",{ref:I.damageDeposit,className:"pricing-edit-field__help",onClick:B("damageDeposit"),children:e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})})]}),e.jsx("input",{type:"number",value:r,onChange:j=>n(Number(j.target.value)),min:500,disabled:!s})]}),e.jsxs("div",{className:"pricing-edit-field",children:[e.jsxs("label",{children:["Monthly Maintenance Fee",e.jsx("button",{ref:I.maintenanceFee,className:"pricing-edit-field__help",onClick:B("maintenanceFee"),children:e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})})]}),e.jsx("input",{type:"number",value:h,onChange:j=>y(Number(j.target.value)),disabled:!s})]})]}),c==="Nightly"&&e.jsx(ss,{selectedNights:l,onNightSelectionChange:g,onSelectAllNights:M,minNights:L,setMinNights:R,maxNights:p,setMaxNights:b,nightlyPricing:S,setNightlyPricing:_,calculateNightlyRate:W,formatCurrency:ie,isOwner:s,infoRefs:I,onInfoClick:B}),c==="Weekly"&&e.jsx(as,{weeksOffered:N,setWeeksOffered:v,weeklyRate:D,setWeeklyRate:k,isOwner:s,infoRefs:I,onInfoClick:B}),c==="Monthly"&&e.jsx(ns,{monthlyRate:w,setMonthlyRate:T,monthlyAgreement:H,setMonthlyAgreement:K,isOwner:s,infoRefs:I,onInfoClick:B})]})]}),P&&e.jsx(Ne,{isOpen:!0,title:typeof F[P]=="function"?F[P](P.slice(-1)).title:F[P].title,content:typeof F[P]=="function"?F[P](P.slice(-1)).content:F[P].content,expandedContent:typeof F[P]=="function"?F[P](P.slice(-1)).expandedContent:F[P].expandedContent,showMoreAvailable:!!((A=F[P])!=null&&A.expandedContent),onClose:()=>X(null),triggerRef:P==="pricingControls"?I.pricingControls:P==="damageDeposit"?I.damageDeposit:P==="maintenanceFee"?I.maintenanceFee:P==="nightsPerWeek"?I.nightsPerWeek:P.startsWith("weeklyComp")?I.weeklyComp[P.slice(-1)]:P==="weeklyPricing"?I.weeklyPricing:P==="monthlyComp"?I.monthlyComp:P==="monthlyAgreement"?I.monthlyAgreement:null}),u&&e.jsx("div",{className:"host-modal-backdrop",onClick:()=>C(!1),children:e.jsxs("div",{className:"host-modal host-modal--small",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"host-modal__header",children:[e.jsx("h3",{className:"host-modal__title",children:"Discard Changes?"}),e.jsx("button",{className:"host-modal__close",onClick:()=>C(!1),children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),e.jsxs("div",{className:"host-modal__content",children:[e.jsx("p",{className:"host-confirm-modal__message",children:"You have unsaved changes. Are you sure you want to leave without saving?"}),e.jsxs("div",{className:"host-confirm-modal__actions",children:[e.jsx("button",{className:"btn btn--secondary",onClick:()=>C(!1),children:"Keep Editing"}),e.jsx("button",{className:"btn btn--danger",onClick:i,children:"Discard Changes"})]})]})]})})]})}const rs=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),e.jsx("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"})]}),ls=({icon:t,name:i})=>t?e.jsx("img",{src:t,alt:i,width:"20",height:"20",className:"listing-dashboard-rules__icon-img"}):e.jsx(rs,{}),cs=({onClick:t})=>e.jsxs("button",{type:"button",className:"listing-dashboard-rules__empty-tag",onClick:t,children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M8 12h8"}),e.jsx("path",{d:"M12 8v8"})]}),e.jsx("span",{children:"No rules selected"})]}),ds=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"8",r:"5"}),e.jsx("path",{d:"M20 21a8 8 0 0 0-16 0"})]}),hs=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]});function us(){var r;const{listing:t,handleEditSection:i}=ee(),a=(t==null?void 0:t.houseRules)||[],s=((r=t==null?void 0:t.preferredGender)==null?void 0:r.display)||"Any",c=(t==null?void 0:t.maxGuests)||2,d=a.length>0;return e.jsxs("div",{id:"rules",className:"listing-dashboard-section",children:[e.jsxs("div",{className:"listing-dashboard-section__header",children:[e.jsx("h2",{className:"listing-dashboard-section__title",children:"Rules"}),e.jsx("button",{className:"listing-dashboard-section__edit",onClick:()=>i("rules"),children:"edit"})]}),e.jsxs("div",{className:"listing-dashboard-rules",children:[d?e.jsx("div",{className:"listing-dashboard-rules__grid",children:a.map(n=>e.jsxs("div",{className:"listing-dashboard-rules__item",children:[e.jsx("span",{className:"listing-dashboard-rules__icon",children:e.jsx(ls,{icon:n.icon,name:n.name})}),e.jsx("span",{className:"listing-dashboard-rules__name",children:n.name})]},n.id))}):e.jsx(cs,{onClick:()=>i("rules")}),e.jsxs("div",{className:"listing-dashboard-rules__restrictions",children:[e.jsxs("div",{className:"listing-dashboard-rules__item",children:[e.jsx("span",{className:"listing-dashboard-rules__icon",children:e.jsx(ds,{})}),e.jsxs("span",{className:"listing-dashboard-rules__name",children:["Gender Preferred: ",s]})]}),e.jsxs("div",{className:"listing-dashboard-rules__item",children:[e.jsx("span",{className:"listing-dashboard-rules__icon",children:e.jsx(hs,{})}),e.jsxs("span",{className:"listing-dashboard-rules__name",children:[c," max guests allowed"]})]})]})]})]})}const ms=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"m15 18-6-6 6-6"})}),ps=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"m9 18 6-6-6-6"})}),gs=["January","February","March","April","May","June","July","August","September","October","November","December"],xs=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],re=t=>{const i=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${i}-${a}-${s}`},ys=(t,i)=>{const a=[];let s=new Date(t),c=new Date(i);if(s>c){const r=s;s=c,c=r}const d=new Date(s);for(;d<=c;)a.push(re(d)),d.setDate(d.getDate()+1);return a},fs=t=>{if(!t)return"";const i=new Date(t);return isNaN(i.getTime())?"":i.toISOString().split("T")[0]};function bs(){const{listing:t,handleEditSection:i,handleBlockedDatesChange:a,handleAvailabilityChange:s}=ee(),[c,d]=o.useState(new Date),[r,n]=o.useState("individual"),[h,y]=o.useState(()=>(t==null?void 0:t.blockedDates)||[]),[l,f]=o.useState(null),[L,R]=o.useState(!1),[p,b]=o.useState(!1),S=u=>u?new Date(u).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",_=()=>{const u=c.getFullYear(),C=c.getMonth(),E=new Date(u,C,1),I=new Date(u,C+1,0),F=E.getDay(),B=I.getDate(),G=[],g=new Date;g.setHours(0,0,0,0);const M=new Date(u,C,0),W=M.getFullYear(),U=M.getMonth();for(let $=F-1;$>=0;$--){const V=M.getDate()-$,z=new Date(W,U,V);G.push({day:V,isCurrentMonth:!1,isPast:z<g,date:z})}for(let $=1;$<=B;$++){const V=new Date(u,C,$);G.push({day:$,isCurrentMonth:!0,isPast:V<g,date:V})}const Q=42-G.length,Y=C===11?u+1:u,ie=C===11?0:C+1;for(let $=1;$<=Q;$++){const V=new Date(Y,ie,$);G.push({day:$,isCurrentMonth:!1,isPast:!1,date:V})}return G},N=u=>{d(C=>{const E=new Date(C);return E.setMonth(C.getMonth()+u),E})},v=o.useCallback(u=>{if(!u)return!1;const C=re(u);return h.includes(C)},[h]),D=o.useCallback(u=>{y(C=>{const E=C.includes(u)?C.filter(I=>I!==u):[...C,u];return a&&a(E),E})},[a]),k=o.useCallback(u=>{y(C=>{const E=u.filter(F=>!C.includes(F)),I=[...C,...E];return a&&a(I),I})},[a]),w=o.useCallback(u=>{if(console.log("ðŸ“… Date clicked:",u,"isOverflow:",!u.isCurrentMonth),u.isPast||!u.date){console.log("ðŸ“… Click ignored: past date or missing date object");return}const C=re(u.date);if(console.log("ðŸ“… Date key:",C,"Mode:",r),r==="individual")console.log("ðŸ“… Individual mode: toggling date",C),D(C);else if(!l)console.log("ðŸ“… Range mode: setting start date",u.date),f(u.date);else{const E=ys(l,u.date);console.log("ðŸ“… Range mode: blocking dates",E),k(E),f(null)}},[r,l,D,k]),T=o.useCallback(u=>{if(!l||!u||r!=="range")return!1;const C=re(u),E=re(l);return C===E},[l,r]),H=o.useMemo(()=>{const u=new Date;u.setHours(0,0,0,0);const C=re(u);return h.filter(E=>E>=C).sort()},[h]),K=o.useMemo(()=>{const u=new Date;u.setHours(0,0,0,0);const C=re(u);return h.filter(E=>E<C).sort().reverse()},[h]),te=o.useMemo(()=>L?H:H.slice(0,10),[H,L]),Z=H.length>10,P=u=>{n(u),f(null)},X=_();return e.jsxs("div",{id:"availability",className:"listing-dashboard-availability",children:[e.jsxs("div",{className:"listing-dashboard-section",children:[e.jsx("div",{className:"listing-dashboard-section__header",children:e.jsx("h2",{className:"listing-dashboard-section__title",children:"Listing Availability"})}),e.jsxs("div",{className:"listing-dashboard-availability__settings",children:[e.jsxs("div",{className:"listing-dashboard-availability__field",children:[e.jsx("label",{children:"What is the ideal Lease Term? (Enter between 6 and 52 weeks.)"}),e.jsxs("div",{className:"listing-dashboard-availability__range-inputs",children:[e.jsx("input",{type:"number",value:(t==null?void 0:t.leaseTermMin)||6,min:6,max:52,onChange:u=>{const C=Math.min(52,Math.max(6,parseInt(u.target.value)||6));s==null||s("leaseTermMin",C)}}),e.jsx("span",{children:"-"}),e.jsx("input",{type:"number",value:(t==null?void 0:t.leaseTermMax)||52,min:6,max:52,onChange:u=>{const C=Math.min(52,Math.max(6,parseInt(u.target.value)||52));s==null||s("leaseTermMax",C)}})]})]}),e.jsxs("div",{className:"listing-dashboard-availability__field",children:[e.jsx("label",{children:"What is the earliest date someone could rent from you?"}),e.jsx("input",{type:"date",value:fs(t==null?void 0:t.earliestAvailableDate),className:"listing-dashboard-availability__date-input",onChange:u=>s==null?void 0:s("earliestAvailableDate",u.target.value)})]}),e.jsxs("div",{className:"listing-dashboard-availability__times",children:[e.jsxs("div",{className:"listing-dashboard-availability__time-field",children:[e.jsx("label",{children:"Check In Time"}),e.jsxs("select",{value:(t==null?void 0:t.checkInTime)||"1:00 pm",onChange:u=>s==null?void 0:s("checkInTime",u.target.value),children:[e.jsx("option",{value:"12:00 pm",children:"12:00 pm"}),e.jsx("option",{value:"1:00 pm",children:"1:00 pm"}),e.jsx("option",{value:"2:00 pm",children:"2:00 pm"}),e.jsx("option",{value:"3:00 pm",children:"3:00 pm"}),e.jsx("option",{value:"4:00 pm",children:"4:00 pm"}),e.jsx("option",{value:"5:00 pm",children:"5:00 pm"})]})]}),e.jsxs("div",{className:"listing-dashboard-availability__time-field",children:[e.jsx("label",{children:"Check Out Time"}),e.jsxs("select",{value:(t==null?void 0:t.checkOutTime)||"11:00 am",onChange:u=>s==null?void 0:s("checkOutTime",u.target.value),children:[e.jsx("option",{value:"9:00 am",children:"9:00 am"}),e.jsx("option",{value:"10:00 am",children:"10:00 am"}),e.jsx("option",{value:"11:00 am",children:"11:00 am"}),e.jsx("option",{value:"12:00 pm",children:"12:00 pm"}),e.jsx("option",{value:"1:00 pm",children:"1:00 pm"})]})]})]})]})]}),e.jsxs("div",{className:"listing-dashboard-section",children:[e.jsx("div",{className:"listing-dashboard-section__header",children:e.jsx("h2",{className:"listing-dashboard-section__title",children:"Listing Availability"})}),e.jsxs("div",{className:"listing-dashboard-availability__calendar-container",children:[e.jsxs("div",{className:"listing-dashboard-availability__instructions",children:[e.jsx("p",{children:"Add or remove blocked dates by selecting a range or individual days."}),e.jsxs("div",{className:"listing-dashboard-availability__mode-toggle",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"dateMode",value:"range",checked:r==="range",onChange:()=>P("range")}),"Range"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"dateMode",value:"individual",checked:r==="individual",onChange:()=>P("individual")}),"Individual dates"]})]}),l&&r==="range"&&e.jsxs("p",{className:"listing-dashboard-availability__range-hint",children:["Range start selected: ",S(l),". Click another date to complete the range."]}),e.jsxs("div",{className:"listing-dashboard-availability__info",children:[e.jsx("p",{children:e.jsx("strong",{children:"Dates Blocked by You"})}),H.length>0?e.jsxs("div",{className:"listing-dashboard-availability__blocked-list",children:[te.map(u=>e.jsxs("span",{className:"listing-dashboard-availability__blocked-date",children:[new Date(u+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),e.jsx("button",{type:"button",className:"listing-dashboard-availability__remove-date",onClick:()=>D(u),title:"Remove blocked date",children:"Ã—"})]},u)),Z&&!L&&e.jsxs("button",{type:"button",className:"listing-dashboard-availability__more-dates-btn",onClick:()=>R(!0),children:["+",H.length-10," more dates"]}),L&&Z&&e.jsx("button",{type:"button",className:"listing-dashboard-availability__more-dates-btn",onClick:()=>R(!1),children:"Show less"})]}):e.jsx("p",{className:"listing-dashboard-availability__no-blocked",children:"You don't have any future date blocked yet"}),K.length>0&&e.jsxs("div",{className:"listing-dashboard-availability__past-dates",children:[e.jsxs("button",{type:"button",className:"listing-dashboard-availability__past-dates-toggle",onClick:()=>b(!p),children:[e.jsx("span",{children:p?"â–¼":"â–¶"}),e.jsxs("span",{children:["Past blocked dates (",K.length,")"]})]}),p&&e.jsx("div",{className:"listing-dashboard-availability__blocked-list listing-dashboard-availability__blocked-list--past",children:K.map(u=>e.jsx("span",{className:"listing-dashboard-availability__blocked-date listing-dashboard-availability__blocked-date--past",children:new Date(u+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},u))})]})]})]}),e.jsxs("div",{className:"listing-dashboard-availability__calendar",children:[e.jsxs("div",{className:"listing-dashboard-availability__calendar-header",children:[e.jsx("button",{onClick:()=>N(-1),children:e.jsx(ms,{})}),e.jsxs("span",{children:[gs[c.getMonth()]," ",c.getFullYear()]}),e.jsx("button",{onClick:()=>N(1),children:e.jsx(ps,{})})]}),e.jsx("div",{className:"listing-dashboard-availability__day-headers",children:xs.map(u=>e.jsx("div",{className:"listing-dashboard-availability__day-header",children:u},u))}),e.jsx("div",{className:"listing-dashboard-availability__calendar-grid",children:X.map((u,C)=>{const E=u.date&&v(u.date),I=T(u.date),F=!u.isPast&&u.date;return e.jsx("div",{className:`listing-dashboard-availability__calendar-day ${u.isCurrentMonth?"":"listing-dashboard-availability__calendar-day--other-month"} ${u.isPast?"listing-dashboard-availability__calendar-day--past":""} ${E?"listing-dashboard-availability__calendar-day--blocked":""} ${I?"listing-dashboard-availability__calendar-day--range-start":""} ${F?"listing-dashboard-availability__calendar-day--selectable":""}`,onClick:()=>w(u),role:F?"button":void 0,tabIndex:F?0:void 0,onKeyDown:B=>{F&&(B.key==="Enter"||B.key===" ")&&(B.preventDefault(),w(u))},children:String(u.day).padStart(2,"0")},C)})}),e.jsxs("div",{className:"listing-dashboard-availability__legend",children:[e.jsxs("div",{className:"listing-dashboard-availability__legend-item",children:[e.jsx("span",{className:"listing-dashboard-availability__legend-dot listing-dashboard-availability__legend-dot--restricted"}),e.jsx("span",{children:"Restricted Weekly"})]}),e.jsxs("div",{className:"listing-dashboard-availability__legend-item",children:[e.jsx("span",{className:"listing-dashboard-availability__legend-dot listing-dashboard-availability__legend-dot--blocked"}),e.jsx("span",{children:"Blocked Manually"})]}),e.jsxs("div",{className:"listing-dashboard-availability__legend-item",children:[e.jsx("span",{className:"listing-dashboard-availability__legend-dot listing-dashboard-availability__legend-dot--available"}),e.jsx("span",{children:"Available"})]}),e.jsxs("div",{className:"listing-dashboard-availability__legend-item",children:[e.jsx("span",{className:"listing-dashboard-availability__legend-dot listing-dashboard-availability__legend-dot--first"}),e.jsx("span",{children:"First Available"})]})]})]})]})]})]})}const vs=({filled:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:t?"#f59e0b":"none",stroke:t?"#f59e0b":"#374151",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block",flexShrink:0},className:"photo-action-icon",children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),js=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#374151",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"block",flexShrink:0},className:"photo-action-icon",children:[e.jsx("path",{d:"M3 6h18"}),e.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),e.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),ws=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"9",cy:"5",r:"1",fill:"currentColor"}),e.jsx("circle",{cx:"9",cy:"12",r:"1",fill:"currentColor"}),e.jsx("circle",{cx:"9",cy:"19",r:"1",fill:"currentColor"}),e.jsx("circle",{cx:"15",cy:"5",r:"1",fill:"currentColor"}),e.jsx("circle",{cx:"15",cy:"12",r:"1",fill:"currentColor"}),e.jsx("circle",{cx:"15",cy:"19",r:"1",fill:"currentColor"})]}),ks=["Dining Room","Bathroom","Bedroom","Kitchen","Living Room","Workspace","Other"];function _s(){const{listing:t,handleEditSection:i,handleSetCoverPhoto:a,handleDeletePhoto:s,handleReorderPhotos:c}=ee(),d=(t==null?void 0:t.photos)||[],[r,n]=o.useState(null),[h,y]=o.useState(null),l=(_,N)=>{n(N),_.dataTransfer.effectAllowed="move",setTimeout(()=>{var v;(v=_.target.closest(".listing-dashboard-photos__card"))==null||v.classList.add("listing-dashboard-photos__card--dragging")},0)},f=(_,N)=>{_.preventDefault(),_.dataTransfer.dropEffect="move",r!==N&&y(N)},L=_=>{_.currentTarget.contains(_.relatedTarget)||y(null)},R=(_,N)=>{if(_.preventDefault(),r===null||r===N){n(null),y(null);return}c&&c(r,N),n(null),y(null)},p=_=>{var N;(N=_.target.closest(".listing-dashboard-photos__card"))==null||N.classList.remove("listing-dashboard-photos__card--dragging"),n(null),y(null)},b=_=>{const N=(_==null?void 0:_.url)||(_==null?void 0:_.Photo)||(_==null?void 0:_.URL)||"";return N?(N.startsWith("http://")||N.startsWith("https://")||N.startsWith("//"),N):null},S=_=>{_.target.style.display="none",_.target.parentElement.classList.add("listing-dashboard-photos__image-error")};return e.jsxs("div",{id:"photos",className:"listing-dashboard-section",children:[e.jsxs("div",{className:"listing-dashboard-section__header",children:[e.jsx("h2",{className:"listing-dashboard-section__title",children:"Photos"}),e.jsx("button",{className:"listing-dashboard-section__add-btn",onClick:()=>i("photos"),children:"Add Photos"})]}),d.length>1&&e.jsx("p",{className:"listing-dashboard-photos__hint",children:"Drag and drop photos to reorder. First photo is the cover photo."}),e.jsxs("div",{className:"listing-dashboard-photos__grid",children:[d.map((_,N)=>{const v=b(_),D=r===N,k=h===N;return e.jsxs("div",{className:`listing-dashboard-photos__card ${D?"listing-dashboard-photos__card--dragging":""} ${k?"listing-dashboard-photos__card--drag-over":""}`,draggable:!0,onDragStart:w=>l(w,N),onDragOver:w=>f(w,N),onDragLeave:L,onDrop:w=>R(w,N),onDragEnd:p,children:[e.jsx("div",{className:"listing-dashboard-photos__drag-handle",title:"Drag to reorder",children:e.jsx(ws,{})}),e.jsxs("div",{className:"listing-dashboard-photos__image-container",children:[v?e.jsx("img",{src:v,alt:_.photoType||`Photo ${N+1}`,className:"listing-dashboard-photos__image",onError:S,draggable:!1}):e.jsxs("div",{className:"listing-dashboard-photos__placeholder",children:[e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.jsx("polyline",{points:"21,15 16,10 5,21"})]}),e.jsx("span",{children:"No image"})]}),(_.isCover||N===0)&&e.jsx("div",{className:"listing-dashboard-photos__cover-badge",children:"Cover Photo"}),e.jsxs("div",{className:"listing-dashboard-photos__actions",children:[e.jsx("button",{className:`listing-dashboard-photos__star-btn ${_.isCover||N===0?"listing-dashboard-photos__star-btn--active":""}`,onClick:()=>a==null?void 0:a(_.id),title:_.isCover||N===0?"Current cover photo":"Set as cover photo",children:e.jsx(vs,{filled:_.isCover||N===0})}),e.jsx("button",{className:"listing-dashboard-photos__delete-btn",onClick:()=>s==null?void 0:s(_.id),title:"Delete photo",children:e.jsx(js,{})})]})]}),e.jsx("div",{className:"listing-dashboard-photos__type",children:e.jsx("select",{value:_.photoType||"Other",onChange:w=>{console.log("Photo type changed:",_.id,w.target.value)},children:ks.map(w=>e.jsx("option",{value:w,children:w},w))})})]},_.id||N)}),d.length===0&&e.jsxs("div",{className:"listing-dashboard-photos__empty",children:[e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.jsx("polyline",{points:"21,15 16,10 5,21"})]}),e.jsx("p",{children:"No photos uploaded yet."}),e.jsx("button",{onClick:()=>i("photos"),children:"Add your first photo"})]})]})]})}const de={STANDARD:"1665431440883x653177548350901500",ADDITIONAL_RESTRICTIONS:"1665431684611x656977293321267800"};function Ns(){const{listing:t,handleCancellationPolicyChange:i,handleCancellationRestrictionsChange:a}=ee(),s=(t==null?void 0:t.cancellationPolicy)===de.ADDITIONAL_RESTRICTIONS||(t==null?void 0:t.cancellationPolicy)==="Additional Host Restrictions",[c,d]=o.useState(s),[r,n]=o.useState((t==null?void 0:t.cancellationPolicyAdditionalRestrictions)||""),[h,y]=o.useState(!1);o.useEffect(()=>{const R=(t==null?void 0:t.cancellationPolicy)===de.ADDITIONAL_RESTRICTIONS||(t==null?void 0:t.cancellationPolicy)==="Additional Host Restrictions";d(R),n((t==null?void 0:t.cancellationPolicyAdditionalRestrictions)||"")},[t==null?void 0:t.cancellationPolicy,t==null?void 0:t.cancellationPolicyAdditionalRestrictions]);const l=async R=>{const b=R.target.value==="Additional Host Restrictions";d(b),y(!0);try{const S=b?de.ADDITIONAL_RESTRICTIONS:de.STANDARD;await(i==null?void 0:i(S)),!b&&r&&(n(""),await(a==null?void 0:a("")))}finally{y(!1)}},f=async()=>{if(r!==(t==null?void 0:t.cancellationPolicyAdditionalRestrictions)){y(!0);try{await(a==null?void 0:a(r))}finally{y(!1)}}},L=()=>(t==null?void 0:t.cancellationPolicy)===de.ADDITIONAL_RESTRICTIONS||(t==null?void 0:t.cancellationPolicy)==="Additional Host Restrictions"?"Additional Host Restrictions":"Standard";return e.jsxs("div",{id:"cancellation-policy",className:"listing-dashboard-section",children:[e.jsx("div",{className:"listing-dashboard-section__header",children:e.jsx("h2",{className:"listing-dashboard-section__title",children:"Cancellation Policy"})}),e.jsxs("div",{className:"listing-dashboard-cancellation",children:[e.jsxs("select",{className:"listing-dashboard-cancellation__select",value:L(),onChange:l,disabled:h,children:[e.jsx("option",{value:"Standard",children:"Standard"}),e.jsx("option",{value:"Additional Host Restrictions",children:"Additional Host Restrictions"})]}),e.jsx("a",{href:"/policies#cancellation-and-refund-policy",target:"_blank",rel:"noopener noreferrer",className:"listing-dashboard-cancellation__link",children:"Standard Policy"})]}),c&&e.jsxs("div",{className:"listing-dashboard-cancellation__restrictions",children:[e.jsx("label",{htmlFor:"cancellation-restrictions",className:"listing-dashboard-cancellation__restrictions-label",children:"Specify your additional restrictions:"}),e.jsx("textarea",{id:"cancellation-restrictions",className:"listing-dashboard-cancellation__restrictions-input",placeholder:"Enter your additional cancellation restrictions here...",value:r,onChange:R=>n(R.target.value),onBlur:f,disabled:h,rows:4}),h&&e.jsx("span",{className:"listing-dashboard-cancellation__saving",children:"Saving..."})]})]})}function Cs(){var g,M,W,U,Q,Y,ie,$,V,z,m,A,j,O,ae,J,ce,ne,le,he,pe,ge,xe,ye;const[t,i]=o.useState(!1),{activeTab:a,listing:s,counts:c,isLoading:d,error:r,editSection:n,showScheduleCohost:h,showImportReviews:y,currentUser:l,existingCohostRequest:f,handleTabChange:L,handleCardClick:R,handleBackClick:p,handleScheduleCohost:b,handleCloseScheduleCohost:S,handleCohostRequestSubmitted:_,handleImportReviews:N,handleCloseImportReviews:v,handleSubmitImportReviews:D,isImportingReviews:k,showAIImportAssistant:w,handleCloseAIImportAssistant:T,handleAIImportComplete:H,handleStartAIGeneration:K,aiGenerationStatus:te,isAIGenerating:Z,isAIComplete:P,aiGeneratedData:X,highlightedFields:u,handleEditSection:C,handleCloseEdit:E,handleSaveEdit:I,updateListing:F,editFocusField:B,handleAIAssistant:G}=ee();return d?e.jsxs(e.Fragment,{children:[e.jsx(ue,{}),e.jsx("div",{className:"listing-dashboard",children:e.jsx("div",{className:"listing-dashboard__container",children:e.jsx("div",{className:"listing-dashboard__loading",children:e.jsx("p",{children:"Loading listing..."})})})}),e.jsx(me,{})]}):r?e.jsxs(e.Fragment,{children:[e.jsx(ue,{}),e.jsx("div",{className:"listing-dashboard",children:e.jsx("div",{className:"listing-dashboard__container",children:e.jsxs("div",{className:"listing-dashboard__error",children:[e.jsxs("p",{children:["Error: ",r]}),e.jsx("button",{onClick:()=>window.location.href="/host-overview",children:"Go to My Listings"})]})})}),e.jsx(me,{})]}):s?e.jsxs(e.Fragment,{children:[e.jsx(ue,{}),e.jsx("div",{className:"listing-dashboard",children:e.jsx("div",{className:"listing-dashboard__container",children:e.jsxs("div",{className:"listing-dashboard__card",children:[e.jsx(xt,{onInviteClick:()=>i(!0)}),e.jsx(St,{}),e.jsx(kt,{}),e.jsx(Mt,{}),e.jsx("div",{className:u!=null&&u.has("name")?"listing-dashboard-section--ai-highlighted":"",children:e.jsx(Et,{})}),e.jsx("div",{className:u!=null&&u.has("description")||u!=null&&u.has("neighborhood")?"listing-dashboard-section--ai-highlighted":"",children:e.jsx(Jt,{})}),e.jsx("div",{className:u!=null&&u.has("amenities")?"listing-dashboard-section--ai-highlighted":"",children:e.jsx(Vt,{})}),e.jsx(zt,{}),e.jsx(Xt,{}),e.jsx("div",{className:u!=null&&u.has("rules")||u!=null&&u.has("safety")?"listing-dashboard-section--ai-highlighted":"",children:e.jsx(us,{})}),e.jsx(bs,{}),e.jsx(_s,{}),e.jsx(Ns,{})]})})}),e.jsx(me,{}),n==="pricing"&&e.jsx(os,{listing:s,onClose:E,onSave:async se=>{await F(s.id,se),I(se)},isOwner:!0}),n&&n!=="pricing"&&e.jsx(Te,{focusField:B,listing:{_id:s.id,Name:s.title,Description:s.description,"Description - Neighborhood":s.descriptionNeighborhood,"Location - Address":{address:(g=s.location)==null?void 0:g.address},"Location - City":(M=s.location)==null?void 0:M.city,"Location - State":(W=s.location)==null?void 0:W.state,"Location - Zip Code":(U=s.location)==null?void 0:U.zipCode,"Location - Borough":(Q=s.location)==null?void 0:Q.boroughDisplay,"Location - Hood":(Y=s.location)==null?void 0:Y.hoodsDisplay,"Features - Type of Space":($=(ie=s.features)==null?void 0:ie.typeOfSpace)==null?void 0:$.id,"Features - Qty Bedrooms":(V=s.features)==null?void 0:V.bedrooms,"Features - Qty Bathrooms":(z=s.features)==null?void 0:z.bathrooms,"Features - Qty Beds":(m=s.features)==null?void 0:m.bedrooms,"Features - Qty Guests":s.maxGuests,"Features - SQFT Area":(A=s.features)==null?void 0:A.squareFootage,"Features - SQFT of Room":(j=s.features)==null?void 0:j.squareFootageRoom,"Kitchen Type":(ae=(O=s.features)==null?void 0:O.kitchenType)==null?void 0:ae.id,"Features - Parking type":(ce=(J=s.features)==null?void 0:J.parkingType)==null?void 0:ce.label,"Features - Secure Storage Option":(le=(ne=s.features)==null?void 0:ne.storageType)==null?void 0:le.label,"Features - House Rules":((he=s.houseRules)==null?void 0:he.map(se=>se.name))||[],"Features - Photos":((pe=s.photos)==null?void 0:pe.map(se=>se.url))||[],"Features - Amenities In-Unit":((ge=s.inUnitAmenities)==null?void 0:ge.map(se=>se.name))||[],"Features - Amenities In-Building":((xe=s.buildingAmenities)==null?void 0:xe.map(se=>se.name))||[],"Features - Safety":((ye=s.safetyFeatures)==null?void 0:ye.map(se=>se.name))||[],"First Available":s.earliestAvailableDate,"Minimum Nights":s.nightsPerWeekMin,"Maximum Nights":s.nightsPerWeekMax,"Cancellation Policy":s.cancellationPolicy},editSection:n,onClose:E,onSave:I,updateListing:(se,Ae)=>F(Ae)}),h&&e.jsx(Ee,{userId:(l==null?void 0:l.userId)||(l==null?void 0:l._id)||(l==null?void 0:l.id)||"",userEmail:(l==null?void 0:l.email)||"",userName:(l==null?void 0:l.firstName)||(l==null?void 0:l.name)||"",listingId:s==null?void 0:s.id,existingRequest:f,onRequestSubmitted:_,onClose:S}),e.jsx(Qe,{isOpen:y,onClose:v,onSubmit:D,currentUserEmail:(l==null?void 0:l.email)||"",listingId:s==null?void 0:s.id,isLoading:k}),e.jsx(st,{isOpen:w,onClose:T,onComplete:H,generationStatus:te,isGenerating:Z,isComplete:P,generatedData:X,onStartGeneration:K}),e.jsx(De,{isOpen:t,onClose:()=>i(!1),referralCode:(l==null?void 0:l.userId)||(l==null?void 0:l._id)||(l==null?void 0:l.id)||"user",userType:"host",referrerName:(l==null?void 0:l["Name - First"])||(l==null?void 0:l.firstName)||(l==null?void 0:l.name)||""})]}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{}),e.jsx("div",{className:"listing-dashboard",children:e.jsx("div",{className:"listing-dashboard__container",children:e.jsxs("div",{className:"listing-dashboard__not-found",children:[e.jsx("p",{children:"Listing not found"}),e.jsx("button",{onClick:()=>window.location.href="/host-dashboard",children:"Back to Dashboard"})]})})}),e.jsx(me,{})]})}function Ss(){return o.useEffect(()=>(document.body.classList.add("listing-dashboard-page"),()=>{document.body.classList.remove("listing-dashboard-page")}),[]),e.jsx(dt,{children:e.jsx(Cs,{})})}const ke=document.getElementById("root");ke&&Ie(ke).render(e.jsx(_e.StrictMode,{children:e.jsx(ze,{children:e.jsx(Ye,{children:e.jsx(Ss,{})})})}));
