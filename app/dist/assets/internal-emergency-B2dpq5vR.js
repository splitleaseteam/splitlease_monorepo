import{r as i,j as e,c as te,R as ae}from"./client-BJVKzfAi.js";import{f as X,a as ie,b as re,c as ne,d as k,e as le,u as ce,g as oe,s as de,h as me}from"./emergencyService-2rzJUyBu.js";import"./supabase-BoCLEw6R.js";import{A as J}from"./AdminHeader-tCInZd3n.js";/* empty css             */import"./auth-QZ4BJadW.js";import"./star-OtPMgcH9.js";import"./createLucideIcon-CgZZH2OU.js";import"./file-text-Bqp_Hw0X.js";import"./triangle-alert-Bp6DQQmR.js";import"./users-d0RSvnp4.js";import"./pen-line-Duo49k9O.js";import"./calendar-CDI4qHEX.js";import"./mail-CRbL90NL.js";import"./user-check-CoCGzn5Y.js";import"./dollar-sign-Dn2-KjNW.js";import"./send-C4mziT0-.js";import"./x-CrJVeoCh.js";function ue(){const[s,c]=i.useState([]),[n,r]=i.useState(null),[j,b]=i.useState([]),[m,g]=i.useState([]),[y,v]=i.useState([]),[T,N]=i.useState(!0),[p,R]=i.useState(null),[A,f]=i.useState(""),[D,E]=i.useState("success"),[x,_]=i.useState("");i.useEffect(()=>{w()},[]);const w=i.useCallback(async()=>{N(!0),R(null);try{const[a,d,o,u]=await Promise.all([X({status:x||void 0,limit:100}),ie(),re(),ne()]);c(a||[]),b(d||[]),g(o||[]),v(u||[]),console.log("[InternalEmergencyPage] Loaded",(a==null?void 0:a.length)||0,"emergencies")}catch(a){console.error("[InternalEmergencyPage] Load error:",a),R(a.message||"Failed to load emergencies")}finally{N(!1)}},[x]);i.useEffect(()=>{!T&&!p&&C()},[x]);const C=i.useCallback(async()=>{try{const a=await X({status:x||void 0,limit:100});c(a||[])}catch(a){console.error("[InternalEmergencyPage] Refresh error:",a),h("Failed to refresh emergencies","error")}},[x]),P=i.useCallback(async a=>{try{const d=await k(a.id);r(d)}catch(d){console.error("[InternalEmergencyPage] Fetch details error:",d),h("Failed to load emergency details","error"),r(a)}},[]),l=i.useCallback(async()=>{if(await C(),n)try{const a=await k(n.id);r(a)}catch{}},[C,n]),L=i.useCallback(async(a,d,o)=>{try{const u=await le(a,d,o);if(h("Emergency assigned successfully","success"),await l(),(n==null?void 0:n.id)===a){const M=await k(a);r(M)}return u}catch(u){throw console.error("[InternalEmergencyPage] Assign error:",u),h(`Failed to assign emergency: ${u.message}`,"error"),u}},[n,l]),O=i.useCallback(async(a,d)=>{try{const o=await ce(a,d);if(h(`Status updated to ${d}`,"success"),await l(),(n==null?void 0:n.id)===a){const u=await k(a);r(u)}return o}catch(o){throw console.error("[InternalEmergencyPage] Status update error:",o),h(`Failed to update status: ${o.message}`,"error"),o}},[n,l]),U=i.useCallback(async(a,d)=>{try{const o=await oe(a,d);return h(d?"Emergency hidden":"Emergency visible","success"),await l(),o}catch(o){throw console.error("[InternalEmergencyPage] Visibility update error:",o),h(`Failed to update visibility: ${o.message}`,"error"),o}},[l]),G=i.useCallback(async(a,d,o)=>{try{const u=await de(a,d,o);if(h("SMS sent successfully","success"),(n==null?void 0:n.id)===a){const M=await k(a);r(M)}return u}catch(u){throw console.error("[InternalEmergencyPage] SMS error:",u),h(`Failed to send SMS: ${u.message}`,"error"),u}},[n]),H=i.useCallback(async(a,d)=>{try{const o=await me(a,d);if(h("Email sent successfully","success"),(n==null?void 0:n.id)===a){const u=await k(a);r(u)}return o}catch(o){throw console.error("[InternalEmergencyPage] Email error:",o),h(`Failed to send email: ${o.message}`,"error"),o}},[n]),h=i.useCallback((a,d="success")=>{f(a),E(d),setTimeout(()=>{f("")},5e3)},[]),I=i.useCallback(()=>{f("")},[]);return{emergencies:s,selectedEmergency:n,teamMembers:j,presetMessages:m,presetEmails:y,loading:T,error:p,alertMessage:A,alertType:D,statusFilter:x,setStatusFilter:_,handleSelectEmergency:P,handleRefresh:l,handleAssign:L,handleUpdateStatus:O,handleUpdateVisibility:U,handleSendSMS:G,handleSendEmail:H,showAlert:h,clearAlert:I}}const he={REPORTED:"#dc3545",ASSIGNED:"#fd7e14",IN_PROGRESS:"#0d6efd",RESOLVED:"#198754",CLOSED:"#6c757d"},pe={REPORTED:"Reported",ASSIGNED:"Assigned",IN_PROGRESS:"In Progress",RESOLVED:"Resolved",CLOSED:"Closed"};function xe({emergencies:s,selectedEmergency:c,onSelectEmergency:n}){return!s||s.length===0?e.jsx("div",{className:"emergency-list emergency-list--empty",children:e.jsx("p",{children:"No emergencies found."})}):e.jsxs("div",{className:"emergency-list",children:[e.jsxs("h2",{className:"emergency-list__title",children:["Emergencies (",s.length,")"]}),e.jsx("ul",{className:"emergency-list__items",children:s.map(r=>{var m;const j=(c==null?void 0:c.id)===r.id,b=r.reportedBy?`${r.reportedBy.firstName||""} ${r.reportedBy.lastName||""}`.trim()||r.reportedBy.email:"Unknown Guest";return e.jsx("li",{className:"emergency-list__item",children:e.jsxs("button",{className:`emergency-card ${j?"emergency-card--selected":""}`,onClick:()=>n(r),type:"button",children:[e.jsxs("div",{className:"emergency-card__header",children:[e.jsx("span",{className:"emergency-card__status",style:{backgroundColor:he[r.status]||"#6c757d"},children:pe[r.status]||r.status}),e.jsx("span",{className:"emergency-card__time",children:ge(r.created_at)})]}),e.jsx("h3",{className:"emergency-card__type",children:r.emergency_type}),e.jsx("p",{className:"emergency-card__description",children:je(r.description,80)}),e.jsxs("div",{className:"emergency-card__footer",children:[e.jsx("span",{className:"emergency-card__guest",children:b}),((m=r.proposal)==null?void 0:m.agreementNumber)&&e.jsxs("span",{className:"emergency-card__agreement",children:["#",r.proposal.agreementNumber]})]}),r.assignedTo&&e.jsxs("div",{className:"emergency-card__assigned",children:["Assigned to: ",r.assignedTo.firstName||r.assignedTo.email]})]})},r.id)})})]})}function je(s,c){return s?s.length<=c?s:s.substring(0,c).trim()+"...":""}function ge(s){if(!s)return"";const c=new Date(s),r=new Date-c,j=Math.floor(r/(1e3*60)),b=Math.floor(r/(1e3*60*60)),m=Math.floor(r/(1e3*60*60*24));return j<1?"Just now":j<60?`${j}m ago`:b<24?`${b}h ago`:m<7?`${m}d ago`:c.toLocaleDateString()}const Ne=[{value:"REPORTED",label:"Reported"},{value:"ASSIGNED",label:"Assigned"},{value:"IN_PROGRESS",label:"In Progress"},{value:"RESOLVED",label:"Resolved"},{value:"CLOSED",label:"Closed"}];function fe({emergency:s,teamMembers:c,onAssign:n,onUpdateStatus:r,onUpdateVisibility:j,onAlert:b}){var _,w,C,P;const[m,g]=i.useState(s.assigned_to_user_id||""),[y,v]=i.useState(s.guidance_instructions||""),[T,N]=i.useState(!1),[p,R]=i.useState(s.status),[A,f]=i.useState(!1),D=async l=>{if(l.preventDefault(),!m){b("Please select a team member","error");return}N(!0);try{await n(s.id,m,y)}finally{N(!1)}},E=async()=>{if(p!==s.status){f(!0);try{await r(s.id,p)}finally{f(!1)}}},x=async()=>{try{await j(s.id,!s.is_hidden)}catch{}};return e.jsxs("div",{className:"emergency-details",children:[e.jsxs("div",{className:"emergency-details__header",children:[e.jsx("h2",{className:"emergency-details__title",children:s.emergency_type}),e.jsx("span",{className:`status-badge status-badge--${s.status.toLowerCase()}`,children:s.status})]}),e.jsxs("div",{className:"emergency-details__section",children:[e.jsx("h3",{children:"Description"}),e.jsx("p",{className:"emergency-details__description",children:s.description})]}),(s.photo1_url||s.photo2_url)&&e.jsxs("div",{className:"emergency-details__section",children:[e.jsx("h3",{children:"Photos"}),e.jsxs("div",{className:"emergency-details__photos",children:[s.photo1_url&&e.jsx("a",{href:s.photo1_url,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:s.photo1_url,alt:"Emergency photo 1"})}),s.photo2_url&&e.jsx("a",{href:s.photo2_url,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:s.photo2_url,alt:"Emergency photo 2"})})]})]}),e.jsxs("div",{className:"emergency-details__section",children:[e.jsx("h3",{children:"Guest Information"}),s.guest||s.reportedBy?e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Name"}),e.jsxs("span",{children:[((_=s.guest||s.reportedBy)==null?void 0:_.firstName)||""," ",((w=s.guest||s.reportedBy)==null?void 0:w.lastName)||""]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Email"}),e.jsx("span",{children:((C=s.guest||s.reportedBy)==null?void 0:C.email)||"N/A"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Phone"}),e.jsx("span",{children:((P=s.guest||s.reportedBy)==null?void 0:P.phone)||"N/A"})]})]}):e.jsx("p",{className:"text-muted",children:"No guest information available"})]}),s.proposal&&e.jsxs("div",{className:"emergency-details__section",children:[e.jsx("h3",{children:"Booking Information"}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Agreement #"}),e.jsx("span",{children:s.proposal.agreementNumber||"N/A"})]}),s.listing&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Property"}),e.jsx("span",{children:s.listing.name||"N/A"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Address"}),e.jsxs("span",{children:[s.listing.streetAddress||""," ",s.listing.city?`, ${s.listing.city}`:""]})]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Move In"}),e.jsx("span",{children:Y(s.proposal.moveIn)})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Move Out"}),e.jsx("span",{children:Y(s.proposal.moveOut)})]})]})]}),e.jsxs("div",{className:"emergency-details__section",children:[e.jsx("h3",{children:"Assignment"}),e.jsxs("form",{onSubmit:D,className:"assignment-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"assignee",children:"Assign To"}),e.jsxs("select",{id:"assignee",value:m,onChange:l=>g(l.target.value),className:"form-select",children:[e.jsx("option",{value:"",children:"Select team member..."}),c.map(l=>e.jsx("option",{value:l._id,children:l.fullName||l.email},l._id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"guidance",children:"Guidance Instructions"}),e.jsx("textarea",{id:"guidance",value:y,onChange:l=>v(l.target.value),placeholder:"Add instructions for the assigned team member...",rows:3,className:"form-textarea"})]}),e.jsx("button",{type:"submit",className:"btn btn--primary",disabled:T||!m,children:T?"Assigning...":"Assign Emergency"})]}),s.assignedTo&&e.jsxs("div",{className:"current-assignment",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Currently assigned to:"})," ",s.assignedTo.firstName||""," ",s.assignedTo.lastName||""," ","(",s.assignedTo.email,")"]}),s.assigned_at&&e.jsxs("p",{className:"text-muted",children:["Assigned: ",$(s.assigned_at)]})]})]}),e.jsxs("div",{className:"emergency-details__section",children:[e.jsx("h3",{children:"Update Status"}),e.jsxs("div",{className:"status-update",children:[e.jsx("select",{value:p,onChange:l=>R(l.target.value),className:"form-select",children:Ne.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))}),e.jsx("button",{onClick:E,className:"btn btn--secondary",disabled:A||p===s.status,children:A?"Updating...":"Update Status"})]})]}),e.jsxs("div",{className:"emergency-details__section",children:[e.jsx("h3",{children:"Visibility"}),e.jsxs("div",{className:"visibility-toggle",children:[e.jsx("button",{onClick:x,className:`btn ${s.is_hidden?"btn--primary":"btn--outline"}`,children:s.is_hidden?"Show Emergency":"Hide Emergency"}),e.jsx("p",{className:"text-muted",children:s.is_hidden?"This emergency is hidden from the default view.":"This emergency is visible in the default view."})]})]}),e.jsxs("div",{className:"emergency-details__section emergency-details__timestamps",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Created:"})," ",$(s.created_at)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Updated:"})," ",$(s.updated_at)]}),s.resolved_at&&e.jsxs("p",{children:[e.jsx("strong",{children:"Resolved:"})," ",$(s.resolved_at)]}),e.jsxs("p",{className:"emergency-details__id",children:["ID: ",s.id]})]})]})}function Y(s){return s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}function $(s){return s?new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function be({emergency:s,presetMessages:c,presetEmails:n,onSendSMS:r,onSendEmail:j,onRefresh:b,onAlert:m}){var h,I,a,d,o,u,M,W;const[g,y]=i.useState("sms"),[v,T]=i.useState(((h=s.guest)==null?void 0:h.phone)||((I=s.reportedBy)==null?void 0:I.phone)||""),[N,p]=i.useState(""),[R,A]=i.useState(!1),[f,D]=i.useState(((a=s.guest)==null?void 0:a.email)||((d=s.reportedBy)==null?void 0:d.email)||""),[E,x]=i.useState(""),[_,w]=i.useState(""),[C,P]=i.useState(""),[l,L]=i.useState(!1),O=t=>{var B,F;let S=t.content;const V=((B=s.guest||s.reportedBy)==null?void 0:B.firstName)||"Guest",Q=((F=s.assignedTo)==null?void 0:F.firstName)||"Team Member";S=S.replace(/\{\{guest_name\}\}/g,V),S=S.replace(/\{\{staff_name\}\}/g,Q),S=S.replace(/\{\{status_message\}\}/g,s.status),S=S.replace(/\{\{date_time\}\}/g,new Date().toLocaleString()),p(S)},U=async t=>{if(t.preventDefault(),!v){m("Please enter a phone number","error");return}if(!N){m("Please enter a message","error");return}A(!0);try{await r(s.id,v,N),p("")}finally{A(!1)}},G=t=>{var q,K;const S=t.subject,V=t.body_html,Q=t.body_text,B=((q=s.guest||s.reportedBy)==null?void 0:q.firstName)||"Guest",F=((K=s.assignedTo)==null?void 0:K.firstName)||"Team Member",ee=s.id.substring(0,8),z=se=>se.replace(/\{\{guest_name\}\}/g,B).replace(/\{\{staff_name\}\}/g,F).replace(/\{\{emergency_type\}\}/g,s.emergency_type).replace(/\{\{report_id\}\}/g,ee).replace(/\{\{status\}\}/g,s.status).replace(/\{\{update_message\}\}/g,"").replace(/\{\{date_time\}\}/g,new Date().toLocaleString()).replace(/\{\{maintenance_details\}\}/g,"");x(z(S)),w(z(V)),P(z(Q))},H=async t=>{if(t.preventDefault(),!f){m("Please enter an email address","error");return}if(!E){m("Please enter a subject","error");return}if(!_&&!C){m("Please enter a message body","error");return}L(!0);try{await j(s.id,{recipientEmail:f,subject:E,bodyHtml:_,bodyText:C||_e(_)}),x(""),w(""),P("")}finally{L(!1)}};return e.jsxs("div",{className:"communication-panel",children:[e.jsx("h2",{className:"communication-panel__title",children:"Communication"}),e.jsxs("div",{className:"communication-tabs",children:[e.jsxs("button",{className:`tab-button ${g==="sms"?"tab-button--active":""}`,onClick:()=>y("sms"),children:["SMS (",((o=s.messages)==null?void 0:o.length)||0,")"]}),e.jsxs("button",{className:`tab-button ${g==="email"?"tab-button--active":""}`,onClick:()=>y("email"),children:["Email (",((u=s.emails)==null?void 0:u.length)||0,")"]}),e.jsx("button",{className:`tab-button ${g==="history"?"tab-button--active":""}`,onClick:()=>y("history"),children:"History"})]}),g==="sms"&&e.jsx("div",{className:"tab-content",children:e.jsxs("form",{onSubmit:U,className:"communication-form",children:[c.length>0&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Quick Templates"}),e.jsx("div",{className:"preset-buttons",children:c.map(t=>e.jsx("button",{type:"button",className:"preset-button",onClick:()=>O(t),children:t.label},t.id))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"sms-recipient",children:"Recipient Phone"}),e.jsx("input",{type:"tel",id:"sms-recipient",value:v,onChange:t=>T(t.target.value),placeholder:"+1234567890",className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"sms-body",children:"Message"}),e.jsx("textarea",{id:"sms-body",value:N,onChange:t=>p(t.target.value),placeholder:"Type your message...",rows:4,className:"form-textarea"}),e.jsxs("span",{className:"char-count",children:[N.length,"/160"]})]}),e.jsx("button",{type:"submit",className:"btn btn--primary",disabled:R||!v||!N,children:R?"Sending...":"Send SMS"})]})}),g==="email"&&e.jsx("div",{className:"tab-content",children:e.jsxs("form",{onSubmit:H,className:"communication-form",children:[n.length>0&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Quick Templates"}),e.jsx("div",{className:"preset-buttons",children:n.map(t=>e.jsx("button",{type:"button",className:"preset-button",onClick:()=>G(t),children:t.label},t.id))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email-recipient",children:"Recipient Email"}),e.jsx("input",{type:"email",id:"email-recipient",value:f,onChange:t=>D(t.target.value),placeholder:"guest@example.com",className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email-subject",children:"Subject"}),e.jsx("input",{type:"text",id:"email-subject",value:E,onChange:t=>x(t.target.value),placeholder:"Email subject...",className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email-body",children:"Message (HTML)"}),e.jsx("textarea",{id:"email-body",value:_,onChange:t=>w(t.target.value),placeholder:"<p>Type your message...</p>",rows:6,className:"form-textarea"})]}),e.jsx("button",{type:"submit",className:"btn btn--primary",disabled:l||!f||!E||!_&&!C,children:l?"Sending...":"Send Email"})]})}),g==="history"&&e.jsx("div",{className:"tab-content",children:e.jsxs("div",{className:"communication-history",children:[e.jsx("h3",{children:"SMS History"}),((M=s.messages)==null?void 0:M.length)>0?e.jsx("ul",{className:"history-list",children:s.messages.map(t=>e.jsxs("li",{className:`history-item history-item--${t.status.toLowerCase()}`,children:[e.jsxs("div",{className:"history-item__header",children:[e.jsx("span",{className:"history-item__direction",children:t.direction}),e.jsx("span",{className:`history-item__status status--${t.status.toLowerCase()}`,children:t.status}),e.jsx("span",{className:"history-item__time",children:Z(t.created_at)})]}),e.jsxs("div",{className:"history-item__recipient",children:["To: ",t.recipient_phone]}),e.jsx("p",{className:"history-item__body",children:t.message_body}),t.error_message&&e.jsxs("p",{className:"history-item__error",children:["Error: ",t.error_message]})]},t.id))}):e.jsx("p",{className:"text-muted",children:"No SMS messages sent yet."}),e.jsx("h3",{children:"Email History"}),((W=s.emails)==null?void 0:W.length)>0?e.jsx("ul",{className:"history-list",children:s.emails.map(t=>e.jsxs("li",{className:`history-item history-item--${t.status.toLowerCase()}`,children:[e.jsxs("div",{className:"history-item__header",children:[e.jsx("span",{className:`history-item__status status--${t.status.toLowerCase()}`,children:t.status}),e.jsx("span",{className:"history-item__time",children:Z(t.created_at)})]}),e.jsxs("div",{className:"history-item__recipient",children:["To: ",t.recipient_email]}),e.jsxs("div",{className:"history-item__subject",children:["Subject: ",t.subject]}),t.error_message&&e.jsxs("p",{className:"history-item__error",children:["Error: ",t.error_message]})]},t.id))}):e.jsx("p",{className:"text-muted",children:"No emails sent yet."}),e.jsx("button",{onClick:b,className:"btn btn--secondary btn--small",children:"Refresh History"})]})})]})}function _e(s){const c=document.createElement("div");return c.innerHTML=s,c.textContent||c.innerText||""}function Z(s){return s?new Date(s).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function Se(){const{emergencies:s,selectedEmergency:c,teamMembers:n,presetMessages:r,presetEmails:j,loading:b,error:m,alertMessage:g,alertType:y,statusFilter:v,setStatusFilter:T,handleSelectEmergency:N,handleRefresh:p,handleAssign:R,handleUpdateStatus:A,handleUpdateVisibility:f,handleSendSMS:D,handleSendEmail:E,showAlert:x,clearAlert:_}=ue();return b?e.jsxs("div",{className:"internal-emergency-page",children:[e.jsx(J,{}),e.jsx("main",{className:"emergency-main",children:e.jsx("div",{className:"emergency-container",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading emergencies..."})]})})})]}):m?e.jsxs("div",{className:"internal-emergency-page",children:[e.jsx(J,{}),e.jsx("main",{className:"emergency-main",children:e.jsx("div",{className:"emergency-container",children:e.jsxs("div",{className:"error-state",children:[e.jsx("div",{className:"error-icon",children:"⚠"}),e.jsx("h2",{children:"Unable to Load Emergencies"}),e.jsx("p",{className:"error-message",children:m}),e.jsx("button",{onClick:p,className:"btn btn--primary",children:"Reload Page"})]})})})]}):e.jsxs("div",{className:"internal-emergency-page",children:[e.jsx(J,{}),e.jsx("main",{className:"emergency-main",children:e.jsxs("div",{className:"emergency-container",children:[e.jsxs("header",{className:"emergency-header",children:[e.jsx("h1",{children:"Emergency Management Dashboard"}),e.jsx("p",{className:"emergency-subtitle",children:"Manage guest-reported emergencies and communicate with guests"})]}),g&&e.jsxs("div",{className:`alert alert--${y}`,role:"alert",children:[e.jsx("span",{children:g}),e.jsx("button",{onClick:_,className:"alert__close","aria-label":"Close alert",children:"×"})]}),e.jsxs("div",{className:"emergency-layout",children:[e.jsxs("aside",{className:"emergency-sidebar",children:[e.jsxs("div",{className:"filter-controls",children:[e.jsx("label",{htmlFor:"status-filter",className:"filter-label",children:"Filter by Status:"}),e.jsxs("select",{id:"status-filter",value:v,onChange:w=>T(w.target.value),className:"filter-select",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"REPORTED",children:"Reported"}),e.jsx("option",{value:"ASSIGNED",children:"Assigned"}),e.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),e.jsx("option",{value:"RESOLVED",children:"Resolved"}),e.jsx("option",{value:"CLOSED",children:"Closed"})]}),e.jsx("button",{onClick:p,className:"btn btn--secondary btn--small",title:"Refresh emergencies",children:"Refresh"})]}),e.jsx(xe,{emergencies:s,selectedEmergency:c,onSelectEmergency:N})]}),e.jsx("div",{className:"emergency-main-panel",children:c?e.jsxs(e.Fragment,{children:[e.jsx(fe,{emergency:c,teamMembers:n,onAssign:R,onUpdateStatus:A,onUpdateVisibility:f,onAlert:x}),e.jsx(be,{emergency:c,presetMessages:r,presetEmails:j,onSendSMS:D,onSendEmail:E,onRefresh:p,onAlert:x})]}):e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state__icon",children:e.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})}),e.jsx("h2",{children:"No Emergency Selected"}),e.jsx("p",{children:"Select an emergency from the list to view details and communicate with the guest."})]})})]})]})})]})}te(document.getElementById("root")).render(e.jsx(ae.StrictMode,{children:e.jsx(Se,{})}));
