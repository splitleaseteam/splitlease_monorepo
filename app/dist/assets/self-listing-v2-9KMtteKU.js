import{R as L,r as f,j as e,c as Xt}from"./client-BJVKzfAi.js";import{H as qe}from"./Header-BJKWma2V.js";import{S as Jt}from"./proposalDataFetcher-CipdyWU2.js";import{u as Zt,T as es}from"./Toast-BQk6Nzgd.js";import{H as ts}from"./HostScheduleSelector-HOEnT3Yo.js";import{I as Y}from"./InformationalText-C-nhvRBy.js";import{c as ke,v as Re}from"./auth-QZ4BJadW.js";import{g as ss,c as ns}from"./listingService-CLUhv1SF.js";import{i as is}from"./isGuest-DSCtqO4x.js";import{s as Ne}from"./supabase-BoCLEw6R.js";import{N as je,i as as,b as ls,g as rs}from"./nycZipCodes-DGfN4kWJ.js";import{f as os}from"./informationalTextsFetcher-BGizEeKX.js";import{c as cs}from"./createLucideIcon-CgZZH2OU.js";import{E as ds}from"./ErrorBoundary-9_HbXv1y.js";/* empty css             */import"./config-QPKPRtag.js";import"./constants-CPVJY5eo.js";import"./proposalStatuses-1Bj0NYR4.js";import"./photoUpload-vf9LU0fY.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],us=cs("smartphone",hs);var gs=Object.defineProperty,Se=Object.getOwnPropertySymbols,st=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable,Ke=(u,h,t)=>h in u?gs(u,h,{enumerable:!0,configurable:!0,writable:!0,value:t}):u[h]=t,Me=(u,h)=>{for(var t in h||(h={}))st.call(h,t)&&Ke(u,t,h[t]);if(Se)for(var t of Se(h))nt.call(h,t)&&Ke(u,t,h[t]);return u},Ee=(u,h)=>{var t={};for(var g in u)st.call(u,g)&&h.indexOf(g)<0&&(t[g]=u[g]);if(u!=null&&Se)for(var g of Se(u))h.indexOf(g)<0&&nt.call(u,g)&&(t[g]=u[g]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var le;(u=>{const h=class C{constructor(s,a,i,r){if(this.version=s,this.errorCorrectionLevel=a,this.modules=[],this.isFunction=[],s<C.MIN_VERSION||s>C.MAX_VERSION)throw new RangeError("Version value out of range");if(r<-1||r>7)throw new RangeError("Mask value out of range");this.size=s*4+17;let c=[];for(let d=0;d<this.size;d++)c.push(!1);for(let d=0;d<this.size;d++)this.modules.push(c.slice()),this.isFunction.push(c.slice());this.drawFunctionPatterns();const m=this.addEccAndInterleave(i);if(this.drawCodewords(m),r==-1){let d=1e9;for(let j=0;j<8;j++){this.applyMask(j),this.drawFormatBits(j);const v=this.getPenaltyScore();v<d&&(r=j,d=v),this.applyMask(j)}}k(0<=r&&r<=7),this.mask=r,this.applyMask(r),this.drawFormatBits(r),this.isFunction=[]}static encodeText(s,a){const i=u.QrSegment.makeSegments(s);return C.encodeSegments(i,a)}static encodeBinary(s,a){const i=u.QrSegment.makeBytes(s);return C.encodeSegments([i],a)}static encodeSegments(s,a,i=1,r=40,c=-1,m=!0){if(!(C.MIN_VERSION<=i&&i<=r&&r<=C.MAX_VERSION)||c<-1||c>7)throw new RangeError("Invalid value");let d,j;for(d=i;;d++){const N=C.getNumDataCodewords(d,a)*8,E=D.getTotalBits(s,d);if(E<=N){j=E;break}if(d>=r)throw new RangeError("Data too long")}for(const N of[C.Ecc.MEDIUM,C.Ecc.QUARTILE,C.Ecc.HIGH])m&&j<=C.getNumDataCodewords(d,N)*8&&(a=N);let v=[];for(const N of s){t(N.mode.modeBits,4,v),t(N.numChars,N.mode.numCharCountBits(d),v);for(const E of N.getData())v.push(E)}k(v.length==j);const _=C.getNumDataCodewords(d,a)*8;k(v.length<=_),t(0,Math.min(4,_-v.length),v),t(0,(8-v.length%8)%8,v),k(v.length%8==0);for(let N=236;v.length<_;N^=253)t(N,8,v);let S=[];for(;S.length*8<v.length;)S.push(0);return v.forEach((N,E)=>S[E>>>3]|=N<<7-(E&7)),new C(d,a,S,c)}getModule(s,a){return 0<=s&&s<this.size&&0<=a&&a<this.size&&this.modules[a][s]}getModules(){return this.modules}drawFunctionPatterns(){for(let i=0;i<this.size;i++)this.setFunctionModule(6,i,i%2==0),this.setFunctionModule(i,6,i%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const s=this.getAlignmentPatternPositions(),a=s.length;for(let i=0;i<a;i++)for(let r=0;r<a;r++)i==0&&r==0||i==0&&r==a-1||i==a-1&&r==0||this.drawAlignmentPattern(s[i],s[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(s){const a=this.errorCorrectionLevel.formatBits<<3|s;let i=a;for(let c=0;c<10;c++)i=i<<1^(i>>>9)*1335;const r=(a<<10|i)^21522;k(r>>>15==0);for(let c=0;c<=5;c++)this.setFunctionModule(8,c,g(r,c));this.setFunctionModule(8,7,g(r,6)),this.setFunctionModule(8,8,g(r,7)),this.setFunctionModule(7,8,g(r,8));for(let c=9;c<15;c++)this.setFunctionModule(14-c,8,g(r,c));for(let c=0;c<8;c++)this.setFunctionModule(this.size-1-c,8,g(r,c));for(let c=8;c<15;c++)this.setFunctionModule(8,this.size-15+c,g(r,c));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let s=this.version;for(let i=0;i<12;i++)s=s<<1^(s>>>11)*7973;const a=this.version<<12|s;k(a>>>18==0);for(let i=0;i<18;i++){const r=g(a,i),c=this.size-11+i%3,m=Math.floor(i/3);this.setFunctionModule(c,m,r),this.setFunctionModule(m,c,r)}}drawFinderPattern(s,a){for(let i=-4;i<=4;i++)for(let r=-4;r<=4;r++){const c=Math.max(Math.abs(r),Math.abs(i)),m=s+r,d=a+i;0<=m&&m<this.size&&0<=d&&d<this.size&&this.setFunctionModule(m,d,c!=2&&c!=4)}}drawAlignmentPattern(s,a){for(let i=-2;i<=2;i++)for(let r=-2;r<=2;r++)this.setFunctionModule(s+r,a+i,Math.max(Math.abs(r),Math.abs(i))!=1)}setFunctionModule(s,a,i){this.modules[a][s]=i,this.isFunction[a][s]=!0}addEccAndInterleave(s){const a=this.version,i=this.errorCorrectionLevel;if(s.length!=C.getNumDataCodewords(a,i))throw new RangeError("Invalid argument");const r=C.NUM_ERROR_CORRECTION_BLOCKS[i.ordinal][a],c=C.ECC_CODEWORDS_PER_BLOCK[i.ordinal][a],m=Math.floor(C.getNumRawDataModules(a)/8),d=r-m%r,j=Math.floor(m/r);let v=[];const _=C.reedSolomonComputeDivisor(c);for(let N=0,E=0;N<r;N++){let O=s.slice(E,E+j-c+(N<d?0:1));E+=O.length;const Q=C.reedSolomonComputeRemainder(O,_);N<d&&O.push(0),v.push(O.concat(Q))}let S=[];for(let N=0;N<v[0].length;N++)v.forEach((E,O)=>{(N!=j-c||O>=d)&&S.push(E[N])});return k(S.length==m),S}drawCodewords(s){if(s.length!=Math.floor(C.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let a=0;for(let i=this.size-1;i>=1;i-=2){i==6&&(i=5);for(let r=0;r<this.size;r++)for(let c=0;c<2;c++){const m=i-c,j=(i+1&2)==0?this.size-1-r:r;!this.isFunction[j][m]&&a<s.length*8&&(this.modules[j][m]=g(s[a>>>3],7-(a&7)),a++)}}k(a==s.length*8)}applyMask(s){if(s<0||s>7)throw new RangeError("Mask value out of range");for(let a=0;a<this.size;a++)for(let i=0;i<this.size;i++){let r;switch(s){case 0:r=(i+a)%2==0;break;case 1:r=a%2==0;break;case 2:r=i%3==0;break;case 3:r=(i+a)%3==0;break;case 4:r=(Math.floor(i/3)+Math.floor(a/2))%2==0;break;case 5:r=i*a%2+i*a%3==0;break;case 6:r=(i*a%2+i*a%3)%2==0;break;case 7:r=((i+a)%2+i*a%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[a][i]&&r&&(this.modules[a][i]=!this.modules[a][i])}}getPenaltyScore(){let s=0;for(let c=0;c<this.size;c++){let m=!1,d=0,j=[0,0,0,0,0,0,0];for(let v=0;v<this.size;v++)this.modules[c][v]==m?(d++,d==5?s+=C.PENALTY_N1:d>5&&s++):(this.finderPenaltyAddHistory(d,j),m||(s+=this.finderPenaltyCountPatterns(j)*C.PENALTY_N3),m=this.modules[c][v],d=1);s+=this.finderPenaltyTerminateAndCount(m,d,j)*C.PENALTY_N3}for(let c=0;c<this.size;c++){let m=!1,d=0,j=[0,0,0,0,0,0,0];for(let v=0;v<this.size;v++)this.modules[v][c]==m?(d++,d==5?s+=C.PENALTY_N1:d>5&&s++):(this.finderPenaltyAddHistory(d,j),m||(s+=this.finderPenaltyCountPatterns(j)*C.PENALTY_N3),m=this.modules[v][c],d=1);s+=this.finderPenaltyTerminateAndCount(m,d,j)*C.PENALTY_N3}for(let c=0;c<this.size-1;c++)for(let m=0;m<this.size-1;m++){const d=this.modules[c][m];d==this.modules[c][m+1]&&d==this.modules[c+1][m]&&d==this.modules[c+1][m+1]&&(s+=C.PENALTY_N2)}let a=0;for(const c of this.modules)a=c.reduce((m,d)=>m+(d?1:0),a);const i=this.size*this.size,r=Math.ceil(Math.abs(a*20-i*10)/i)-1;return k(0<=r&&r<=9),s+=r*C.PENALTY_N4,k(0<=s&&s<=2568888),s}getAlignmentPatternPositions(){if(this.version==1)return[];{const s=Math.floor(this.version/7)+2,a=this.version==32?26:Math.ceil((this.version*4+4)/(s*2-2))*2;let i=[6];for(let r=this.size-7;i.length<s;r-=a)i.splice(1,0,r);return i}}static getNumRawDataModules(s){if(s<C.MIN_VERSION||s>C.MAX_VERSION)throw new RangeError("Version number out of range");let a=(16*s+128)*s+64;if(s>=2){const i=Math.floor(s/7)+2;a-=(25*i-10)*i-55,s>=7&&(a-=36)}return k(208<=a&&a<=29648),a}static getNumDataCodewords(s,a){return Math.floor(C.getNumRawDataModules(s)/8)-C.ECC_CODEWORDS_PER_BLOCK[a.ordinal][s]*C.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][s]}static reedSolomonComputeDivisor(s){if(s<1||s>255)throw new RangeError("Degree out of range");let a=[];for(let r=0;r<s-1;r++)a.push(0);a.push(1);let i=1;for(let r=0;r<s;r++){for(let c=0;c<a.length;c++)a[c]=C.reedSolomonMultiply(a[c],i),c+1<a.length&&(a[c]^=a[c+1]);i=C.reedSolomonMultiply(i,2)}return a}static reedSolomonComputeRemainder(s,a){let i=a.map(r=>0);for(const r of s){const c=r^i.shift();i.push(0),a.forEach((m,d)=>i[d]^=C.reedSolomonMultiply(m,c))}return i}static reedSolomonMultiply(s,a){if(s>>>8||a>>>8)throw new RangeError("Byte out of range");let i=0;for(let r=7;r>=0;r--)i=i<<1^(i>>>7)*285,i^=(a>>>r&1)*s;return k(i>>>8==0),i}finderPenaltyCountPatterns(s){const a=s[1];k(a<=this.size*3);const i=a>0&&s[2]==a&&s[3]==a*3&&s[4]==a&&s[5]==a;return(i&&s[0]>=a*4&&s[6]>=a?1:0)+(i&&s[6]>=a*4&&s[0]>=a?1:0)}finderPenaltyTerminateAndCount(s,a,i){return s&&(this.finderPenaltyAddHistory(a,i),a=0),a+=this.size,this.finderPenaltyAddHistory(a,i),this.finderPenaltyCountPatterns(i)}finderPenaltyAddHistory(s,a){a[0]==0&&(s+=this.size),a.pop(),a.unshift(s)}};h.MIN_VERSION=1,h.MAX_VERSION=40,h.PENALTY_N1=3,h.PENALTY_N2=3,h.PENALTY_N3=40,h.PENALTY_N4=10,h.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],h.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],u.QrCode=h;function t(M,s,a){if(s<0||s>31||M>>>s)throw new RangeError("Value out of range");for(let i=s-1;i>=0;i--)a.push(M>>>i&1)}function g(M,s){return(M>>>s&1)!=0}function k(M){if(!M)throw new Error("Assertion error")}const y=class I{constructor(s,a,i){if(this.mode=s,this.numChars=a,this.bitData=i,a<0)throw new RangeError("Invalid argument");this.bitData=i.slice()}static makeBytes(s){let a=[];for(const i of s)t(i,8,a);return new I(I.Mode.BYTE,s.length,a)}static makeNumeric(s){if(!I.isNumeric(s))throw new RangeError("String contains non-numeric characters");let a=[];for(let i=0;i<s.length;){const r=Math.min(s.length-i,3);t(parseInt(s.substring(i,i+r),10),r*3+1,a),i+=r}return new I(I.Mode.NUMERIC,s.length,a)}static makeAlphanumeric(s){if(!I.isAlphanumeric(s))throw new RangeError("String contains unencodable characters in alphanumeric mode");let a=[],i;for(i=0;i+2<=s.length;i+=2){let r=I.ALPHANUMERIC_CHARSET.indexOf(s.charAt(i))*45;r+=I.ALPHANUMERIC_CHARSET.indexOf(s.charAt(i+1)),t(r,11,a)}return i<s.length&&t(I.ALPHANUMERIC_CHARSET.indexOf(s.charAt(i)),6,a),new I(I.Mode.ALPHANUMERIC,s.length,a)}static makeSegments(s){return s==""?[]:I.isNumeric(s)?[I.makeNumeric(s)]:I.isAlphanumeric(s)?[I.makeAlphanumeric(s)]:[I.makeBytes(I.toUtf8ByteArray(s))]}static makeEci(s){let a=[];if(s<0)throw new RangeError("ECI assignment value out of range");if(s<128)t(s,8,a);else if(s<16384)t(2,2,a),t(s,14,a);else if(s<1e6)t(6,3,a),t(s,21,a);else throw new RangeError("ECI assignment value out of range");return new I(I.Mode.ECI,0,a)}static isNumeric(s){return I.NUMERIC_REGEX.test(s)}static isAlphanumeric(s){return I.ALPHANUMERIC_REGEX.test(s)}getData(){return this.bitData.slice()}static getTotalBits(s,a){let i=0;for(const r of s){const c=r.mode.numCharCountBits(a);if(r.numChars>=1<<c)return 1/0;i+=4+c+r.bitData.length}return i}static toUtf8ByteArray(s){s=encodeURI(s);let a=[];for(let i=0;i<s.length;i++)s.charAt(i)!="%"?a.push(s.charCodeAt(i)):(a.push(parseInt(s.substring(i+1,i+3),16)),i+=2);return a}};y.NUMERIC_REGEX=/^[0-9]*$/,y.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,y.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let D=y;u.QrSegment=y})(le||(le={}));(u=>{(h=>{const t=class{constructor(k,y){this.ordinal=k,this.formatBits=y}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),h.Ecc=t})(u.QrCode||(u.QrCode={}))})(le||(le={}));(u=>{(h=>{const t=class{constructor(k,y){this.modeBits=k,this.numBitsCharCount=y}numCharCountBits(k){return this.numBitsCharCount[Math.floor((k+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),h.Mode=t})(u.QrSegment||(u.QrSegment={}))})(le||(le={}));var he=le;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var ms={L:he.QrCode.Ecc.LOW,M:he.QrCode.Ecc.MEDIUM,Q:he.QrCode.Ecc.QUARTILE,H:he.QrCode.Ecc.HIGH},it=128,at="L",lt="#FFFFFF",rt="#000000",ot=!1,ct=1,ps=4,fs=0,ys=.1;function dt(u,h=0){const t=[];return u.forEach(function(g,k){let y=null;g.forEach(function(D,M){if(!D&&y!==null){t.push(`M${y+h} ${k+h}h${M-y}v1H${y+h}z`),y=null;return}if(M===g.length-1){if(!D)return;y===null?t.push(`M${M+h},${k+h} h1v1H${M+h}z`):t.push(`M${y+h},${k+h} h${M+1-y}v1H${y+h}z`);return}D&&y===null&&(y=M)})}),t.join("")}function ht(u,h){return u.slice().map((t,g)=>g<h.y||g>=h.y+h.h?t:t.map((k,y)=>y<h.x||y>=h.x+h.w?k:!1))}function xs(u,h,t,g){if(g==null)return null;const k=u.length+t*2,y=Math.floor(h*ys),D=k/h,M=(g.width||y)*D,s=(g.height||y)*D,a=g.x==null?u.length/2-M/2:g.x*D,i=g.y==null?u.length/2-s/2:g.y*D,r=g.opacity==null?1:g.opacity;let c=null;if(g.excavate){let d=Math.floor(a),j=Math.floor(i),v=Math.ceil(M+a-d),_=Math.ceil(s+i-j);c={x:d,y:j,w:v,h:_}}const m=g.crossOrigin;return{x:a,y:i,h:s,w:M,excavation:c,opacity:r,crossOrigin:m}}function vs(u,h){return h!=null?Math.max(Math.floor(h),0):u?ps:fs}function ut({value:u,level:h,minVersion:t,includeMargin:g,marginSize:k,imageSettings:y,size:D,boostLevel:M}){let s=L.useMemo(()=>{const d=(Array.isArray(u)?u:[u]).reduce((j,v)=>(j.push(...he.QrSegment.makeSegments(v)),j),[]);return he.QrCode.encodeSegments(d,ms[h],t,void 0,void 0,M)},[u,h,t,M]);const{cells:a,margin:i,numCells:r,calculatedImageSettings:c}=L.useMemo(()=>{let m=s.getModules();const d=vs(g,k),j=m.length+d*2,v=xs(m,D,d,y);return{cells:m,margin:d,numCells:j,calculatedImageSettings:v}},[s,D,y,g,k]);return{qrcode:s,margin:i,cells:a,numCells:r,calculatedImageSettings:c}}var bs=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),ws=L.forwardRef(function(h,t){const g=h,{value:k,size:y=it,level:D=at,bgColor:M=lt,fgColor:s=rt,includeMargin:a=ot,minVersion:i=ct,boostLevel:r,marginSize:c,imageSettings:m}=g,j=Ee(g,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:v}=j,_=Ee(j,["style"]),S=m==null?void 0:m.src,N=L.useRef(null),E=L.useRef(null),O=L.useCallback(q=>{N.current=q,typeof t=="function"?t(q):t&&(t.current=q)},[t]),[Q,ue]=L.useState(!1),{margin:G,cells:Z,numCells:ee,calculatedImageSettings:F}=ut({value:k,level:D,minVersion:i,boostLevel:r,includeMargin:a,marginSize:c,imageSettings:m,size:y});L.useEffect(()=>{if(N.current!=null){const q=N.current,T=q.getContext("2d");if(!T)return;let re=Z;const J=E.current,ge=F!=null&&J!==null&&J.complete&&J.naturalHeight!==0&&J.naturalWidth!==0;ge&&F.excavation!=null&&(re=ht(Z,F.excavation));const me=window.devicePixelRatio||1;q.height=q.width=y*me;const be=y/ee*me;T.scale(be,be),T.fillStyle=M,T.fillRect(0,0,ee,ee),T.fillStyle=s,bs?T.fill(new Path2D(dt(re,G))):Z.forEach(function(pe,we){pe.forEach(function(fe,oe){fe&&T.fillRect(oe+G,we+G,1,1)})}),F&&(T.globalAlpha=F.opacity),ge&&T.drawImage(J,F.x+G,F.y+G,F.w,F.h)}}),L.useEffect(()=>{ue(!1)},[S]);const te=Me({height:y,width:y},v);let ve=null;return S!=null&&(ve=L.createElement("img",{src:S,key:S,style:{display:"none"},onLoad:()=>{ue(!0)},ref:E,crossOrigin:F==null?void 0:F.crossOrigin})),L.createElement(L.Fragment,null,L.createElement("canvas",Me({style:te,height:y,width:y,ref:O,role:"img"},_)),ve)});ws.displayName="QRCodeCanvas";var gt=L.forwardRef(function(h,t){const g=h,{value:k,size:y=it,level:D=at,bgColor:M=lt,fgColor:s=rt,includeMargin:a=ot,minVersion:i=ct,boostLevel:r,title:c,marginSize:m,imageSettings:d}=g,j=Ee(g,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:v,cells:_,numCells:S,calculatedImageSettings:N}=ut({value:k,level:D,minVersion:i,boostLevel:r,includeMargin:a,marginSize:m,imageSettings:d,size:y});let E=_,O=null;d!=null&&N!=null&&(N.excavation!=null&&(E=ht(_,N.excavation)),O=L.createElement("image",{href:d.src,height:N.h,width:N.w,x:N.x+v,y:N.y+v,preserveAspectRatio:"none",opacity:N.opacity,crossOrigin:N.crossOrigin}));const Q=dt(E,v);return L.createElement("svg",Me({height:y,width:y,viewBox:`0 0 ${S} ${S}`,ref:t,role:"img"},j),!!c&&L.createElement("title",null,c),L.createElement("path",{fill:M,d:`M0,0 h${S}v${S}H0z`,shapeRendering:"crispEdges"}),L.createElement("path",{fill:s,d:Q,shapeRendering:"crispEdges"}),O)});gt.displayName="QRCodeSVG";const Xe={hostType:"resident",marketStrategy:"private",leaseStyle:"nightly",selectedNights:["monday","tuesday","wednesday","thursday","friday"],weeklyPattern:"1on1off",monthlyAgreement:!0,nightlyBaseRate:100,nightlyDiscount:20,weeklyTotal:0,monthlyEstimate:0,price:2e3,frequency:"Month",utilitiesIncluded:!0,utilityCost:150,securityDeposit:1e3,cleaningFee:150,typeOfSpace:"",address:{fullAddress:"",number:"",street:"",city:"",state:"",zip:"",neighborhood:"",latitude:null,longitude:null,validated:!1},bedrooms:"1",bathrooms:"1",photos:[]},de="selfListingV2Draft",Je="selfListingV2LastHostType",Ze="selfListingV2LastMarketStrategy",et=[{id:"resident",description:"I live in the property part-time and rent out the nights I'm away."},{id:"liveout",description:"I own or rent the property but do not live there."},{id:"coliving",description:"I live in the property and rent out a private room in my space."},{id:"agent",description:"I manage listings for landlords."}],tt=[{value:"1on1off",label:"One week on and one week off"},{value:"2on2off",label:"Two weeks on and two weeks off"},{value:"1on3off",label:"One week on and three weeks off"}];function Ns(){const[u,h]=f.useState(1),[t,g]=f.useState(Xe),[k,y]=f.useState(!1),[D,M]=f.useState(!1),[s,a]=f.useState(!1),[i,r]=f.useState(!1),[c,m]=f.useState(!1),[d,j]=f.useState(null),[v,_]=f.useState(0),S=f.useRef([100,95,90,86,82,78,74]),N=f.useRef(null),E=f.useRef(null),[O,Q]=f.useState(null),[ue,G]=f.useState(!1),[Z,ee]=f.useState(null),[F,te]=f.useState(null),[ve,q]=f.useState(!1),[T,re]=f.useState(null),[J,ge]=f.useState(""),[me,be]=f.useState(null),[pe,we]=f.useState(!1),[fe,oe]=f.useState(null),[Ss,mt]=f.useState(!1),[Cs,pt]=f.useState(null),{toasts:ft,showToast:z,removeToast:yt}=Zt(),[K,$]=f.useState({}),[W,V]=f.useState(null),[xt,vt]=f.useState({}),Pe=f.useRef(null),Ae=f.useRef(null),Ie=f.useRef(null),De=f.useRef(null),Le=f.useRef(null),Te=f.useRef(null),Ce=f.useRef(null),Oe=f.useRef(null),_e=f.useRef(null),bt=f.useRef(null),Fe=f.useRef(null),wt={leaseStyleNightly:{title:"Nightly Rental",dbTag:"Nightly Rental",fallbackContent:"Rent by the night with flexible availability. Perfect for hosts who want maximum control over their schedule.",fallbackExpanded:"With nightly rentals, you can select specific nights of the week to make available. Guests book individual nights, and you receive payment for each night booked. This model offers the highest flexibility but requires more active management."},leaseStyleWeekly:{title:"Weekly Rental",dbTag:"Weekly Rental",fallbackContent:"Rent in weekly patterns with consistent schedules. Ideal for hosts with predictable routines.",fallbackExpanded:'Weekly rentals allow you to set patterns like "one week on, one week off." This provides predictable income and less turnover than nightly rentals while maintaining some flexibility.'},leaseStyleMonthly:{title:"Monthly Rental",dbTag:"Monthly Rental",fallbackContent:"Traditional month-to-month rental with stable, predictable income.",fallbackExpanded:"With monthly rentals, you receive a fixed monthly rate regardless of how many nights your guest uses. Split Lease may sublease unused nights to maximize occupancy. This model offers the most predictable income with minimal management."},baseNightlyRate:{title:"Base Nightly Rate",dbTag:"Base Nightly Rate",fallbackContent:"This is your starting price per night. Consecutive nights automatically get discounted based on your Long Stay Discount setting.",fallbackExpanded:"Set this to the rate you want for a single night stay. Multi-night bookings will be cheaper per night, encouraging longer stays and reducing your turnover effort."},longStayDiscount:{title:"Long Stay Discount",dbTag:"Long Stay Discount",fallbackContent:"The percentage discount applied to consecutive nights. Higher discounts encourage longer bookings.",fallbackExpanded:"A 20% discount means each consecutive night gets progressively cheaper. For example, if your base rate is $100, night 2 might be $95, night 3 might be $90, and so on. This creates an incentive for guests to book longer stays."},damageDeposit:{title:"Damage Deposit",dbTag:"Damage Deposit",fallbackContent:"A refundable security deposit to protect your property against damages during the stay.",fallbackExpanded:"The damage deposit is held during the guest's stay and returned within 7 days after checkout, minus any deductions for damages. We recommend a minimum of $500 for adequate protection."},cleaningFee:{title:"Maintenance Fee",dbTag:"Regular Maintenance Fee",fallbackContent:"A recurring monthly fee to cover cleaning and maintenance costs between guest stays.",fallbackExpanded:"Typically, a fee for cleaning and maintenance is charged every four weeks. This includes DIY or housekeeper cleaning costs."},desiredRent:{title:"Desired Rent",dbTag:"Desired Rent",fallbackContent:"The total amount you want to receive for each rental period (weekly or monthly).",fallbackExpanded:"This is your take-home amount before any Split Lease service fees. Set this based on your costs (mortgage, utilities, etc.) plus your desired profit margin."},securityDeposit:{title:"Security Deposit",dbTag:"Security Deposit",fallbackContent:"A refundable deposit held for the duration of the lease to cover potential damages.",fallbackExpanded:"For weekly and monthly rentals, we recommend at least one week or month's rent as a security deposit. This is refunded at the end of the lease if no damages occur."},utilities:{title:"Utilities",dbTag:"Utilities",fallbackContent:"Specify whether utilities are included in the rent or charged separately.",fallbackExpanded:"If utilities are not included, specify the estimated monthly cost so guests know what to expect. Common utilities include electricity, gas, water, internet, and trash removal."},schedule:{title:"Schedule Information",dbTag:"Schedule Information",fallbackContent:"This shows how many nights per week you've selected to make available for guests.",fallbackExpanded:"With Split Lease, you can select specific nights of the week to share your space. You keep access to your home on the nights you don't select. The more nights you offer, the more you can earn."}},b=n=>{const l=wt[n];if(!l)return{title:"",content:"",expandedContent:"",showMore:!1};const o=xt[l.dbTag];return{title:l.title,content:(o==null?void 0:o.desktop)||l.fallbackContent,expandedContent:(o==null?void 0:o.desktopPlus)||l.fallbackExpanded,showMore:(o==null?void 0:o.showMore)??!0}},X=n=>l=>{l.stopPropagation(),V(W===n?null:n)};f.useEffect(()=>{(async()=>{const l=await os();vt(l)})()},[]);const[Nt,$e]=f.useState(!0);f.useEffect(()=>{(async()=>{if(console.log("ðŸ” SelfListingPageV2: Checking access control..."),!await ke()){console.log("âœ… SelfListingPageV2: User is logged out - access allowed"),$e(!1);return}const o=await Re({clearOnFailure:!1}),p=o==null?void 0:o.userType;if(console.log("ðŸ” SelfListingPageV2: User type:",p),is({userType:p})){console.log("âŒ SelfListingPageV2: Guest user detected - redirecting to index"),window.location.href="/";return}console.log("âœ… SelfListingPageV2: Host user - access allowed"),$e(!1)})()},[]),f.useEffect(()=>{const n=localStorage.getItem(de);if(n)try{const l=JSON.parse(n);l.formData&&g({...Xe,...l.formData}),l.currentStep&&l.currentStep>=1&&l.currentStep<=8&&h(l.currentStep)}catch(l){console.error("Failed to load draft:",l)}else{const l=localStorage.getItem(Je),o=localStorage.getItem(Ze),p={};l&&["resident","liveout","coliving","agent"].includes(l)&&(p.hostType=l),o&&["private","public"].includes(o)&&(p.marketStrategy=o),Object.keys(p).length>0&&g(R=>({...R,...p}))}},[]),f.useEffect(()=>{localStorage.setItem(de,JSON.stringify({formData:t,currentStep:u}))},[t,u]),f.useEffect(()=>{(async()=>{const l=await ke();if(y(l),l)try{const o=await Re({clearOnFailure:!1});o!=null&&o.phoneNumber&&(be(o.phoneNumber),ge(o.phoneNumber))}catch{console.log("Could not fetch user data for phone number")}})()},[]),f.useEffect(()=>{(async()=>{const l=new URLSearchParams(window.location.search),o=l.get("id"),p=l.get("draft"),R=l.get("session"),x=l.get("step");if(o){console.log("[SelfListingPageV2] Edit mode detected, loading listing:",o),mt(!0),pt(o);try{const w=await ss(o);w?(localStorage.removeItem(de),g(A=>({...A,hostType:w.host_type||A.hostType})),console.log("[SelfListingPageV2] Listing loaded, hostType pre-set to:",w.host_type)):console.warn("[SelfListingPageV2] Listing not found:",o)}catch(w){console.error("[SelfListingPageV2] Failed to load listing for editing:",w)}window.history.replaceState({},"",window.location.pathname);return}if(p)try{const{data:w,error:A}=await Ne.from("listing_drafts").select("form_data, current_step").eq("id",p).single();!A&&w&&(g(w.form_data),w.form_data.nightlyPrices&&(S.current=w.form_data.nightlyPrices),h(w.current_step||7),oe(p))}catch(w){console.log("Could not load draft from database:",w)}else if(R){const w=localStorage.getItem(`${de}_session_${R}`);if(w)try{const A=JSON.parse(w);A.formData&&(g(A.formData),A.formData.nightlyPrices&&(S.current=A.formData.nightlyPrices)),h(A.currentStep||7),oe(R)}catch(A){console.log("Could not parse localStorage draft:",A)}}if(x){const w=parseInt(x,10);w>=1&&w<=8&&h(w)}(p||R)&&window.history.replaceState({},"",window.location.pathname)})()},[]);const jt=f.useCallback(()=>{const{nightlyBaseRate:n,nightlyDiscount:l}=t,o=n*(1-l/100),p=n>0?Math.pow(o/n,.25):1,R=Math.max(.7,Math.min(1,p)),x=[Math.ceil(n)];for(let B=1;B<7;B++)x.push(Math.ceil(x[B-1]*R));S.current=x;const w=t.selectedNights.length;let A=0;for(let B=0;B<w&&B<x.length;B++)A+=x[B];g(B=>({...B,weeklyTotal:A,monthlyEstimate:A*4.33}))},[t.nightlyBaseRate,t.nightlyDiscount,t.selectedNights]);f.useEffect(()=>{t.leaseStyle==="nightly"&&jt()},[t.nightlyBaseRate,t.nightlyDiscount,t.selectedNights,t.leaseStyle]),f.useEffect(()=>{if(u!==6)return;let n=0;const l=50,o=()=>{if(!window.google||!window.google.maps||!window.google.maps.places){n++,n<l?setTimeout(o,100):Q("Address autocomplete is unavailable. Please enter your address manually.");return}if(!N.current)return;const p=new window.google.maps.LatLngBounds(new window.google.maps.LatLng(je.south,je.west),new window.google.maps.LatLng(je.north,je.east)),R=new window.google.maps.places.Autocomplete(N.current,{types:["address"],componentRestrictions:{country:"us"},bounds:p,strictBounds:!0,fields:["address_components","formatted_address","geometry","name","place_id"]});E.current=R,window.google.maps.event.addDomListener(N.current,"keydown",x=>{x.key==="Enter"&&x.preventDefault()}),R.addListener("place_changed",()=>{var Qe,Ge;const x=R.getPlace();if(!x.place_id||!x.geometry||!x.address_components){Q("Please select a valid address from the dropdown"),G(!1);return}let w="",A="",B="",ye="",ie="",Ye="",ae="";if(x.address_components.forEach(U=>{const H=U.types;H.includes("street_number")&&(w=U.long_name),H.includes("route")&&(A=U.long_name),H.includes("locality")&&(B=U.long_name),H.includes("administrative_area_level_1")&&(ye=U.short_name),H.includes("administrative_area_level_2")&&(ae=U.long_name),H.includes("postal_code")&&(ie=U.long_name),(H.includes("neighborhood")||H.includes("sublocality"))&&(Ye=U.long_name)}),!as(ie,ye,ae)){const U=ie?rs(ie):null,H=ae?ls(ae):null;let xe;U?xe=`This address (zip: ${ie}) is outside our service area. We only accept listings in NYC and Hudson County, NJ.`:ye==="NJ"&&ae?xe=`This address is outside our service area. We only accept listings in Hudson County, NJ, not ${ae}.`:H?xe=`This address in ${H} couldn't be validated. Please try selecting a more specific address.`:xe="This address is outside our NYC / Hudson County service area.",console.warn("Address validation failed:",{zip:ie,state:ye,county:ae,boroughFromZip:U,boroughFromCounty:H}),Q(xe),G(!1);return}const Kt={fullAddress:x.formatted_address||"",number:w,street:A,city:B,state:ye,zip:ie,neighborhood:Ye,latitude:((Qe=x.geometry.location)==null?void 0:Qe.lat())||null,longitude:((Ge=x.geometry.location)==null?void 0:Ge.lng())||null,validated:!0};P({address:Kt}),Q(null),G(!0),$(U=>({...U,address:!1}))})};return o(),()=>{var p,R,x;E.current&&((x=(R=(p=window.google)==null?void 0:p.maps)==null?void 0:R.event)==null||x.clearInstanceListeners(E.current))}},[u]);const St=n=>{const l=n.target.value;G(!1),Q(null),K.address&&$(o=>({...o,address:!1})),P({address:{...t.address,fullAddress:l,validated:!1}})},P=n=>{g(l=>({...l,...n}))},Ct=n=>{P({selectedNights:n}),n.length>=2&&K.nightSelector&&$(l=>({...l,nightSelector:!1}))},Be=()=>{const n=t.selectedNights.length,o=n===5&&["monday","tuesday","wednesday","thursday","friday"].every(p=>t.selectedNights.includes(p));return n<2?{text:"Select at least 2 nights",error:!0}:o?{text:"Weekdays Only (You keep weekends!)",error:!1}:{text:`${n} Nights / Week`,error:!1}},Ue=n=>n===3?t.leaseStyle==="nightly"?4:5:n===4?6:n+1,kt=n=>n===6?t.leaseStyle==="nightly"?4:5:n===5||n===4?3:n-1,ze=n=>t.leaseStyle==="nightly"?{1:1,2:2,3:3,4:4,6:5,7:6,8:7}[n]||n:{1:1,2:2,3:3,5:4,6:5,7:6,8:7}[n]||n,ce=f.useCallback(n=>{const l=document.getElementById(n);l&&(l.scrollIntoView({behavior:"smooth",block:"center"}),l.focus())},[]),Rt=n=>{switch($({}),n){case 3:return t.leaseStyle==="nightly"&&t.selectedNights.length<2?(z("Please select at least 2 nights","error",4e3),$({nightSelector:!0}),ce("nightSelector"),!1):t.leaseStyle==="monthly"&&!t.monthlyAgreement?(z("You must agree to the terms or select a different rental style.","error",4e3),$({monthlyAgreement:!0}),ce("monthlyAgreement"),!1):!0;case 5:return!t.price||t.price<=0?(z("Please enter a price","error",4e3),$({price:!0}),ce("price"),!1):!0;case 6:return t.typeOfSpace?t.address.fullAddress.trim()?t.address.validated?!0:(z("Please select a valid address from the dropdown suggestions","error",4e3),$({address:!0}),ce("address"),!1):(z("Please enter your address","error",4e3),$({address:!0}),ce("address"),!1):(z("Please select a type of space","error",4e3),$({typeOfSpace:!0}),ce("typeOfSpace"),!1);case 7:return!0;default:return!0}},se=()=>{if(!Rt(u))return;const n=Ue(u);n<=8&&(h(n),window.scrollTo({top:0,behavior:"smooth"}))},ne=()=>{const n=kt(u);n>=1&&(h(n),window.scrollTo({top:0,behavior:"smooth"}))},Mt=()=>{const n=Ue(u);n<=8&&(h(n),window.scrollTo({top:0,behavior:"smooth"}))},We=async()=>{var n;we(!0);try{const{data:{user:l}}=await Ne.auth.getUser();if(!l)throw new Error("User not authenticated");const o={user_id:l.id,form_data:{...t,nightlyPrices:S.current},current_step:7,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};let p=fe;if(fe){const{error:w}=await Ne.from("listing_drafts").update({form_data:o.form_data,current_step:o.current_step,updated_at:o.updated_at}).eq("id",fe);if(w)throw w}else{const{data:w,error:A}=await Ne.from("listing_drafts").insert(o).select("id").single();if(A)throw A;p=w.id,oe(p)}const x=`${window.location.origin+window.location.pathname}?draft=${p}&step=7`;return re(x),x}catch(l){if(console.error("Failed to save draft listing:",l),(n=l==null?void 0:l.message)!=null&&n.includes("listing_drafts")||(l==null?void 0:l.code)==="42P01"){console.log("Falling back to localStorage-based draft saving");const o=`draft_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,p={formData:{...t,nightlyPrices:S.current},currentStep:7,createdAt:new Date().toISOString()};localStorage.setItem(`${de}_session_${o}`,JSON.stringify(p));const x=`${window.location.origin+window.location.pathname}?session=${o}`;return re(x),oe(o),x}return z("Failed to save progress. Please try again.","error",4e3),null}finally{we(!1)}},Et=async()=>{if(!k){z("Please log in to save your progress and continue on phone","info",4e3),M(!0);return}q(!0),await We()},Pt=()=>{M(!1),y(!0),_(n=>n+1),s&&(a(!1),Ve())},Ve=async()=>{r(!0);let l=!!await Re({clearOnFailure:!1});if(l||(l=await ke(),console.log("[SelfListingPageV2] Edge Function failed, checking Supabase session:",l)),y(l),!l){console.log("[SelfListingPageV2] User not logged in, showing auth modal"),r(!1),M(!0),a(!0);return}console.log("[SelfListingPageV2] User is logged in, proceeding with submission");try{const o=At(t),p=await ns(o);console.log("[SelfListingPageV2] Listing created:",p),j(p._id),m(!0),localStorage.setItem(Je,t.hostType),localStorage.setItem(Ze,t.marketStrategy),localStorage.removeItem(de)}catch(o){console.error("[SelfListingPageV2] Submit error:",o),alert("Failed to create listing. Please try again."),r(!1)}},At=n=>{const l={sunday:!0,monday:!0,tuesday:!0,wednesday:!0,thursday:!0,friday:!0,saturday:!0},o=n.leaseStyle==="nightly"?{sunday:n.selectedNights.includes("sunday"),monday:n.selectedNights.includes("monday"),tuesday:n.selectedNights.includes("tuesday"),wednesday:n.selectedNights.includes("wednesday"),thursday:n.selectedNights.includes("thursday"),friday:n.selectedNights.includes("friday"),saturday:n.selectedNights.includes("saturday")}:l,p=n.leaseStyle==="nightly"?{oneNightPrice:n.nightlyBaseRate,discountPercentage:n.nightlyDiscount,decayRate:Math.pow(1-n.nightlyDiscount/100,.25),calculatedRates:{night1:S.current[0],night2:S.current[1],night3:S.current[2],night4:S.current[3],night5:S.current[4],night6:S.current[5],night7:S.current[6]}}:null;return{hostType:n.hostType,marketStrategy:n.marketStrategy,source_type:"self-listing-v2",spaceSnapshot:{listingName:`${n.bedrooms} Bedroom ${n.typeOfSpace||"Space"} in ${n.address.neighborhood||n.address.city||"NYC"}`,typeOfSpace:n.typeOfSpace||"Entire Place",bedrooms:parseInt(n.bedrooms)||1,beds:parseInt(n.bedrooms)||1,bathrooms:n.bathrooms==="Shared"?1:parseFloat(n.bathrooms)||1,typeOfKitchen:"Full Kitchen",typeOfParking:"No Parking",address:{fullAddress:n.address.fullAddress,number:n.address.number,street:n.address.street,city:n.address.city,state:n.address.state,zip:n.address.zip,neighborhood:n.address.neighborhood,latitude:n.address.latitude,longitude:n.address.longitude,validated:n.address.validated}},features:{amenitiesInsideUnit:[],amenitiesOutsideUnit:[],descriptionOfLodging:`${n.bedrooms} bedroom ${(n.typeOfSpace||"space").toLowerCase()} available for ${n.leaseStyle} rental.`,neighborhoodDescription:""},leaseStyles:{rentalType:n.leaseStyle.charAt(0).toUpperCase()+n.leaseStyle.slice(1),availableNights:o,weeklyPattern:n.leaseStyle==="weekly"?n.weeklyPattern:"",subsidyAgreement:n.leaseStyle==="monthly"?n.monthlyAgreement:!1},pricing:{damageDeposit:n.leaseStyle==="nightly"?500:n.securityDeposit,maintenanceFee:n.leaseStyle==="nightly"?0:n.cleaningFee,extraCharges:n.leaseStyle!=="nightly"&&!n.utilitiesIncluded?n.utilityCost:null,weeklyCompensation:n.leaseStyle==="weekly"?n.price:null,monthlyCompensation:n.leaseStyle==="monthly"?n.price:null,nightlyPricing:p},rules:{cancellationPolicy:"Standard",preferredGender:"No Preference",numberOfGuests:2,checkInTime:"2:00 PM",checkOutTime:"11:00 AM",idealMinDuration:2,idealMaxDuration:52,houseRules:[],blockedDates:[]},photos:{photos:n.photos.map((R,x)=>({id:R.id,url:R.url,file:R.file,caption:"",displayOrder:x})),minRequired:0},review:{safetyFeatures:[],squareFootage:null,firstDayAvailable:new Date().toISOString().split("T")[0],agreedToTerms:!0,optionalNotes:"",previousReviewsLink:""},isSubmitted:!0,isDraft:!1}},It=ze(u)/7*100,He=()=>e.jsxs("div",{className:"section-card",children:[e.jsx("h2",{children:"Who are you?"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Select your host type"}),e.jsx("div",{className:"privacy-options",children:et.map(n=>e.jsxs("div",{className:`privacy-card ${t.hostType===n.id?"selected":""}`,onClick:()=>P({hostType:n.id}),children:[e.jsx("div",{className:"privacy-radio"}),e.jsx("div",{className:"privacy-content",children:e.jsx("p",{children:n.description})})]},n.id))})]}),e.jsx("div",{className:"btn-group",children:e.jsx("button",{className:"btn-next",onClick:se,children:"Continue"})})]}),Dt=()=>e.jsxs("div",{className:"section-card",children:[e.jsx("h2",{children:"Market Strategy"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"How should we market it?"}),e.jsxs("div",{className:"privacy-options",children:[e.jsxs("div",{className:`privacy-card ${t.marketStrategy==="private"?"selected":""}`,onClick:()=>P({marketStrategy:"private"}),children:[e.jsx("div",{className:"privacy-radio"}),e.jsxs("div",{className:"privacy-content",children:[e.jsx("h3",{children:"Private Network (Concierge)"}),e.jsxs("p",{children:["We search for a guest for you. Address remains hidden until vetting is complete. ",e.jsx("strong",{children:"Recommended."})]})]})]}),e.jsxs("div",{className:`privacy-card ${t.marketStrategy==="public"?"selected":""}`,onClick:()=>P({marketStrategy:"public"}),children:[e.jsx("div",{className:"privacy-radio"}),e.jsxs("div",{className:"privacy-content",children:[e.jsx("h3",{children:"Public Marketplace"}),e.jsx("p",{children:"Standard listing. Visible to all users immediately."})]})]})]})]}),e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"btn-next",onClick:se,children:"Continue"}),e.jsx("button",{className:"btn-back",onClick:ne,children:"Back"})]})]}),Lt=()=>{const n=Be();return e.jsxs("div",{className:"section-card",children:[e.jsx("h2",{children:"Listing Strategy"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Lease Style"}),e.jsx("div",{className:"lease-options-columns",children:["nightly","weekly","monthly"].map(l=>{const o=l==="nightly"?Pe:l==="weekly"?Ae:Ie,p=`leaseStyle${l.charAt(0).toUpperCase()+l.slice(1)}`;return e.jsxs("div",{className:`privacy-card ${t.leaseStyle===l?"selected":""}`,onClick:()=>P({leaseStyle:l}),children:[e.jsx("div",{className:"privacy-radio"}),e.jsxs("div",{className:"privacy-content",children:[e.jsxs("h3",{className:"lease-style-header",children:[l.charAt(0).toUpperCase()+l.slice(1),e.jsx("button",{ref:o,type:"button",className:"info-help-btn",onClick:X(p),"aria-label":`Learn more about ${l} rental`,children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})})]}),e.jsxs("p",{children:[l==="nightly"&&"Rent by the night with flexible availability",l==="weekly"&&"Rent in weekly patterns",l==="monthly"&&"Traditional month-to-month rental"]})]})]},l)})})]}),t.leaseStyle==="nightly"&&e.jsxs("div",{id:"nightSelector",className:`conditional-section visible ${K.nightSelector?"validation-error":""}`,children:[e.jsx("label",{children:"Available Nights (Tap to select)"}),e.jsx("div",{className:"host-schedule-selector-wrapper",children:e.jsx(ts,{selectedNights:t.selectedNights,onSelectionChange:Ct,isClickable:!0,className:"v2-schedule-selector"})}),e.jsx("div",{className:"schedule-text",style:{color:n.error?"red":"var(--v2-primary)"},children:n.text})]}),t.leaseStyle==="weekly"&&e.jsxs("div",{className:"conditional-section visible",children:[e.jsx("label",{children:"Select Weekly Pattern"}),e.jsx("select",{value:t.weeklyPattern,onChange:l=>P({weeklyPattern:l.target.value}),children:tt.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})]}),t.leaseStyle==="monthly"&&e.jsxs("div",{id:"monthlyAgreement",className:`conditional-section visible ${K.monthlyAgreement?"validation-error":""}`,children:[e.jsx("label",{children:"Monthly Lease Agreement"}),e.jsx("p",{className:"agreement-desc",children:"With the 'Monthly' model, you receive a fixed monthly rate regardless of how many nights your guest uses. Split Lease may sublease unused nights to short-term guests, maximizing occupancy. If you'd rather not have additional guests in your space, our other models may suit you better."}),e.jsx("div",{className:"agreement-option",children:e.jsxs("label",{className:"agreement-label",children:[e.jsx("input",{type:"radio",name:"monthlyAgreement",checked:t.monthlyAgreement,onChange:()=>{P({monthlyAgreement:!0}),K.monthlyAgreement&&$(l=>({...l,monthlyAgreement:!1}))}}),e.jsx("span",{className:"agreement-text",children:"I agree to the monthly sublease terms"})]})}),e.jsx("div",{className:"agreement-option",children:e.jsxs("label",{className:"agreement-label",children:[e.jsx("input",{type:"radio",name:"monthlyAgreement",checked:!t.monthlyAgreement,onChange:()=>P({monthlyAgreement:!1})}),e.jsx("span",{className:"agreement-text",children:"No, I will select a different rental style"})]})})]}),e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"btn-next",onClick:se,children:"Continue"}),e.jsx("button",{className:"btn-back",onClick:ne,children:"Back"})]})]})},Tt=()=>{const n=S.current.slice(0,5).reduce((o,p)=>o+p,0),l=Math.round(n/5);return e.jsxs("div",{className:"section-card",children:[e.jsx("h2",{children:"Pricing Strategy"}),e.jsx("p",{className:"subtitle",children:"Set your base rate. Longer stays get automatic discounts to encourage bookings."}),e.jsxs("div",{className:"nightly-calculator-vertical",children:[e.jsxs("div",{className:"control-group",style:{textAlign:"center"},children:[e.jsxs("label",{className:"calc-label label-with-info",children:["Base Nightly Rate",e.jsx("button",{ref:De,type:"button",className:"info-help-btn",onClick:X("baseNightlyRate"),"aria-label":"Learn more about base nightly rate",children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})})]}),e.jsxs("div",{className:"base-input-wrapper",children:[e.jsx("span",{className:"currency-symbol",children:"$"}),e.jsx("input",{type:"number",className:"base-input",value:t.nightlyBaseRate,onChange:o=>P({nightlyBaseRate:Math.max(0,parseInt(o.target.value)||0)}),min:"0"})]})]}),e.jsxs("div",{className:"control-group",children:[e.jsxs("div",{className:"label-row",children:[e.jsxs("span",{className:"calc-label label-with-info clickable-label",onClick:X("longStayDiscount"),style:{cursor:"pointer"},children:["Long Stay Discount",e.jsx("button",{ref:Le,type:"button",className:"info-help-btn",onClick:X("longStayDiscount"),"aria-label":"Learn more about long stay discount",children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})})]}),e.jsxs("span",{className:"value-display",children:[t.nightlyDiscount,"%"]})]}),e.jsx("div",{className:"range-wrapper",children:e.jsx("input",{type:"range",min:"0",max:"50",value:t.nightlyDiscount,onChange:o=>P({nightlyDiscount:parseInt(o.target.value)})})}),e.jsxs("div",{className:"marks",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{children:"25%"}),e.jsx("span",{children:"50%"})]}),e.jsxs("p",{className:"calc-hint",children:["Consecutive nights get progressively cheaper. A 5-night stay averages ",e.jsxs("strong",{children:["$",l]}),"/night."]})]}),e.jsxs("div",{className:"nights-display-wrapper",children:[e.jsx("div",{className:"nights-display-header",children:"Price per consecutive night"}),e.jsx("div",{className:"palette-container",children:e.jsx("div",{className:"palette-row",children:[1,2,3,4,5,6,7].map(o=>e.jsxs("div",{className:`palette-swatch n${o}`,children:[e.jsxs("span",{className:"swatch-number",children:["Night ",o]}),e.jsxs("span",{className:"swatch-price",children:["$",S.current[o-1]||0]}),e.jsx("span",{className:"swatch-label",children:"per night"})]},o))})}),e.jsx("div",{className:"formula-row",children:[1,2,3,4,5,6,7].map(o=>{const p=S.current[o-1]||0,R=o*p;return e.jsxs("div",{className:"formula-item",children:["$",R]},o)})}),e.jsxs("div",{className:"formula-total-row",children:[e.jsx("div",{className:"formula-total-label",children:"7-Night Total"}),e.jsxs("div",{className:"formula-total",children:["$",7*(S.current[6]||0)]})]})]}),e.jsxs("div",{className:"summary-row",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("div",{className:"summary-label",children:"Your Weekly Total"}),e.jsxs("div",{className:"summary-value",children:["$",Math.round(t.weeklyTotal)]}),e.jsxs("div",{className:"summary-sub",children:[t.selectedNights.length," nights"]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("div",{className:"summary-label",children:"Est. Monthly"}),e.jsxs("div",{className:"summary-value",children:["$",Math.round(t.monthlyEstimate)]}),e.jsx("div",{className:"summary-sub",children:"x 4.33 weeks"})]})]}),e.jsxs("details",{className:"pricing-details",children:[e.jsx("summary",{children:"How does Smart Pricing work?"}),e.jsx("div",{className:"details-content",children:'We calculate a "decay curve" for your pricing. The first night is your full Base Rate. Each consecutive night gets slightly cheaper based on your Discount setting. This encourages guests to book longer blocks (like Mon-Fri) instead of just two nights, maximizing your occupancy and reducing turnover effort.'})]}),e.jsxs("div",{className:"nightly-fees-row",children:[e.jsxs("div",{className:"fee-input-group",children:[e.jsxs("label",{className:"calc-label label-with-info",children:["Damage Deposit",e.jsx("button",{ref:Te,type:"button",className:"info-help-btn",onClick:X("damageDeposit"),"aria-label":"Learn more about damage deposit",children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})})]}),e.jsxs("div",{className:"input-with-prefix",children:[e.jsx("span",{className:"prefix",children:"$"}),e.jsx("input",{type:"number",value:t.securityDeposit||"",onChange:o=>P({securityDeposit:parseInt(o.target.value)||0}),placeholder:"500"})]})]}),e.jsxs("div",{className:"fee-input-group",children:[e.jsxs("label",{className:"calc-label label-with-info",children:["Cleaning Fee",e.jsx("button",{ref:Ce,type:"button",className:"info-help-btn",onClick:X("cleaningFee"),"aria-label":"Learn more about cleaning fee",children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})})]}),e.jsxs("div",{className:"input-with-prefix",children:[e.jsx("span",{className:"prefix",children:"$"}),e.jsx("input",{type:"number",value:t.cleaningFee||"",onChange:o=>P({cleaningFee:parseInt(o.target.value)||0}),placeholder:"150"})]})]})]})]}),e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"btn-next",onClick:se,children:"Continue"}),e.jsx("button",{className:"btn-back",onClick:ne,children:"Back"})]})]})},Ot=()=>{const n=t.leaseStyle==="weekly"?"Week":"Month";return e.jsxs("div",{className:"section-card",children:[e.jsx("h2",{children:"Financials"}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"label-with-info",children:["Desired Rent (Per ",n,")",e.jsx("button",{ref:Oe,type:"button",className:"info-help-btn",onClick:X("desiredRent"),"aria-label":"Learn more about desired rent",children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})})]}),e.jsxs("div",{className:"input-with-prefix",children:[e.jsx("span",{className:"prefix",children:"$"}),e.jsx("input",{id:"price",type:"number",value:t.price||"",onChange:l=>{const o=parseInt(l.target.value)||0;P({price:o}),o>0&&K.price&&$(p=>({...p,price:!1}))},placeholder:t.leaseStyle==="weekly"?"500":"2000",className:K.price?"input-error":""})]})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"label-with-info",children:["Security Deposit",e.jsx("button",{ref:_e,type:"button",className:"info-help-btn",onClick:X("securityDeposit"),"aria-label":"Learn more about security deposit",children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})})]}),e.jsxs("div",{className:"input-with-prefix",children:[e.jsx("span",{className:"prefix",children:"$"}),e.jsx("input",{type:"number",value:t.securityDeposit||"",onChange:l=>P({securityDeposit:parseInt(l.target.value)||0}),placeholder:"1000"})]})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"label-with-info",children:["Cleaning Fee",e.jsx("button",{ref:Ce,type:"button",className:"info-help-btn",onClick:X("cleaningFee"),"aria-label":"Learn more about cleaning fee",children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})})]}),e.jsxs("div",{className:"input-with-prefix",children:[e.jsx("span",{className:"prefix",children:"$"}),e.jsx("input",{type:"number",value:t.cleaningFee||"",onChange:l=>P({cleaningFee:parseInt(l.target.value)||0}),placeholder:"150"})]})]})})]}),e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"btn-next",onClick:se,children:"Continue"}),e.jsx("button",{className:"btn-back",onClick:ne,children:"Back"})]})]})},_t=()=>e.jsxs("div",{className:"section-card",children:[e.jsx("h2",{children:"The Space & Time"}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Type of Space",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{id:"typeOfSpace",value:t.typeOfSpace,onChange:n=>{P({typeOfSpace:n.target.value}),n.target.value&&K.typeOfSpace&&$(l=>({...l,typeOfSpace:!1}))},className:`${t.typeOfSpace?"":"input-placeholder"} ${K.typeOfSpace?"input-error":""}`,children:[e.jsx("option",{value:"",children:"Choose an optionâ€¦"}),e.jsx("option",{value:"Private Room",children:"Private Room"}),e.jsx("option",{value:"Entire Place",children:"Entire Place"}),e.jsx("option",{value:"Shared Room",children:"Shared Room"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Address",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{id:"address",ref:N,type:"text",value:t.address.fullAddress,onChange:St,placeholder:"Start typing your address...",className:O||K.address?"input-error":ue?"input-valid":""}),O&&e.jsx("span",{className:"error-message",children:O}),ue&&t.address.neighborhood&&e.jsx("span",{className:"address-info",children:t.address.city?`${t.address.neighborhood}, ${t.address.city}`:t.address.neighborhood})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bedrooms"}),e.jsxs("select",{value:t.bedrooms,onChange:n=>P({bedrooms:n.target.value}),children:[e.jsx("option",{value:"Studio",children:"Studio"}),e.jsx("option",{value:"1",children:"1"}),e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"3",children:"3"}),e.jsx("option",{value:"4",children:"4+"})]})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bathrooms"}),e.jsxs("select",{value:t.bathrooms,onChange:n=>P({bathrooms:n.target.value}),children:[e.jsx("option",{value:"1",children:"1"}),e.jsx("option",{value:"1.5",children:"1.5"}),e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"Shared",children:"Shared"})]})]})})]}),e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"btn-next",onClick:se,children:"Continue"}),e.jsx("button",{className:"btn-back",onClick:ne,children:"Back"})]})]}),Ft=n=>{const l=n.target.files;if(!l)return;const o=Array.from(l).map((p,R)=>({id:`photo_${Date.now()}_${R}_${Math.random().toString(36).substr(2,9)}`,url:URL.createObjectURL(p),file:p}));P({photos:[...t.photos,...o]})},$t=n=>{P({photos:t.photos.filter(l=>l.id!==n)})},Bt=n=>{ee(n)},Ut=(n,l)=>{n.preventDefault(),te(l)},zt=()=>{te(null)},Wt=(n,l)=>{if(n.preventDefault(),Z===null||Z===l){ee(null),te(null);return}const o=[...t.photos],[p]=o.splice(Z,1);o.splice(l,0,p),P({photos:o}),ee(null),te(null)},Vt=()=>{ee(null),te(null)},Ht=()=>e.jsxs("div",{className:"section-card",children:[e.jsx("h2",{children:"Photos"}),e.jsx("p",{className:"subtitle",children:"Add photos of your property (minimum 3 required)"}),t.photos.length>0&&e.jsxs("div",{className:"photo-gallery",children:[e.jsx("p",{className:"drag-drop-hint",children:"Drag and drop photos to reorder. First photo is the cover photo."}),e.jsx("div",{className:"photo-grid",children:t.photos.map((n,l)=>e.jsxs("div",{className:`photo-item ${Z===l?"dragging":""} ${F===l?"drag-over":""}`,draggable:!0,onDragStart:()=>Bt(l),onDragOver:o=>Ut(o,l),onDragLeave:zt,onDrop:o=>Wt(o,l),onDragEnd:Vt,children:[e.jsx("img",{src:n.url,alt:`Property photo ${l+1}`}),e.jsx("div",{className:"photo-controls",children:e.jsx("button",{type:"button",onClick:()=>$t(n.id),className:"btn-delete",title:"Remove photo",children:"ðŸ—‘ï¸"})}),l===0&&e.jsx("div",{className:"photo-badge",children:"Cover Photo"})]},n.id))})]}),e.jsxs("label",{className:"photo-zone",children:[e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:Ft,style:{display:"none"}}),e.jsxs("div",{className:"photo-zone-content",children:[e.jsx("p",{className:"photo-zone-title",children:"Click to upload photos"}),e.jsx("p",{className:"photo-zone-subtitle",children:t.photos.length<3?`${3-t.photos.length} more photo${3-t.photos.length===1?"":"s"} required`:"Add more photos (optional)"})]})]}),e.jsxs("p",{className:"progress-text",children:[t.photos.length," of 3 minimum photos uploaded",t.photos.length>=3&&" âœ“"]}),e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"btn-next",onClick:se,children:"Continue"}),e.jsx("button",{className:"btn-skip",onClick:Mt,children:"Skip for Now"}),e.jsxs("div",{className:"btn-row-secondary",children:[e.jsx("button",{className:"btn-back",onClick:ne,children:"Back"}),e.jsxs("button",{className:"btn-continue-phone",onClick:Et,children:[e.jsx(us,{size:18,color:"#5b21b6"})," Continue on Phone"]})]})]})]}),Yt=()=>{var R;let n,l,o;if(t.leaseStyle==="nightly"){const x=S.current[0]||t.nightlyBaseRate;n=`$${S.current[6]||x} - $${x}`,l="Night",o=Be().text}else if(t.leaseStyle==="weekly"){n=`$${t.price}`,l="Week";const x=tt.find(w=>w.value===t.weeklyPattern);o=`Weekly: ${(x==null?void 0:x.label)||t.weeklyPattern}`}else n=`$${t.price}`,l="Month",o="Monthly Agreement";const p=((R=et.find(x=>x.id===t.hostType))==null?void 0:R.id)||t.hostType;return p.charAt(0).toUpperCase()+p.slice(1),e.jsxs("div",{className:"section-card section-card-review",children:[e.jsx("h2",{children:"Review & Activate"}),e.jsx("p",{className:"subtitle",children:"Your listing is ready to go live on our network."}),e.jsx("div",{className:"review-badge-row",children:e.jsx("span",{className:"review-market-badge",style:{background:t.marketStrategy==="private"?"#31135D":"#6D31C2"},children:t.marketStrategy==="private"?"Private (Concierge)":"Public Listing"})}),e.jsxs("div",{className:"review-listing-card",children:[e.jsx("div",{className:"review-listing-images",children:t.photos.length>0?e.jsx("img",{src:t.photos[0].url,alt:"Listing preview"}):e.jsx("div",{className:"review-photo-placeholder",children:e.jsx("span",{children:"No photos uploaded"})})}),e.jsxs("div",{className:"review-listing-content",children:[e.jsx("div",{className:"review-listing-top-row",children:e.jsxs("span",{className:"review-listing-badge",children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),"Verified"]})}),e.jsxs("div",{className:"review-listing-location-row",children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),e.jsxs("span",{children:[t.address.neighborhood||t.address.city||"New York",", Manhattan"]})]}),e.jsxs("h3",{className:"review-listing-title",children:[t.bedrooms==="Studio"?"Studio":`${t.bedrooms} Bedroom`," | ",t.typeOfSpace||"Private Room"]}),e.jsxs("div",{className:"review-listing-specs",children:[e.jsx("span",{children:t.typeOfSpace||"Private Room"}),e.jsx("span",{className:"spec-dot",children:"Â·"}),e.jsx("span",{children:"2 guests"}),e.jsx("span",{className:"spec-dot",children:"Â·"}),e.jsx("span",{children:t.bedrooms==="Studio"?"Studio":t.bedrooms+" bedroom"}),e.jsx("span",{className:"spec-dot",children:"Â·"}),e.jsxs("span",{children:[t.bathrooms," bath"]})]}),e.jsxs("div",{className:"review-listing-price-row",children:[e.jsx("span",{className:"review-price-amount",children:n}),e.jsxs("span",{className:"review-price-period",children:["/ ",l.toLowerCase()]}),t.leaseStyle==="nightly"?e.jsxs("button",{type:"button",ref:Fe,className:"review-price-from review-price-info-trigger",onClick:X("schedule"),"aria-label":"Schedule information",children:[o,e.jsxs("svg",{className:"review-price-info-icon",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})]}):e.jsx("span",{className:"review-price-from",children:o})]}),e.jsxs("div",{className:"review-listing-host",children:["Hosted by ",e.jsx("span",{className:"review-host-name",children:"You"})]})]})]}),e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"btn-next btn-success",onClick:Ve,disabled:i,children:i?"Activating...":"Activate Listing"}),e.jsx("button",{className:"btn-back",onClick:ne,disabled:i,children:"Back"})]})]})},Qt=()=>e.jsx("div",{className:"success-modal-overlay",children:e.jsxs("div",{className:"success-modal",children:[e.jsx("div",{className:"success-icon",children:"âœ“"}),e.jsx("h2",{children:"Success!"}),e.jsx("p",{children:"Your request has been sent to our concierge team."}),e.jsxs("div",{className:"success-actions",children:[e.jsx("a",{href:d?`/listing-dashboard?id=${d}`:"/listing-dashboard",className:"btn-next",children:"Go to My Dashboard"}),d&&e.jsx("a",{href:`/preview-split-lease?id=${d}`,className:"btn-next btn-secondary",children:"Preview Listing"}),e.jsx("a",{href:"/host-proposals",className:"btn-next btn-secondary",children:"View Your Proposals"})]})]})}),Gt=()=>{const n=()=>{T&&navigator.clipboard.writeText(T).then(()=>{z("Link copied to clipboard!","success",3e3)}).catch(()=>{z("Failed to copy link","error",3e3)})},l=()=>{q(!1),re(null)},o=x=>{const w=x.replace(/\D/g,"");return w.length<=3?w:w.length<=6?`(${w.slice(0,3)}) ${w.slice(3)}`:`(${w.slice(0,3)}) ${w.slice(3,6)}-${w.slice(6,10)}`},p=x=>{const w=o(x.target.value);ge(w)},R=()=>{if(J.replace(/\D/g,"").length!==10){z("Please enter a valid 10-digit phone number","error",4e3);return}z("Magic link will be sent to your phone shortly!","success",4e3)};return e.jsx("div",{className:"success-modal-overlay",onClick:l,children:e.jsxs("div",{className:"continue-phone-modal",onClick:x=>x.stopPropagation(),children:[e.jsx("button",{className:"modal-close-btn",onClick:l,"aria-label":"Close modal",children:"Ã—"}),e.jsx("h2",{children:"Continue on Your Phone"}),e.jsx("p",{children:pe?"Saving your progress...":"Your progress has been saved! Scan the QR code or enter your phone number to receive a magic link."}),e.jsx("div",{className:"qr-placeholder",children:e.jsx("div",{className:"qr-code-box",children:pe?e.jsxs("div",{className:"qr-loading",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Saving your progress..."})]}):T?e.jsxs(e.Fragment,{children:[e.jsx(gt,{value:T,size:160,level:"M",includeMargin:!0,bgColor:"#ffffff",fgColor:"#1f2937"}),e.jsx("p",{className:"qr-hint",children:"Scan to upload photos from your phone"})]}):e.jsxs("div",{className:"qr-error",children:[e.jsx("p",{children:"Failed to generate QR code"}),e.jsx("button",{onClick:We,className:"btn-retry",children:"Retry"})]})})}),e.jsxs("div",{className:"phone-input-section",children:[e.jsx("label",{children:"Or send link to your phone:"}),e.jsxs("div",{className:"phone-input-row",children:[e.jsx("input",{type:"tel",value:J,onChange:p,placeholder:"(555) 555-5555",className:"phone-input",maxLength:14}),e.jsx("button",{type:"button",className:"btn-send-link",onClick:R,disabled:pe||!T,children:"Send Link"})]}),me&&J===me&&e.jsx("p",{className:"phone-hint",children:"Using your account phone number"})]}),e.jsxs("div",{className:"continue-link-section",children:[e.jsx("label",{children:"Or copy this link:"}),e.jsxs("div",{className:"link-copy-row",children:[e.jsx("input",{type:"text",value:T||"Generating link...",readOnly:!0,className:"continue-link-input"}),e.jsx("button",{type:"button",className:"btn-copy",onClick:n,disabled:!T,children:"Copy"})]})]}),e.jsx("div",{className:"modal-actions",children:e.jsx("button",{className:"btn-next btn-secondary",onClick:l,children:"Continue Here Instead"})})]})})},qt=()=>{switch(u){case 1:return He();case 2:return Dt();case 3:return Lt();case 4:return Tt();case 5:return Ot();case 6:return _t();case 7:return Ht();case 8:return Yt();default:return He()}};return Nt?e.jsxs("div",{className:"self-listing-v2-page",children:[e.jsx(qe,{}),e.jsx("main",{className:"self-listing-v2-main",children:e.jsx("div",{className:"container",style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:e.jsx("p",{children:"Loading..."})})})]}):e.jsxs("div",{className:"self-listing-v2-page",children:[e.jsx(qe,{autoShowLogin:!1},v),e.jsx("main",{className:"self-listing-v2-main",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"header-section",children:[e.jsx("h1",{children:"Listing Setup"}),e.jsx("p",{children:"Let's find your perfect match."})]}),e.jsxs("div",{className:"progress-container",children:[e.jsx("div",{className:"progress-bar-bg",children:e.jsx("div",{className:"progress-bar-fill",style:{width:`${It}%`}})}),e.jsxs("div",{className:"step-indicator",children:["Step ",ze(u)," of 7"]})]}),qt()]})}),D&&e.jsx(Jt,{isOpen:D,onClose:()=>{M(!1),a(!1)},initialView:"identity",defaultUserType:"host",skipReload:!0,onAuthSuccess:Pt}),c&&Qt(),ve&&Gt(),e.jsx(es,{toasts:ft,onRemove:yt}),e.jsx(Y,{isOpen:W==="leaseStyleNightly",onClose:()=>V(null),triggerRef:Pe,title:b("leaseStyleNightly").title,content:b("leaseStyleNightly").content,expandedContent:b("leaseStyleNightly").expandedContent,showMoreAvailable:b("leaseStyleNightly").showMore}),e.jsx(Y,{isOpen:W==="leaseStyleWeekly",onClose:()=>V(null),triggerRef:Ae,title:b("leaseStyleWeekly").title,content:b("leaseStyleWeekly").content,expandedContent:b("leaseStyleWeekly").expandedContent,showMoreAvailable:b("leaseStyleWeekly").showMore}),e.jsx(Y,{isOpen:W==="leaseStyleMonthly",onClose:()=>V(null),triggerRef:Ie,title:b("leaseStyleMonthly").title,content:b("leaseStyleMonthly").content,expandedContent:b("leaseStyleMonthly").expandedContent,showMoreAvailable:b("leaseStyleMonthly").showMore}),e.jsx(Y,{isOpen:W==="baseNightlyRate",onClose:()=>V(null),triggerRef:De,title:b("baseNightlyRate").title,content:b("baseNightlyRate").content,expandedContent:b("baseNightlyRate").expandedContent,showMoreAvailable:b("baseNightlyRate").showMore}),e.jsx(Y,{isOpen:W==="longStayDiscount",onClose:()=>V(null),triggerRef:Le,title:b("longStayDiscount").title,content:b("longStayDiscount").content,expandedContent:b("longStayDiscount").expandedContent,showMoreAvailable:b("longStayDiscount").showMore}),e.jsx(Y,{isOpen:W==="damageDeposit",onClose:()=>V(null),triggerRef:Te,title:b("damageDeposit").title,content:b("damageDeposit").content,expandedContent:b("damageDeposit").expandedContent,showMoreAvailable:b("damageDeposit").showMore}),e.jsx(Y,{isOpen:W==="cleaningFee",onClose:()=>V(null),triggerRef:Ce,title:b("cleaningFee").title,content:b("cleaningFee").content,expandedContent:b("cleaningFee").expandedContent,showMoreAvailable:b("cleaningFee").showMore}),e.jsx(Y,{isOpen:W==="desiredRent",onClose:()=>V(null),triggerRef:Oe,title:b("desiredRent").title,content:b("desiredRent").content,expandedContent:b("desiredRent").expandedContent,showMoreAvailable:b("desiredRent").showMore}),e.jsx(Y,{isOpen:W==="securityDeposit",onClose:()=>V(null),triggerRef:_e,title:b("securityDeposit").title,content:b("securityDeposit").content,expandedContent:b("securityDeposit").expandedContent,showMoreAvailable:b("securityDeposit").showMore}),e.jsx(Y,{isOpen:W==="utilities",onClose:()=>V(null),triggerRef:bt,title:b("utilities").title,content:b("utilities").content,expandedContent:b("utilities").expandedContent,showMoreAvailable:b("utilities").showMore}),e.jsx(Y,{isOpen:W==="schedule",onClose:()=>V(null),triggerRef:Fe,title:b("schedule").title,content:b("schedule").content,expandedContent:b("schedule").expandedContent,showMoreAvailable:b("schedule").showMore})]})}function js(){return e.jsx(Ns,{})}Xt(document.getElementById("root")).render(e.jsx(L.StrictMode,{children:e.jsx(ds,{children:e.jsx(js,{})})}));
