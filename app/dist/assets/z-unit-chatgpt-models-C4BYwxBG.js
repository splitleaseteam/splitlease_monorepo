import{r as S,j as n,c as w}from"./client-BJVKzfAi.js";import{s as U}from"./supabase-BoCLEw6R.js";const L="https://m.media-amazon.com/images/I/518brvoz-bL.jpg";function b({prompt:o="",imageUrl:s=""}={}){return{prompt:o,imageUrl:s,response:"",loading:!1,error:null}}function E(){const[o,s]=S.useState(()=>b()),[a,c]=S.useState(()=>b()),[d,i]=S.useState(()=>b()),[m,p]=S.useState(()=>b({imageUrl:L}));async function l({prompt:e,model:t,imageUrl:r}){const j={prompt_key:"echo-test",variables:{message:e},options:{model:t,max_tokens:500}};r&&(j.image_url=r);const{data:N,error:z}=await U.functions.invoke("ai-gateway",{body:{action:"complete",payload:j}});if(z)throw z;if(!N.success)throw new Error(N.error||"Request failed");return N}function u(e){s(t=>({...t,prompt:e}))}async function g(){if(!(!o.prompt.trim()||o.loading)){s(e=>({...e,loading:!0,error:null,response:""}));try{const e=await l({prompt:o.prompt,model:"gpt-4o-mini"});s(t=>{var r;return{...t,response:((r=e.data)==null?void 0:r.content)||JSON.stringify(e,null,2),loading:!1}})}catch(e){s(t=>({...t,error:e.message||"Unknown error occurred",loading:!1}))}}}function h(e){c(t=>({...t,prompt:e}))}async function f(){if(!(!a.prompt.trim()||a.loading)){c(e=>({...e,loading:!0,error:null,response:""}));try{const e=await l({prompt:a.prompt,model:"o1-mini"});c(t=>{var r;return{...t,response:((r=e.data)==null?void 0:r.content)||JSON.stringify(e,null,2),loading:!1}})}catch(e){c(t=>({...t,error:e.message||"Unknown error occurred",loading:!1}))}}}function x(e){i(t=>({...t,prompt:e}))}async function P(){if(!(!d.prompt.trim()||d.loading)){i(e=>({...e,loading:!0,error:null,response:""}));try{const e=await l({prompt:d.prompt,model:"o1"});i(t=>{var r;return{...t,response:((r=e.data)==null?void 0:r.content)||JSON.stringify(e,null,2),loading:!1}})}catch(e){i(t=>({...t,error:e.message||"Unknown error occurred",loading:!1}))}}}function C(e){p(t=>({...t,prompt:e}))}function v(e){p(t=>({...t,imageUrl:e}))}async function T(){if(!m.imageUrl.trim()||m.loading)return;const e=m.prompt.trim()||"Describe what you see in this image.";p(t=>({...t,loading:!0,error:null,response:""}));try{const t=await l({prompt:e,model:"gpt-4.1-mini",imageUrl:m.imageUrl});p(r=>{var j;return{...r,response:((j=t.data)==null?void 0:j.content)||JSON.stringify(t,null,2),loading:!1}})}catch(t){p(r=>({...r,error:t.message||"Unknown error occurred",loading:!1}))}}return{section1:o,section2:a,section3:d,section4:m,handleSection1PromptChange:u,handleSection1Test:g,handleSection2PromptChange:h,handleSection2Test:f,handleSection3PromptChange:x,handleSection3Test:P,handleSection4PromptChange:C,handleSection4ImageUrlChange:v,handleSection4Test:T}}function k(){return n.jsxs("div",{className:"zucm-loading",children:[n.jsx("div",{className:"zucm-spinner"}),n.jsx("span",{children:"Processing..."})]})}function R({message:o}){return n.jsx("div",{className:"zucm-error",children:o})}function I({response:o}){return o?n.jsxs("div",{className:"zucm-response",children:[n.jsx("div",{className:"zucm-response-label",children:"Response:"}),n.jsx("div",{className:"zucm-response-content",children:o})]}):null}function y({title:o,subtitle:s,prompt:a,onPromptChange:c,response:d,loading:i,error:m,onTest:p,isImageTest:l=!1,imageUrl:u,onImageUrlChange:g,buttonLabel:h}){const f=h||(l?"Test gpt-4.1-mini Image Parse":`Test ${o.split(" ").pop()}`);return n.jsxs("div",{className:"zucm-section",children:[n.jsxs("div",{className:"zucm-section-header",children:[n.jsx("h2",{className:"zucm-section-title",children:o}),s&&n.jsx("p",{className:"zucm-section-subtitle",children:s})]}),n.jsxs("div",{className:"zucm-section-body",children:[l&&n.jsxs("div",{className:"zucm-form-group",children:[n.jsx("label",{className:"zucm-label",children:"Image URL"}),n.jsx("input",{type:"text",className:"zucm-input",placeholder:"Enter image URL...",value:u||"",onChange:x=>g(x.target.value),disabled:i})]}),n.jsxs("div",{className:"zucm-form-group",children:[n.jsx("label",{className:"zucm-label",children:l?"Prompt (optional - defaults to describe image)":"Prompt"}),n.jsx("textarea",{className:"zucm-textarea",placeholder:l?"Enter prompt or leave empty for default...":"Enter your test prompt...",value:a,onChange:x=>c(x.target.value),disabled:i,rows:4})]}),n.jsx("button",{type:"button",className:"zucm-btn zucm-btn-primary",onClick:p,disabled:i||(l?!(u!=null&&u.trim()):!(a!=null&&a.trim())),children:i?"Processing...":f}),i&&n.jsx(k,{}),m&&!i&&n.jsx(R,{message:m}),!i&&!m&&d&&n.jsx(I,{response:d})]})]})}function F(){const{section1:o,section2:s,section3:a,section4:c,handleSection1PromptChange:d,handleSection1Test:i,handleSection2PromptChange:m,handleSection2Test:p,handleSection3PromptChange:l,handleSection3Test:u,handleSection4PromptChange:g,handleSection4ImageUrlChange:h,handleSection4Test:f}=E();return n.jsxs("div",{className:"zucm-page",children:[n.jsxs("header",{className:"zucm-header",children:[n.jsx("h1",{children:"Z-Unit ChatGPT Models Test"}),n.jsx("p",{children:"Internal testing page for comparing multiple ChatGPT models"})]}),n.jsxs("div",{className:"zucm-container",children:[n.jsx(y,{title:"Freeform 4o",subtitle:"Functional test",prompt:o.prompt,onPromptChange:d,response:o.response,loading:o.loading,error:o.error,onTest:i,buttonLabel:"Test 4o-mini"}),n.jsx(y,{title:"Freeform 01-mini",subtitle:"Functional test",prompt:s.prompt,onPromptChange:m,response:s.response,loading:s.loading,error:s.error,onTest:p,buttonLabel:"Test o1-mini"}),n.jsx(y,{title:"Freeform o1",subtitle:"(did not work as of 1/13/25)",prompt:a.prompt,onPromptChange:l,response:a.response,loading:a.loading,error:a.error,onTest:u}),n.jsx(y,{title:"GPT 4.1 - Image Parse",subtitle:"Image URL parsing test",prompt:c.prompt,onPromptChange:g,response:c.response,loading:c.loading,error:c.error,onTest:f,isImageTest:!0,imageUrl:c.imageUrl,onImageUrlChange:h})]})]})}const G=w(document.getElementById("root"));G.render(n.jsx(F,{}));
