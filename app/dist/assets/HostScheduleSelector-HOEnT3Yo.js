import{r as c,j as N}from"./client-BJVKzfAi.js";const p=[{id:"sunday",display:"Sunday",singleLetter:"S",first3Letters:"Sun",dayIndex:0,associatedCheckin:"Sunday",associatedCheckout:"Monday",nextDay:"Monday",nextNight:"monday",previousDay:"Saturday",sameDay:"Sunday"},{id:"monday",display:"Monday",singleLetter:"M",first3Letters:"Mon",dayIndex:1,associatedCheckin:"Monday",associatedCheckout:"Tuesday",nextDay:"Tuesday",nextNight:"tuesday",previousDay:"Sunday",sameDay:"Monday"},{id:"tuesday",display:"Tuesday",singleLetter:"T",first3Letters:"Tue",dayIndex:2,associatedCheckin:"Tuesday",associatedCheckout:"Wednesday",nextDay:"Wednesday",nextNight:"wednesday",previousDay:"Monday",sameDay:"Tuesday"},{id:"wednesday",display:"Wednesday",singleLetter:"W",first3Letters:"Wed",dayIndex:3,associatedCheckin:"Wednesday",associatedCheckout:"Thursday",nextDay:"Thursday",nextNight:"thursday",previousDay:"Tuesday",sameDay:"Wednesday"},{id:"thursday",display:"Thursday",singleLetter:"T",first3Letters:"Thu",dayIndex:4,associatedCheckin:"Thursday",associatedCheckout:"Friday",nextDay:"Friday",nextNight:"friday",previousDay:"Wednesday",sameDay:"Thursday"},{id:"friday",display:"Friday",singleLetter:"F",first3Letters:"Fri",dayIndex:5,associatedCheckin:"Friday",associatedCheckout:"Saturday",nextDay:"Saturday",nextNight:"saturday",previousDay:"Thursday",sameDay:"Friday"},{id:"saturday",display:"Saturday",singleLetter:"S",first3Letters:"Sat",dayIndex:6,associatedCheckin:"Saturday",associatedCheckout:"Sunday",nextDay:"Sunday",nextNight:"sunday",previousDay:"Friday",sameDay:"Saturday"}],R=new Map(p.map(e=>[e.id,e]));function x(e){const s=R.get(e);if(!s)throw new Error(`Night with id "${e}" not found`);return s}function E(e){const s=p.find(i=>i.dayIndex===e);if(!s)throw new Error(`Night with day index ${e} not found`);return s}function $(e){if(e.length<=1)return{isContiguous:!0};const s=e.map(n=>x(n).dayIndex).sort((n,d)=>n-d),i=[];for(let n=1;n<s.length;n++)s[n]!==s[n-1]+1&&i.push(n);return{isContiguous:i.length===0,gaps:i}}function B(e,s){const i=x(e),n=x(s),d=i.dayIndex,o=n.dayIndex,h=[];if(d<=o)for(let l=d;l<=o;l++)h.push(E(l).id);else for(let l=d;l>=o;l--)h.push(E(l).id);return h}function G(e,s){if(e.length===0)return[s];if(e.length===1){const i=x(e[0]),n=x(s);return B(i.id,n.id)}return[...e,s]}function Y(e){if(e.length!==6)return e;const i=p.map(n=>n.id).find(n=>!e.includes(n));return i?[...e,i]:e}function _(e){return p.map(s=>s.id).filter(s=>!e.includes(s))}function M(e){return e.map(s=>x(s).sameDay)}function S(e,s){return s.includes(e)}function z({listing:e,selectedNights:s,onSelectionChange:i,isClickable:n=!0,inProposal:d=!1,mode:o="normal",doNotChangeListing:h=!1,onListingUpdate:l,onAlert:D,showAlertsOnLive:T=!0,isLiveVersion:w=!0,className:C}){const[r,m]=c.useState(s||(e==null?void 0:e.nightsAvailable)||[]),[A,F]=c.useState(!0),[I,j]=c.useState(0),b=c.useRef(!1),y=(e==null?void 0:e.nightsAvailable)||p.map(t=>t.id);c.useEffect(()=>{s!==void 0&&m(s)},[s]),c.useEffect(()=>{e&&!d&&m(e.nightsAvailable||[])},[e,d]),c.useEffect(()=>{const t=$(r);F(t.isContiguous)},[r]),c.useEffect(()=>{r.length===0&&(e==null?void 0:e.rentalType)==="Nightly"&&o!=="proposal"&&!window.location.pathname.includes("host-proposal")&&!window.location.pathname.includes("leases")&&setTimeout(()=>{g("No nights selected","Please select at least one night for your listing","error")},100)},[r.length,e==null?void 0:e.rentalType,o]),c.useEffect(()=>{b.current&&(v(r),b.current=!1)},[b.current]);const g=c.useCallback((t,u,a="information")=>{D&&(T||!w)&&D(t,u,a)},[D,T,w]),v=c.useCallback(t=>{const u=_(t);if(!h&&l&&e){const a={nightsAvailable:t,selectedDays:M(t),notSelectedDays:M(u)};e.maximumNights<t.length&&(a.maximumNights=t.length),t.length===7&&(a.maximumNights=7),l(a)}},[h,l,e]),L=c.useCallback(t=>{if(!S(t,y)||!n)return;if(r.includes(t)){if(!d){const a=r.filter(f=>f!==t);r.length===7&&a.length===6&&g("Deselect one more night","You need to deselect one more night to avoid having exactly 6 nights selected","warning"),m(a),v(a),i&&i(a)}}else{if(r.length>=7){j(a=>a+1),I>=2&&g("Maximum nights reached","You can only select up to 7 nights per week","error");return}if(!d){let a;r.length===1?a=G(r,t):a=[...r,t],a.length===6&&(a=Y(a),g("Auto-completed to 7 nights","All 7 nights have been automatically selected","information")),m(a),v(a),i&&i(a)}}},[r,y,n,d,I,i,v,g]),W=c.useCallback(t=>{const u=["hss-night-cell"],a=r.includes(t),f=S(t,y);return a&&(u.push("hss-selected"),d&&!A&&u.push("hss-non-contiguous")),f||u.push("hss-unavailable"),(!n||o==="preview"&&!f)&&u.push("hss-disabled"),u.join(" ")},[r,y,n,d,A,o]),q=c.useCallback(t=>{const u=S(t,y),a=r.includes(t);if(!u)return o==="step-by-step-guide"&&a?"Not Available Night Selected":o==="preview"?"Unavailable":"Not Available Night"},[y,r,o]),H=c.useCallback(()=>{const t=["hss-host-schedule-selector"];return o==="preview"?t.push("hss-preview-mode"):o==="step-by-step-guide"?t.push("hss-step-by-step-mode"):(o==="proposal"||d)&&t.push("hss-proposal-mode"),C&&t.push(C),t.join(" ")},[o,d,C]);return N.jsx("div",{className:H(),role:"group","aria-label":"Schedule selector",children:N.jsx("div",{className:"hss-nights-grid",role:"list",children:p.map(t=>{const u=S(t.id,y),a=r.includes(t.id),f=q(t.id);return N.jsx("div",{className:W(t.id),onClick:()=>L(t.id),"data-night":t.id,"data-available":u,"data-tooltip":f,role:"checkbox","aria-checked":a,"aria-label":`${t.display} night`,"aria-disabled":!n||!u,tabIndex:n&&u?0:-1,onKeyDown:k=>{(k.key===" "||k.key==="Enter")&&(k.preventDefault(),L(t.id))},children:N.jsx("span",{className:"hss-night-letter",children:t.singleLetter})},t.id)})})})}export{p as A,z as H,$ as c};
