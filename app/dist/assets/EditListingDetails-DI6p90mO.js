import{r as l,j as e}from"./client-BJVKzfAi.js";import{g as Qe,b as Ge,a as ze}from"./aiService-Bc-ZcM1i.js";import{a as Ze}from"./houseRulesService-B9S6foqA.js";import{s as K}from"./supabase-BoCLEw6R.js";import{u as Je}from"./photoUpload-vf9LU0fY.js";import{i as Te,c as Ke,N as fe,g as De,a as Ve}from"./nycZipCodes-DGfN4kWJ.js";import{f as qe,h as Ye}from"./dataLookups-zG18yzis.js";async function Xe(){try{console.log("[safetyFeaturesService] Fetching common safety features...");const{data:o,error:d}=await K.schema("reference_table").from("zat_features_safetyfeature").select('Name, "pre-set?"').eq('"pre-set?"',!0).order("Name",{ascending:!0});if(d)return console.error("[safetyFeaturesService] Error fetching common safety features:",d),[];if(!o||o.length===0)return console.warn("[safetyFeaturesService] No common safety features found"),[];const u=o.map(m=>m.Name);return console.log("[safetyFeaturesService] Fetched common safety features:",u),u}catch(o){return console.error("[safetyFeaturesService] Unexpected error:",o),[]}}async function Re(o){if(!o||o.trim().length===0)return console.warn("[amenitiesService] No amenity type provided"),[];try{console.log("[amenitiesService] Fetching amenities for type:",o);const{data:d,error:u}=await K.from("zat_features_amenity").select('Name, "pre-set?", "Type - Amenity Categories"').eq('"pre-set?"',!0).eq('"Type - Amenity Categories"',o).order("Name",{ascending:!0});if(u)return console.error("[amenitiesService] Error fetching common amenities:",u),[];if(!d||d.length===0)return console.warn(`[amenitiesService] No common amenities found for type: ${o}`),[];const m=d.map(k=>k.Name);return console.log("[amenitiesService] Fetched amenities:",m),m}catch(d){return console.error("[amenitiesService] Unexpected error:",d),[]}}async function eo(){return Re("In Unit")}async function oo(){return Re("In Building")}async function so(o){if(!o||o.trim().length===0)return console.warn("[neighborhoodService] No ZIP code provided for neighborhood lookup"),null;try{console.log("[neighborhoodService] Fetching neighborhood for ZIP:",o);const{data:d,error:u}=await K.rpc("get_neighborhood_by_zip",{zip_code:o});if(u)return console.error("[neighborhoodService] Error fetching neighborhood data:",u),null;if(!d||d.length===0)return console.warn(`[neighborhoodService] No neighborhood found for ZIP code: ${o}`),null;const m=d[0],k={neighborhoodName:m.Display||"",description:m["Neighborhood Description"]||""};return console.log("[neighborhoodService] Found neighborhood:",k.neighborhoodName),k}catch(d){return console.error("[neighborhoodService] Unexpected error:",d),null}}async function Lo(o){if(!o||o.trim().length===0)return console.warn("[neighborhoodService] No neighborhood name provided for lookup"),null;try{console.log("[neighborhoodService] Fetching neighborhood by name:",o);const{data:d,error:u}=await K.from("zat_geo_hood_mediumlevel").select('Display, "Neighborhood Description"').ilike("Display",o.trim()).limit(1).maybeSingle();if(u)return console.error("[neighborhoodService] Error fetching by name:",u),null;if(!d)return console.warn(`[neighborhoodService] No match for neighborhood name: ${o}`),null;const m={neighborhoodName:d.Display||"",description:d["Neighborhood Description"]||""};return console.log("[neighborhoodService] Found neighborhood by name:",m.neighborhoodName),m}catch(d){return console.error("[neighborhoodService] Unexpected error in getNeighborhoodByName:",d),null}}async function ao(o,d){const u=await so(o);if(u&&u.description)return console.log("[neighborhoodService] Found description in database"),{description:u.description,neighborhoodName:u.neighborhoodName,source:"database"};if(console.log("[neighborhoodService] No database match, generating via AI"),!(d!=null&&d.fullAddress)&&!(d!=null&&d.city))return console.warn("[neighborhoodService] Insufficient address data for AI generation"),null;try{const m=await Qe(d);return m?{description:m,source:"ai"}:null}catch(m){return console.error("[neighborhoodService] AI generation failed:",m),null}}async function ro(o){if(!o)return null;const d=String(o).trim();if(!d)return null;try{const{data:u,error:m}=await K.schema("reference_table").from("zat_geo_borough_toplevel").select('_id, "Display Borough"').eq("Display Borough",d).limit(1).maybeSingle();return m||!u?(console.log("[BoroughService] No borough found for name:",d),null):(console.log("[BoroughService] Found borough ID:",u._id,"for name:",d),u._id)}catch(u){return console.error("[BoroughService] Error looking up borough:",u),null}}async function to(o){if(!o)return null;const d=String(o).trim();if(!d)return null;try{const{data:u,error:m}=await K.schema("reference_table").from("zat_location").select("_id, cityName").eq("cityName",d).limit(1).maybeSingle();return m||!u?(console.log("[CityService] No city found for name:",d),null):(console.log("[CityService] Found city ID:",u._id,"for name:",d),u._id)}catch(u){return console.error("[CityService] Error looking up city:",u),null}}const lo={parking:"storage",storage:"storage",sqftRoom:"storage",sqftHome:"storage",spaceType:"space",bedrooms:"space",beds:"space",bathrooms:"space",kitchen:"space",maxGuests:"rules",minNights:"availability",maxNights:"availability",cancellation:"availability",firstAvailable:"availability",building:"building"};function no({listing:o,editSection:d,focusField:u,onClose:m,onSave:k,updateListing:x}){const[r,w]=l.useState({}),U=l.useRef(!1),[V,q]=l.useState(!1),[le,Y]=l.useState(!1),[ne,$]=l.useState(!1),[X,D]=l.useState(!1),[p,ie]=l.useState(!1),[xe,ce]=l.useState(!1),[P,M]=l.useState(!1),[W,ee]=l.useState(!1),[v,de]=l.useState(!1),[oe,se]=l.useState(null),H=l.useRef(null),Q=l.useRef(null),[ae,E]=l.useState(!1),[g,L]=l.useState(""),[ye,b]=l.useState(!1),[be,re]=l.useState(""),ue={parking:l.useRef(null),storage:l.useRef(null),sqftRoom:l.useRef(null),sqftHome:l.useRef(null),spaceType:l.useRef(null),bedrooms:l.useRef(null),beds:l.useRef(null),bathrooms:l.useRef(null),kitchen:l.useRef(null),maxGuests:l.useRef(null),minNights:l.useRef(null),maxNights:l.useRef(null),cancellation:l.useRef(null),firstAvailable:l.useRef(null),building:l.useRef(null)},[T,G]=l.useState(null),[ve,R]=l.useState(null),[je,he]=l.useState({name:!0,title:!0,description:!0,neighborhood:!0,location:!0,details:!0,rules:!0,availability:!0,photos:!0,amenities:!0,storage:!0,safety:!0,space:!0,building:!0});l.useEffect(()=>{const a=document.body.style.overflow,t=document.body.style.position,n=document.body.style.top,c=document.body.style.width,h=window.scrollY;return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${h}px`,document.body.style.width="100%",()=>{document.body.style.overflow=a,document.body.style.position=t,document.body.style.top=n,document.body.style.width=c,window.scrollTo(0,h)}},[]),l.useEffect(()=>{if(!u)return;const a=lo[u];a&&he(n=>({...n,[a]:!0}));const t=setTimeout(()=>{const n=ue[u];n!=null&&n.current&&(u==="building"?n.current.scrollIntoView({behavior:"smooth",block:"start"}):(n.current.focus(),n.current.scrollIntoView({behavior:"smooth",block:"center"})))},150);return()=>clearTimeout(t)},[u]),l.useEffect(()=>{if(!o||U.current)return;const a=o["Location - Zip Code"];let t=o["Location - Borough"];!t&&a&&(t=De(a)),w({Name:o.Name,Description:o.Description,"Description - Neighborhood":o["Description - Neighborhood"],"Location - City":o["Location - City"],"Location - State":o["Location - State"],"Location - Zip Code":a,"Location - Borough":t,"Location - Hood":o["Location - Hood"],"Features - Type of Space":o["Features - Type of Space"],"Features - Qty Bedrooms":o["Features - Qty Bedrooms"],"Features - Qty Bathrooms":o["Features - Qty Bathrooms"],"Features - Qty Beds":o["Features - Qty Beds"],"Features - Qty Guests":o["Features - Qty Guests"],"Features - SQFT Area":o["Features - SQFT Area"],"Features - SQFT of Room":o["Features - SQFT of Room"],"Kitchen Type":o["Kitchen Type"],"Features - Parking type":o["Features - Parking type"],"Features - Secure Storage Option":o["Features - Secure Storage Option"],"Features - House Rules":o["Features - House Rules"],"Features - Photos":o["Features - Photos"],"Features - Amenities In-Unit":o["Features - Amenities In-Unit"],"Features - Amenities In-Building":o["Features - Amenities In-Building"],"Features - Safety":o["Features - Safety"],"First Available":o["First Available"],"Minimum Nights":o["Minimum Nights"],"Maximum Nights":o["Maximum Nights"],"Cancellation Policy":o["Cancellation Policy"]||""}),U.current=!0},[o]),l.useEffect(()=>{if(oe){const a=setTimeout(()=>se(null),3e3);return()=>clearTimeout(a)}},[oe]),l.useEffect(()=>{if(o&&U.current){let a="";const t=o["Location - Address"];if(t){let h=t;if(typeof t=="string")try{h=JSON.parse(t)}catch{t.includes(",")&&(a=t)}h&&typeof h=="object"&&h.address&&(a=h.address)}if(!a){const h=o["Location - City"]||"",f=o["Location - State"]||"",j=o["Location - Zip Code"]||"",N=[];h&&N.push(h),f&&N.push(f),j&&N.push(j),a=N.join(", ")}re(a);const n=o["Location - Zip Code"]||"",c=o["Location - State"]||"";n&&Te(n,c,"")&&E(!0)}},[o]),l.useEffect(()=>{ae&&b(!1)},[ae]),l.useEffect(()=>{if(d!=="name"&&d!=="location")return;let a=0;const t=50,n=()=>{if(!window.google||!window.google.maps||!window.google.maps.places){a++,a<t?setTimeout(n,100):(console.error("Google Maps API failed to load for EditListingDetails"),L("Address autocomplete is unavailable. Please use manual entry."),b(!0));return}if(!H.current){setTimeout(n,100);return}try{console.log("Initializing Google Maps Autocomplete for EditListingDetails...");const c=new window.google.maps.LatLngBounds(new window.google.maps.LatLng(fe.south,fe.west),new window.google.maps.LatLng(fe.north,fe.east)),h=new window.google.maps.places.Autocomplete(H.current,{types:["address"],componentRestrictions:{country:"us"},bounds:c,strictBounds:!0,fields:["address_components","formatted_address","geometry","name","place_id"]});console.log("Google Maps Autocomplete initialized successfully for EditListingDetails"),window.google.maps.event.addDomListener(H.current,"keydown",f=>{f.key==="Enter"&&f.preventDefault()}),Q.current=h,h.addListener("place_changed",()=>{const f=h.getPlace();if(console.log("Place selected in EditListingDetails:",f),!f.place_id){console.log("No place_id - user did not select from dropdown");return}if(!f.geometry||!f.address_components){console.error("Invalid place selected - missing geometry or address components"),L("Please select a valid address from the dropdown"),E(!1);return}let j="",N="",F="",Z="",J="";if(f.address_components.forEach(S=>{const B=S.types;B.includes("locality")&&(j=S.long_name),B.includes("administrative_area_level_1")&&(N=S.short_name),B.includes("administrative_area_level_2")&&(J=S.long_name),B.includes("postal_code")&&(F=S.long_name),(B.includes("neighborhood")||B.includes("sublocality")||B.includes("sublocality_level_1"))&&(Z=S.long_name)}),console.log("Extracted address components:",{city:j,state:N,county:J,zip:F,neighborhood:Z}),!Te(F,N,J)){let S;if(F){const B=De(F);S=B?`This address appears to be outside our service area. Zip code ${F} is in ${B}.`:`This address is outside our service area (zip: ${F}). We only accept listings in NYC and Hudson County, NJ.`}else N==="NJ"?S=`This address is outside our service area. We only accept listings in Hudson County, NJ, not ${J||"other NJ counties"}.`:S="This address is outside our service area. We only accept listings in NYC and Hudson County, NJ.";console.warn("Invalid address selected:",{zip:F,state:N,county:J}),L(S),E(!1);return}const Ee=De(F)||(Ve(N,J)?"Hudson County, NJ":Z);console.log("Valid address - Borough/Area:",Ee),w(S=>({...S,"Location - City":j,"Location - State":N,"Location - Zip Code":F,"Location - Borough":Ee,"Location - Hood":Z})),re(f.formatted_address||""),E(!0),b(!1),L(""),console.log("Address validated and populated successfully!")})}catch(c){console.error("Error initializing Google Maps Autocomplete:",c),L("Address autocomplete is unavailable. Please use manual entry."),b(!0)}};return n(),()=>{Q.current&&window.google&&window.google.maps.event.clearInstanceListeners(Q.current)}},[d]);const Ne=l.useCallback(a=>{const t=a.target.value;re(t),E(!1),L("")},[]),ke=l.useCallback(()=>{b(a=>!a)},[]),i=l.useCallback((a,t,n="success")=>{window.showToast?window.showToast({title:a,content:t||void 0,type:n}):se({type:n,message:a,subMessage:t})},[]),Ce=l.useCallback(()=>{se(null)},[]),y=l.useCallback((a,t)=>{w(n=>({...n,[a]:t}))},[]),we=l.useCallback(async(a,t,n,c)=>{const h=r[a]||[];if(a==="Features - House Rules"&&n&&h.length>=12){i("Maximum reached","You can select up to 12 house rules","info");return}let f;n?f=[...h,t]:f=h.filter(j=>j!==t),w(j=>({...j,[a]:f}));try{await x(o._id,{[a]:f}),i(t,`${c} ${n?"added":"removed"}!`)}catch(j){console.error("Autosave error:",j),i("Error saving","Please try again","error"),w(N=>({...N,[a]:h}))}},[r,o,x,i]),Se=l.useCallback(async()=>{q(!0);try{const a={};for(const[n,c]of Object.entries(r)){const h=o[n];Array.isArray(c)&&Array.isArray(h)?JSON.stringify(c)!==JSON.stringify(h)&&(a[n]=c):c!==h&&(a[n]=c)}if(Object.keys(a).length===0){i("No changes detected","Closing without saving"),setTimeout(m,1500);return}if(a["Location - Borough"]){const n=a["Location - Borough"],c=await ro(n);c?(a["Location - Borough"]=c,console.log("ðŸ“ Converted borough name to ID:",n,"->",c)):(console.warn("âš ï¸ Could not find borough ID for:",n,"- skipping borough update"),delete a["Location - Borough"])}if(a["Location - City"]||a["Location - Borough"]){const n=r["Location - Borough"]||o["Location - Borough"],c=Ke(n)||r["Location - City"];if(c){const h=await to(c);h?(a["Location - City"]=h,console.log("ðŸ™ï¸ Converted city name to ID:",c,"->",h)):(console.warn("âš ï¸ Could not find city ID for:",c,"- removing city from update"),delete a["Location - City"],i("City lookup failed",`Could not find city "${c}" in database`,"warning"))}}console.log("ðŸ“ Saving only changed fields:",Object.keys(a));const t=await x(o._id,a);i("Changes saved!","Your listing has been updated"),k(t),setTimeout(m,2e3)}catch(a){console.error("Error saving:",a),i("Failed to save changes","Please try again","error")}finally{q(!1)}},[o,r,x,k,m,i]),Fe=l.useCallback(a=>{he(t=>({...t,[a]:!t[a]}))},[]),me=l.useCallback(async()=>{ce(!0);try{const a=await Ze();if(a.length===0){i("No common rules found","Database returned no pre-set rules","error");return}const t=Array.isArray(r["Features - House Rules"])?r["Features - House Rules"]:[],n=[...new Set([...t,...a])];w(c=>({...c,"Features - House Rules":n})),await x(o._id,{"Features - House Rules":n}),i("Common rules loaded!",`${a.length} rules added`)}catch(a){console.error("[loadCommonRules] Error:",a),i("Error loading rules","Please try again","error")}finally{ce(!1)}},[r,o,x,i]),pe=l.useCallback(async()=>{M(!0);try{const a=await Xe();if(a.length===0){i("No common safety features found","Database returned no pre-set features","error");return}const t=Array.isArray(r["Features - Safety"])?r["Features - Safety"]:[],n=[...new Set([...t,...a])];w(c=>({...c,"Features - Safety":n})),await x(o._id,{"Features - Safety":n}),i("Common safety features loaded!",`${a.length} features added`)}catch(a){console.error("[loadCommonSafetyFeatures] Error:",a),i("Error loading safety features","Please try again","error")}finally{M(!1)}},[r,o,x,i]),ge=l.useCallback(async()=>{D(!0);try{const a=await eo();if(a.length===0){i("No common in-unit amenities found","Database returned no pre-set amenities","error");return}const t=Array.isArray(r["Features - Amenities In-Unit"])?r["Features - Amenities In-Unit"]:[],n=[...new Set([...t,...a])];w(c=>({...c,"Features - Amenities In-Unit":n})),await x(o._id,{"Features - Amenities In-Unit":n}),i("Common in-unit amenities loaded!",`${a.length} amenities added`)}catch(a){console.error("[loadCommonInUnitAmenities] Error:",a),i("Error loading amenities","Please try again","error")}finally{D(!1)}},[r,o,x,i]),Le=l.useCallback(async()=>{ie(!0);try{const a=await oo();if(a.length===0){i("No common building amenities found","Database returned no pre-set amenities","error");return}const t=Array.isArray(r["Features - Amenities In-Building"])?r["Features - Amenities In-Building"]:[],n=[...new Set([...t,...a])];w(c=>({...c,"Features - Amenities In-Building":n})),await x(o._id,{"Features - Amenities In-Building":n}),i("Common building amenities loaded!",`${a.length} amenities added`)}catch(a){console.error("[loadCommonBuildingAmenities] Error:",a),i("Error loading amenities","Please try again","error")}finally{ie(!1)}},[r,o,x,i]),Ae=l.useCallback(async()=>{const a=r["Location - Zip Code"]||(o==null?void 0:o["Location - Zip Code"]);if(!a){i("Missing ZIP code","Please add a ZIP code first to load the neighborhood template","error");return}ee(!0);try{const t={fullAddress:`${r["Location - City"]||(o==null?void 0:o["Location - City"])||""}, ${r["Location - State"]||(o==null?void 0:o["Location - State"])||""}`,city:r["Location - City"]||(o==null?void 0:o["Location - City"])||"",state:r["Location - State"]||(o==null?void 0:o["Location - State"])||"",zip:a},n=await ao(a,t);n&&n.description?(y("Description - Neighborhood",n.description),n.source==="ai"?i("Description generated!","AI-generated neighborhood description based on address"):i("Template loaded!",`Loaded description for ${n.neighborhoodName||"neighborhood"}`)):i("Could not load template",`No description available for ZIP: ${a}`,"error")}catch(t){console.error("[loadNeighborhoodTemplate] Error:",t),i("Error loading template","Please try again","error")}finally{ee(!1)}},[r,o,y,i]),z=l.useCallback(()=>({listingName:r.Name||(o==null?void 0:o.Name)||"",address:`${r["Location - City"]||(o==null?void 0:o["Location - City"])||""}, ${r["Location - State"]||(o==null?void 0:o["Location - State"])||""}`,neighborhood:r["Location - Hood"]||(o==null?void 0:o["Location - Hood"])||r["Location - Borough"]||(o==null?void 0:o["Location - Borough"])||"",borough:r["Location - Borough"]||(o==null?void 0:o["Location - Borough"])||"",typeOfSpace:r["Features - Type of Space"]||(o==null?void 0:o["Features - Type of Space"])||"",bedrooms:r["Features - Qty Bedrooms"]??(o==null?void 0:o["Features - Qty Bedrooms"])??0,beds:r["Features - Qty Beds"]??(o==null?void 0:o["Features - Qty Beds"])??0,bathrooms:r["Features - Qty Bathrooms"]??(o==null?void 0:o["Features - Qty Bathrooms"])??0,kitchenType:r["Kitchen Type"]||(o==null?void 0:o["Kitchen Type"])||"",amenitiesInsideUnit:r["Features - Amenities In-Unit"]||(o==null?void 0:o["Features - Amenities In-Unit"])||[],amenitiesOutsideUnit:r["Features - Amenities In-Building"]||(o==null?void 0:o["Features - Amenities In-Building"])||[]}),[r,o]),Ie=l.useCallback(async()=>{Y(!0);try{const a=z();if(!a.neighborhood&&!a.typeOfSpace){i("Missing data","Please fill in neighborhood or space type first","error");return}console.log("[EditListingDetails] Generating AI title with data:",a);const t=await Ge(a);t?(y("Name",t),i("Title generated!","AI title applied successfully")):i("Could not generate title","Please try again","error")}catch(a){console.error("[EditListingDetails] Error generating title:",a);const t=a instanceof Error?a.message:"Unknown error";i("Error generating title",t,"error")}finally{Y(!1)}},[z,y,i]),Be=l.useCallback(async()=>{$(!0);try{const a=z();console.log("[EditListingDetails] Generating AI description with data:",a);const t=await ze(a);t?(y("Description",t),i("Description generated!","AI description applied successfully")):i("Could not generate description","Please try again","error")}catch(a){console.error("[EditListingDetails] Error generating description:",a);const t=a instanceof Error?a.message:"Unknown error";i("Error generating description",t,"error")}finally{$(!1)}},[z,y,i]),Pe=l.useCallback(()=>{const a=prompt("Enter image URL:");if(a){const t=Array.isArray(r["Features - Photos"])?r["Features - Photos"]:[];y("Features - Photos",[...t,a])}},[r,y]),s=l.useCallback(async a=>{const t=a.target.files;if(!t||t.length===0)return;de(!0);const n=Array.isArray(r["Features - Photos"])?r["Features - Photos"]:[];try{const c=[];for(let j=0;j<t.length;j++){const N=t[j],F={file:N,url:URL.createObjectURL(N)},Z=await Je(F,o._id,n.length+j);c.push(Z.url)}const h=[...n,...c];y("Features - Photos",h);const f=await x(o._id,{"Features - Photos":h});k(f),i(`${c.length} photo(s) uploaded!`,"Photos saved successfully")}catch(c){console.error("[handlePhotoUpload] Error:",c),i("Error uploading photos",c.message||"Please try again","error")}finally{de(!1),a.target.value=""}},[r,o,y,x,k,i]),A=l.useCallback(async a=>{const t=Array.isArray(r["Features - Photos"])?r["Features - Photos"]:[],n=t.filter((c,h)=>h!==a);y("Features - Photos",n);try{const c=await x(o._id,{"Features - Photos":n});k(c),i("Photo removed","Changes saved")}catch(c){console.error("[removePhoto] Error:",c),i("Error removing photo","Please try again","error"),y("Features - Photos",t)}},[r,o,y,x,k,i]),_=l.useCallback(a=>{G(a)},[]),te=l.useCallback((a,t)=>{a.preventDefault(),R(t)},[]),C=l.useCallback(()=>{R(null)},[]),I=l.useCallback(async(a,t)=>{if(a.preventDefault(),T===null||T===t){G(null),R(null);return}const n=Array.isArray(r["Features - Photos"])?r["Features - Photos"]:[],c=[...n],[h]=c.splice(T,1);c.splice(t,0,h),y("Features - Photos",c),G(null),R(null);try{const f=await x(o._id,{"Features - Photos":c});k(f),i("Photos reordered","Changes saved")}catch(f){console.error("[handlePhotoDrop] Error:",f),i("Error reordering photos","Please try again","error"),y("Features - Photos",n)}},[r,T,o,y,x,k,i]),O=l.useCallback(()=>{G(null),R(null)},[]),_e=l.useCallback(()=>{switch(d){case"name":return"Property Info";case"description":return"Description of Lodging";case"neighborhood":return"Neighborhood Description";case"location":return"Property Info";case"details":return"Details";case"rules":return"Rules";case"availability":return"Availability";case"photos":return"Photos";case"amenities":return"Amenities";default:return"Edit Listing"}},[d]),Oe=l.useCallback(()=>{switch(d){case"name":return"Update listing name and the full property address";case"description":return"Please type in a new description";case"neighborhood":return"Please type in a new neighborhood description";case"amenities":return"Select amenities available in your listing";case"rules":return"Set house rules and guest policies";case"details":return"Update space specifications and safety features";default:return""}},[d]),Ue=Array.isArray(r["Features - Amenities In-Unit"])?r["Features - Amenities In-Unit"]:[],$e=Array.isArray(r["Features - Amenities In-Building"])?r["Features - Amenities In-Building"]:[],Me=Array.isArray(r["Features - House Rules"])?r["Features - House Rules"]:[],We=Array.isArray(r["Features - Safety"])?r["Features - Safety"]:[],He=Array.isArray(r["Features - Photos"])?r["Features - Photos"]:[];return{formData:r,isLoading:V,isGeneratingTitle:le,isGeneratingDescription:ne,isLoadingInUnitAmenities:X,isLoadingBuildingAmenities:p,isLoadingRules:xe,isLoadingSafetyFeatures:P,isLoadingNeighborhood:W,isUploadingPhotos:v,toast:oe,expandedSections:je,draggedPhotoIndex:T,dragOverPhotoIndex:ve,addressInputRef:H,isAddressValid:ae,addressError:g,showManualAddress:ye,addressInputValue:be,fieldRefs:ue,inUnitAmenities:Ue,buildingAmenities:$e,selectedRules:Me,safetyFeatures:We,photos:He,sectionTitle:_e(),sectionSubtitle:Oe(),handleInputChange:y,handleCheckboxAutosave:we,handleSave:Se,toggleSection:Fe,loadCommonRules:me,loadCommonSafetyFeatures:pe,loadCommonInUnitAmenities:ge,loadCommonBuildingAmenities:Le,loadNeighborhoodTemplate:Ae,generateAITitle:Ie,generateAIDescription:Be,addPhotoUrl:Pe,handlePhotoUpload:s,removePhoto:A,handlePhotoDragStart:_,handlePhotoDragOver:te,handlePhotoDragLeave:C,handlePhotoDrop:I,handlePhotoDragEnd:O,dismissToast:Ce,onClose:m,handleAddressInputChange:Ne,handleManualAddressToggle:ke}}const io=["Air Conditioned","Bedding","Blackout Curtains/Blinds","Closet","Coffee Maker","Computer","Dedicated Workspace","Dishwasher","Dryer","Espresso Machine","Fireplace","Garbage Disposal","Hair Dryer","Hangers","Iron/Ironing Board","Locked Door","Locked Storage","Patio/Backyard","Portable Fans","Premium TV","Printer","Private bathroom","Self Check In","Shared Storage","Towels and Linens","TV","Washer","WiFi"],co=["BBQ Grill","Bike Storage","Common Outdoor Space","Courtyard","Dog park","Doorman","Dry Cleaning","Elevator","Gated","Gym","Hot Tub","Indoor Swimming Pool","Laundromat Nearby","Laundry Room","Lounge","Mail Room","Outdoor Swimming Pool","Package Room"],uo=["Clear Common Areas","Conserve Water","Don't Move Furniture","Flush Toilet Paper ONLY","Lock Doors","Maximum Occupancy","No Access On Off Days","No Candles","No Drinking","No Drugs","No Entertaining","No Food in Bedroom","No Food In Sink","No Guests","No Opening Windows","No Overnight Guests","No Package Delivery","No Parties","No Pets","No Shoes Inside","No Smoking Inside","No Smoking Outside","No Strong Scented Foods","Not Suitable for Children","Off Limit Areas","Pay to Use Washer and Dryer","Quiet Hours","Recycle","Take Out Trash","Wash Your Dishes"],ho=["Carbon Monoxide Detector","Fire Extinguisher","Fire Sprinklers","First Aid Kit","Lock on Bedroom Door","Smoke Detector"],mo=[{value:"1569530159044x216130979074711000",label:"Private Room"},{value:"1569530331984x152755544104023800",label:"Entire Place"},{value:"1585742011301x719941865479153400",label:"Shared Room"}],po=[{value:"Full Kitchen",label:"Full Kitchen"},{value:"Kitchenette",label:"Kitchenette"},{value:"No Kitchen",label:"No Kitchen"},{value:"Kitchen Not Accessible",label:"Kitchen Not Accessible"}],go=[{value:"In the room",label:"In the room"},{value:"In a locked closet",label:"In a locked closet"},{value:"In a suitcase",label:"In a suitcase"}],fo=[{value:0,label:"Studio"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"}],xo=[1,2,3,4,5,6,7],yo=[1,1.5,2,2.5,3,3.5,4,4.5,5,6],bo=[1,2,3,4,5,6],vo=[{value:"Manhattan",label:"Manhattan"},{value:"Brooklyn",label:"Brooklyn"},{value:"Queens",label:"Queens"},{value:"Bronx",label:"Bronx"},{value:"Staten Island",label:"Staten Island"},{value:"Hudson County NJ",label:"Hudson County NJ"},{value:"Bergen County NJ",label:"Bergen County NJ"},{value:"Essex County NJ",label:"Essex County NJ"}];function Ao({listing:o,editSection:d,focusField:u,onClose:m,onSave:k,updateListing:x}){const{formData:r,isLoading:w,isGeneratingTitle:U,isGeneratingDescription:V,isLoadingInUnitAmenities:q,isLoadingBuildingAmenities:le,isLoadingRules:Y,isLoadingSafetyFeatures:ne,isLoadingNeighborhood:$,isUploadingPhotos:X,toast:D,expandedSections:p,draggedPhotoIndex:ie,dragOverPhotoIndex:xe,addressInputRef:ce,isAddressValid:P,addressError:M,showManualAddress:W,addressInputValue:ee,fieldRefs:v,inUnitAmenities:de,buildingAmenities:oe,selectedRules:se,safetyFeatures:H,photos:Q,sectionTitle:ae,sectionSubtitle:E,handleInputChange:g,handleCheckboxAutosave:L,handleSave:ye,toggleSection:b,loadCommonRules:be,loadCommonSafetyFeatures:re,loadCommonInUnitAmenities:ue,loadCommonBuildingAmenities:T,loadNeighborhoodTemplate:G,generateAITitle:ve,generateAIDescription:R,handlePhotoUpload:je,removePhoto:he,handlePhotoDragStart:Ne,handlePhotoDragOver:ke,handlePhotoDragLeave:i,handlePhotoDrop:Ce,handlePhotoDragEnd:y,dismissToast:we,handleAddressInputChange:Se,handleManualAddressToggle:Fe}=no({listing:o,editSection:d,focusField:u,onClose:m,onSave:k,updateListing:x}),me=()=>e.jsxs("div",{className:"eld-collapsible-section",children:[e.jsxs("div",{className:"eld-collapsible-header",onClick:()=>b("name"),children:[e.jsxs("div",{className:"eld-collapsible-header-left",children:[e.jsx("span",{className:"eld-icon",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e.jsx("polyline",{points:"9,22 9,12 15,12 15,22"})]})}),e.jsx("h3",{children:"Property Info"})]}),e.jsx("div",{className:`eld-collapsible-toggle ${p.name?"expanded":""}`,children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6,9 12,15 18,9"})})})]}),e.jsxs("div",{className:`eld-collapsible-content ${p.name?"":"collapsed"}`,children:[e.jsxs("div",{className:"eld-form-field",children:[e.jsx("label",{className:"eld-form-label",children:"Listing Name"}),e.jsx("input",{type:"text",className:"eld-form-input",placeholder:"Enter listing name...",value:r.Name||"",onChange:s=>g("Name",s.target.value)})]}),e.jsx("div",{className:"eld-address-section",children:e.jsxs("div",{className:"eld-form-field",children:[e.jsxs("label",{className:"eld-form-label",children:["Listing Address",e.jsx("span",{className:"eld-address-note",children:" (private - will not be shared publicly)"})]}),e.jsxs("div",{className:"eld-address-input-wrapper",children:[e.jsx("input",{ref:ce,type:"text",className:`eld-form-input eld-address-input ${P?"eld-address-valid":""} ${M?"eld-address-error":""}`,placeholder:"Start typing your address...",value:ee,onChange:Se}),P&&e.jsx("span",{className:"eld-address-checkmark",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20,6 9,17 4,12"})})})]}),P&&e.jsx("p",{className:"eld-address-success",children:"Address verified"}),M&&e.jsxs("div",{className:"eld-address-error-message",children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),e.jsx("span",{children:M})]}),!P&&ee&&e.jsx("button",{type:"button",className:"eld-btn-link eld-manual-toggle",onClick:Fe,children:W?"Hide manual entry":"Can't find your address? Enter manually"})]})}),W&&!P&&e.jsxs("div",{className:`eld-manual-fields ${W&&!P?"eld-manual-fields-expanded":""}`,children:[W&&!P&&e.jsxs("p",{className:"eld-manual-hint",children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),"Please fill in the address details below"]}),e.jsxs("div",{className:"eld-form-grid",children:[e.jsxs("div",{className:"eld-form-field",children:[e.jsx("label",{className:"eld-form-label",children:"City"}),e.jsx("input",{type:"text",className:"eld-form-input",placeholder:"City",value:r["Location - City"]||"",onChange:s=>g("Location - City",s.target.value)})]}),e.jsxs("div",{className:"eld-form-field",children:[e.jsx("label",{className:"eld-form-label",children:"State"}),e.jsx("input",{type:"text",className:"eld-form-input",placeholder:"State (e.g., NY, NJ)",value:r["Location - State"]||"",onChange:s=>g("Location - State",s.target.value)})]})]}),e.jsxs("div",{className:"eld-form-grid",children:[e.jsxs("div",{className:"eld-form-field",children:[e.jsx("label",{className:"eld-form-label",children:"Zip Code"}),e.jsx("input",{type:"text",className:"eld-form-input",placeholder:"Zip Code",value:r["Location - Zip Code"]||"",onChange:s=>g("Location - Zip Code",s.target.value)})]}),e.jsxs("div",{className:"eld-form-field",children:[e.jsx("label",{className:"eld-form-label",children:"Borough/Area"}),e.jsxs("select",{className:"eld-form-input eld-form-select",value:r["Location - Borough"]||"",onChange:s=>g("Location - Borough",s.target.value),children:[e.jsx("option",{value:"",children:"Select Borough/Area"}),vo.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]})]})]})]})]}),pe=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"eld-collapsible-section",children:[e.jsxs("div",{className:"eld-collapsible-header",onClick:()=>b("title"),children:[e.jsxs("div",{className:"eld-collapsible-header-left",children:[e.jsx("span",{className:"eld-icon",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),e.jsx("h3",{children:"Listing Title"})]}),e.jsx("div",{className:`eld-collapsible-toggle ${p.title!==!1?"expanded":""}`,children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6,9 12,15 18,9"})})})]}),e.jsxs("div",{className:`eld-collapsible-content ${p.title===!1?"collapsed":""}`,children:[e.jsxs("div",{className:"eld-label-with-action",children:[e.jsx("label",{className:"eld-form-label",children:"Listing Name"}),e.jsx("button",{type:"button",className:"eld-btn-link",onClick:ve,disabled:U,children:U?"generating...":"generate with AI"})]}),e.jsx("div",{className:"eld-form-field",children:e.jsx("input",{type:"text",className:"eld-form-input",placeholder:"Enter a catchy title for your listing...",value:r.Name||"",onChange:s=>g("Name",s.target.value)})}),e.jsx("p",{className:"eld-form-helper",children:"A good title highlights your space's best feature and location"})]})]}),e.jsxs("div",{className:"eld-collapsible-section",children:[e.jsxs("div",{className:"eld-collapsible-header",onClick:()=>b("description"),children:[e.jsxs("div",{className:"eld-collapsible-header-left",children:[e.jsx("span",{className:"eld-icon",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]})}),e.jsx("h3",{children:"Description of Lodging"})]}),e.jsx("div",{className:`eld-collapsible-toggle ${p.description?"expanded":""}`,children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6,9 12,15 18,9"})})})]}),e.jsxs("div",{className:`eld-collapsible-content ${p.description?"":"collapsed"}`,children:[e.jsxs("div",{className:"eld-label-with-action",children:[e.jsx("label",{className:"eld-form-label",children:"Description"}),e.jsx("button",{type:"button",className:"eld-btn-link",onClick:R,disabled:V||$,children:V?"generating...":"generate with AI"})]}),e.jsx("div",{className:"eld-form-field",children:e.jsx("textarea",{className:"eld-form-textarea",placeholder:"Describe your listing in detail...",value:r.Description||"",onChange:s=>g("Description",s.target.value),rows:8})}),e.jsx("p",{className:"eld-form-helper",children:"A compelling description highlights your space's unique features and lifestyle benefits"})]})]})]}),ge=()=>e.jsxs("div",{className:"eld-collapsible-section",children:[e.jsxs("div",{className:"eld-collapsible-header",onClick:()=>b("neighborhood"),children:[e.jsxs("div",{className:"eld-collapsible-header-left",children:[e.jsx("span",{className:"eld-icon",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]})}),e.jsx("h3",{children:"Neighborhood Description"})]}),e.jsx("div",{className:`eld-collapsible-toggle ${p.neighborhood?"expanded":""}`,children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6,9 12,15 18,9"})})})]}),e.jsxs("div",{className:`eld-collapsible-content ${p.neighborhood?"":"collapsed"}`,children:[e.jsxs("div",{className:"eld-label-with-action",style:{marginBottom:"12px"},children:[e.jsx("label",{className:"eld-form-label",children:"Neighborhood Description"}),e.jsx("button",{type:"button",className:"eld-btn-link",onClick:G,disabled:$||V,children:$?"loading...":"load template"})]}),e.jsx("div",{className:"eld-form-field",children:e.jsx("textarea",{className:"eld-form-textarea",placeholder:"Describe the neighborhood, nearby attractions, transportation...",value:r["Description - Neighborhood"]||"",onChange:s=>g("Description - Neighborhood",s.target.value),rows:6})})]})]}),Le=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"eld-collapsible-section",children:[e.jsxs("div",{className:"eld-collapsible-header",onClick:()=>b("amenities"),children:[e.jsxs("div",{className:"eld-collapsible-header-left",children:[e.jsx("span",{className:"eld-icon",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"9,11 12,14 22,4"}),e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]})}),e.jsx("h3",{children:"In-Unit Amenities"})]}),e.jsx("div",{className:`eld-collapsible-toggle ${p.amenities?"expanded":""}`,children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6,9 12,15 18,9"})})})]}),e.jsxs("div",{className:`eld-collapsible-content ${p.amenities?"":"collapsed"}`,children:[e.jsxs("div",{className:"eld-label-with-action",children:[e.jsx("p",{className:"eld-form-helper",children:"Changes are saved automatically when you check/uncheck items"}),e.jsx("button",{type:"button",className:"eld-btn-link",onClick:ue,disabled:q,children:q?"loading...":"load common"})]}),e.jsx("div",{className:"eld-checkbox-grid",children:io.map(s=>e.jsxs("label",{className:"eld-checkbox-item",children:[e.jsx("input",{type:"checkbox",checked:de.includes(s),onChange:A=>L("Features - Amenities In-Unit",s,A.target.checked,"Amenity")}),e.jsx("span",{children:s})]},s))})]})]}),e.jsxs("div",{className:"eld-collapsible-section",ref:v.building,children:[e.jsxs("div",{className:"eld-collapsible-header",onClick:()=>b("building"),children:[e.jsxs("div",{className:"eld-collapsible-header-left",children:[e.jsx("span",{className:"eld-icon",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e.jsx("polyline",{points:"9,22 9,12 15,12 15,22"})]})}),e.jsx("h3",{children:"Building / Neighborhood Amenities"})]}),e.jsx("div",{className:`eld-collapsible-toggle ${p.building!==!1?"expanded":""}`,children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6,9 12,15 18,9"})})})]}),e.jsxs("div",{className:`eld-collapsible-content ${p.building===!1?"collapsed":""}`,children:[e.jsxs("div",{className:"eld-label-with-action",children:[e.jsx("p",{className:"eld-form-helper",children:"Changes are saved automatically when you check/uncheck items"}),e.jsx("button",{type:"button",className:"eld-btn-link",onClick:T,disabled:le,children:le?"loading...":"load common"})]}),e.jsx("div",{className:"eld-checkbox-grid",children:co.map(s=>e.jsxs("label",{className:"eld-checkbox-item",children:[e.jsx("input",{type:"checkbox",checked:oe.includes(s),onChange:A=>L("Features - Amenities In-Building",s,A.target.checked,"Amenity")}),e.jsx("span",{children:s})]},s))})]})]})]}),Ae=()=>e.jsxs("div",{className:"eld-collapsible-section",children:[e.jsxs("div",{className:"eld-collapsible-header",onClick:()=>b("rules"),children:[e.jsxs("div",{className:"eld-collapsible-header-left",children:[e.jsx("span",{className:"eld-icon",children:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})}),e.jsx("h3",{children:"House Rules"})]}),e.jsx("div",{className:`eld-collapsible-toggle ${p.rules?"expanded":""}`,children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6,9 12,15 18,9"})})})]}),e.jsxs("div",{className:`eld-collapsible-content ${p.rules?"":"collapsed"}`,children:[e.jsxs("div",{className:"eld-label-with-action",children:[e.jsx("p",{className:"eld-form-helper",children:"Rules are autosaved when checked/unchecked"}),e.jsx("button",{type:"button",className:"eld-btn-link",onClick:be,disabled:Y,children:Y?"loading...":"load common"})]}),e.jsx("div",{className:"eld-checkbox-grid",children:uo.map(s=>e.jsxs("label",{className:"eld-checkbox-item",children:[e.jsx("input",{type:"checkbox",checked:se.includes(s),onChange:A=>L("Features - House Rules",s,A.target.checked,"House Rule")}),e.jsx("span",{children:s})]},s))}),e.jsx("div",{className:"eld-form-grid",style:{marginTop:"20px"},children:e.jsxs("div",{className:"eld-form-field",children:[e.jsx("label",{className:"eld-form-label",children:"Max Guests Allowed"}),e.jsxs("select",{ref:v.maxGuests,className:"eld-form-select",value:r["Features - Qty Guests"]??"",onChange:s=>g("Features - Qty Guests",s.target.value?parseInt(s.target.value):null),children:[e.jsx("option",{value:"",children:"Select"}),bo.map(s=>e.jsx("option",{value:s,children:s},s))]})]})})]})]}),z=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"eld-collapsible-section",children:[e.jsxs("div",{className:"eld-collapsible-header",onClick:()=>b("storage"),children:[e.jsxs("div",{className:"eld-collapsible-header-left",children:[e.jsx("span",{className:"eld-icon",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e.jsx("polyline",{points:"9,22 9,12 15,12 15,22"})]})}),e.jsx("h3",{children:"Storage and Space"})]}),e.jsx("div",{className:`eld-collapsible-toggle ${p.storage?"expanded":""}`,children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6,9 12,15 18,9"})})})]}),e.jsxs("div",{className:`eld-collapsible-content ${p.storage?"":"collapsed"}`,children:[e.jsxs("div",{className:"eld-form-grid",children:[e.jsxs("div",{className:"eld-form-field",children:[e.jsx("label",{className:"eld-form-label",children:"Est. square footage of room"}),e.jsx("input",{ref:v.sqftRoom,type:"number",className:"eld-form-input",placeholder:"SQFT",value:r["Features - SQFT of Room"]??"",onChange:s=>g("Features - SQFT of Room",s.target.value?parseInt(s.target.value):null)})]}),e.jsxs("div",{className:"eld-form-field",children:[e.jsx("label",{className:"eld-form-label",children:"Est. square footage of home"}),e.jsx("input",{ref:v.sqftHome,type:"number",className:"eld-form-input",placeholder:"SQFT",value:r["Features - SQFT Area"]??"",onChange:s=>g("Features - SQFT Area",s.target.value?parseInt(s.target.value):null)})]})]}),e.jsxs("div",{className:"eld-form-field",children:[e.jsx("label",{className:"eld-form-label",children:"What type of storage do you offer?"}),e.jsxs("select",{ref:v.storage,className:"eld-form-select",value:r["Features - Secure Storage Option"]||"",onChange:s=>g("Features - Secure Storage Option",s.target.value),children:[e.jsx("option",{value:"",children:"Select storage type"}),go.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]}),e.jsxs("div",{className:"eld-form-field",children:[e.jsx("label",{className:"eld-form-label",children:"What parking options are available?"}),e.jsxs("select",{ref:v.parking,className:"eld-form-select",value:r["Features - Parking type"]||"",onChange:s=>g("Features - Parking type",s.target.value),children:[e.jsx("option",{value:"",children:"Select parking"}),Ye().map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))]})]})]})]}),e.jsxs("div",{className:"eld-collapsible-section",children:[e.jsxs("div",{className:"eld-collapsible-header",onClick:()=>b("safety"),children:[e.jsxs("div",{className:"eld-collapsible-header-left",children:[e.jsx("span",{className:"eld-icon",children:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"})})}),e.jsx("h3",{children:"Safety Features"})]}),e.jsx("div",{className:`eld-collapsible-toggle ${p.safety?"expanded":""}`,children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6,9 12,15 18,9"})})})]}),e.jsxs("div",{className:`eld-collapsible-content ${p.safety?"":"collapsed"}`,children:[e.jsxs("div",{className:"eld-label-with-action",children:[e.jsx("p",{className:"eld-form-helper",children:"Safety features are autosaved when checked"}),e.jsx("button",{type:"button",className:"eld-btn-link",onClick:re,disabled:ne,children:ne?"loading...":"load common"})]}),e.jsx("div",{className:"eld-checkbox-grid",children:ho.map(s=>e.jsxs("label",{className:"eld-checkbox-item",children:[e.jsx("input",{type:"checkbox",checked:H.includes(s),onChange:A=>L("Features - Safety",s,A.target.checked,"Safety feature")}),e.jsx("span",{children:s})]},s))})]})]}),e.jsxs("div",{className:"eld-collapsible-section",children:[e.jsxs("div",{className:"eld-collapsible-header",onClick:()=>b("space"),children:[e.jsxs("div",{className:"eld-collapsible-header-left",children:[e.jsx("span",{className:"eld-icon",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),e.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),e.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),e.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),e.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),e.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]})}),e.jsx("h3",{children:"Space Details"})]}),e.jsx("div",{className:`eld-collapsible-toggle ${p.space?"expanded":""}`,children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6,9 12,15 18,9"})})})]}),e.jsxs("div",{className:`eld-collapsible-content ${p.space?"":"collapsed"}`,children:[e.jsxs("div",{className:"eld-form-field",children:[e.jsx("label",{className:"eld-form-label",children:"Type of Space"}),e.jsxs("select",{ref:v.spaceType,className:"eld-form-select",value:r["Features - Type of Space"]||"",onChange:s=>g("Features - Type of Space",s.target.value),children:[e.jsx("option",{value:"",children:"Select type"}),mo.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]}),e.jsxs("div",{className:"eld-form-grid-3",children:[e.jsxs("div",{className:"eld-form-field",children:[e.jsx("label",{className:"eld-form-label",children:"Bedrooms*"}),e.jsxs("select",{ref:v.bedrooms,className:"eld-form-select",value:r["Features - Qty Bedrooms"]??"",onChange:s=>g("Features - Qty Bedrooms",s.target.value!==""?parseInt(s.target.value):null),children:[e.jsx("option",{value:"",children:"Select"}),fo.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]}),e.jsxs("div",{className:"eld-form-field",children:[e.jsx("label",{className:"eld-form-label",children:"Beds"}),e.jsxs("select",{ref:v.beds,className:"eld-form-select",value:r["Features - Qty Beds"]??"",onChange:s=>g("Features - Qty Beds",s.target.value?parseInt(s.target.value):null),children:[e.jsx("option",{value:"",children:"Select"}),xo.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"eld-form-field",children:[e.jsx("label",{className:"eld-form-label",children:"Bathrooms*"}),e.jsxs("select",{ref:v.bathrooms,className:"eld-form-select",value:r["Features - Qty Bathrooms"]??"",onChange:s=>g("Features - Qty Bathrooms",s.target.value?parseFloat(s.target.value):null),children:[e.jsx("option",{value:"",children:"Select"}),yo.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"eld-form-field",children:[e.jsx("label",{className:"eld-form-label",children:"Kitchen Style"}),e.jsxs("select",{ref:v.kitchen,className:"eld-form-select",value:r["Kitchen Type"]||"",onChange:s=>g("Kitchen Type",s.target.value),children:[e.jsx("option",{value:"",children:"Select kitchen style"}),po.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]})]})]})]}),Ie=()=>e.jsxs("div",{className:"eld-collapsible-section",children:[e.jsxs("div",{className:"eld-collapsible-header",onClick:()=>b("availability"),children:[e.jsxs("div",{className:"eld-collapsible-header-left",children:[e.jsx("span",{className:"eld-icon",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),e.jsx("h3",{children:"Availability Settings"})]}),e.jsx("div",{className:`eld-collapsible-toggle ${p.availability?"expanded":""}`,children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6,9 12,15 18,9"})})})]}),e.jsxs("div",{className:`eld-collapsible-content ${p.availability?"":"collapsed"}`,children:[e.jsxs("div",{className:"eld-form-field",children:[e.jsx("label",{className:"eld-form-label",children:"Earliest Rent Date"}),e.jsx("input",{ref:v.firstAvailable,type:"date",className:"eld-form-input",value:r["First Available"]||"",onChange:s=>g("First Available",s.target.value)})]}),e.jsxs("div",{className:"eld-form-grid",children:[e.jsxs("div",{className:"eld-form-field",children:[e.jsx("label",{className:"eld-form-label",children:"Minimum Nights"}),e.jsx("input",{ref:v.minNights,type:"number",className:"eld-form-input",placeholder:"Min",value:r["Minimum Nights"]??"",onChange:s=>g("Minimum Nights",s.target.value?parseInt(s.target.value):null)})]}),e.jsxs("div",{className:"eld-form-field",children:[e.jsx("label",{className:"eld-form-label",children:"Maximum Nights"}),e.jsx("input",{ref:v.maxNights,type:"number",className:"eld-form-input",placeholder:"Max",value:r["Maximum Nights"]??"",onChange:s=>g("Maximum Nights",s.target.value?parseInt(s.target.value):null)})]})]}),e.jsxs("div",{className:"eld-form-field",children:[e.jsx("label",{className:"eld-form-label",children:"Cancellation Policy"}),e.jsxs("select",{ref:v.cancellation,className:"eld-form-select",value:r["Cancellation Policy"]||"",onChange:s=>g("Cancellation Policy",s.target.value),children:[e.jsx("option",{value:"",children:"Select policy"}),qe().map(s=>e.jsx("option",{value:s.id,children:s.display},s.id))]})]})]})]}),Be=()=>{const s=C=>C&&/^\d{10,}x\d+$/.test(C),A=C=>C&&(C.startsWith("http://")||C.startsWith("https://")||C.startsWith("//")),_=Q.filter(C=>A(String(C))),te=Q.filter(C=>s(String(C)));return e.jsxs("div",{className:"eld-collapsible-section",children:[e.jsxs("div",{className:"eld-collapsible-header",onClick:()=>b("photos"),children:[e.jsxs("div",{className:"eld-collapsible-header-left",children:[e.jsx("span",{className:"eld-icon",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.jsx("polyline",{points:"21,15 16,10 5,21"})]})}),e.jsx("h3",{children:"Listing Photos"})]}),e.jsx("div",{className:`eld-collapsible-toggle ${p.photos?"expanded":""}`,children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6,9 12,15 18,9"})})})]}),e.jsxs("div",{className:`eld-collapsible-content ${p.photos?"":"collapsed"}`,children:[e.jsxs("label",{className:`eld-photo-zone ${X?"uploading":""}`,children:[e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:je,disabled:X,style:{display:"none"}}),e.jsx("div",{className:"eld-photo-zone-content",children:X?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"eld-upload-spinner"}),e.jsx("p",{className:"eld-photo-zone-title",children:"Uploading..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"17 8 12 3 7 8"}),e.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),e.jsx("p",{className:"eld-photo-zone-title",children:"Click to upload photos"}),e.jsx("p",{className:"eld-photo-zone-subtitle",children:"or drag and drop files here"})]})})]}),e.jsxs("div",{className:"eld-photo-count",children:[_.length," photo",_.length!==1?"s":""," uploaded"]}),te.length>0&&e.jsxs("div",{className:"eld-current-value",style:{marginTop:"12px",marginBottom:"12px"},children:[e.jsxs("strong",{children:[te.length," photo(s)"]})," linked from database"]}),_.length>0&&e.jsxs("div",{className:"eld-photo-gallery",children:[e.jsx("p",{className:"eld-drag-hint",children:"Drag and drop photos to reorder. First photo is the cover photo."}),e.jsx("div",{className:"eld-photo-grid",children:_.map((C,I)=>e.jsxs("div",{className:`eld-photo-item ${ie===I?"dragging":""} ${xe===I?"drag-over":""}`,draggable:!0,onDragStart:()=>Ne(I),onDragOver:O=>ke(O,I),onDragLeave:i,onDrop:O=>Ce(O,I),onDragEnd:y,children:[e.jsx("img",{src:String(C),alt:`Photo ${I+1}`,onError:O=>{O.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><rect fill="%23f0f0f0" width="100" height="100"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="%23999">Error</text></svg>'}}),e.jsx("div",{className:"eld-photo-controls",children:e.jsx("button",{type:"button",onClick:()=>he(I),className:"eld-photo-delete",title:"Remove photo",children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})}),I===0&&e.jsx("div",{className:"eld-photo-badge",children:"Cover"})]},I))})]}),_.length===0&&te.length===0&&e.jsxs("div",{className:"eld-empty-state",children:[e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.jsx("polyline",{points:"21,15 16,10 5,21"})]}),e.jsx("p",{children:"No photos added yet"})]})]})]})},Pe=()=>{switch(d){case"name":case"location":return me();case"description":return pe();case"neighborhood":return ge();case"amenities":return Le();case"rules":return Ae();case"details":return z();case"availability":return Ie();case"photos":return Be();default:return e.jsxs(e.Fragment,{children:[me(),pe(),ge()]})}};return e.jsxs("div",{className:"eld-popup-overlay",onClick:s=>s.target===s.currentTarget&&m(),children:[e.jsxs("div",{className:"eld-popup-container",children:[e.jsxs("div",{className:"eld-popup-header",children:[e.jsx("h2",{children:ae}),e.jsx("button",{className:"eld-popup-close",onClick:m,"aria-label":"Close",children:"Ã—"})]}),E&&e.jsx("p",{className:"eld-popup-subtitle",children:E}),e.jsx("div",{className:"eld-popup-body",children:Pe()}),e.jsxs("div",{className:"eld-button-group",children:[e.jsx("button",{className:"eld-btn eld-btn-secondary",onClick:m,disabled:w,children:"Cancel"}),e.jsx("button",{className:"eld-btn eld-btn-primary",onClick:ye,disabled:w,children:w?"Saving...":"Save"})]})]}),D&&e.jsxs("div",{className:`eld-toast eld-toast-${D.type}`,children:[e.jsx("button",{className:"eld-toast-close",onClick:we,children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),e.jsx("div",{className:"eld-toast-message",children:D.message}),D.subMessage&&e.jsx("div",{className:"eld-toast-submessage",children:D.subMessage})]})]})}export{Ao as E,oo as a,Lo as b,so as c,Xe as d,eo as g};
