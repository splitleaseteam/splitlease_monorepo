import{r as h,j as t}from"./client-BJVKzfAi.js";function L({isOpen:l,onClose:u,triggerRef:i,title:T="Information",content:n="",expandedContent:v=null,showMoreAvailable:y=!1,listing:s=null,selectedDaysCount:b=null}){var k;const p=h.useRef(null),[E,I]=h.useState({top:0,left:0}),[d,g]=h.useState(!1);if(h.useEffect(()=>{if(!l||!(i!=null&&i.current)||!p.current)return;const e=()=>{const o=i.current.getBoundingClientRect(),a=p.current.getBoundingClientRect(),f=window.innerWidth,c=window.innerHeight;let m=o.left+o.width/2-a.width/2;m+a.width>f-16&&(m=f-a.width-16),m<16&&(m=16);let x=o.bottom+10;x+a.height>c-16&&(x=o.top-a.height-10),x<16&&(x=16),I({top:x,left:m})};return requestAnimationFrame(e),window.addEventListener("resize",e),window.addEventListener("scroll",e,!0),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",e,!0)}},[l,i,d]),h.useEffect(()=>{if(!l)return;const e=o=>{o.key==="Escape"&&u()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[l,u]),h.useEffect(()=>{if(!l)return;const e=o=>{p.current&&!p.current.contains(o.target)&&(i!=null&&i.current)&&!i.current.contains(o.target)&&(u(),g(!1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[l,u,i]),!l)return null;let r=n,w=y,j=T;if(console.log("ðŸ” InformationalText rendering:",{isOpen:l,hasListing:!!s,selectedDaysCount:b,content:n==null?void 0:n.substring(0,50),contentLength:n==null?void 0:n.length,hasExplicitContent:!!n}),n&&n.trim()!=="")r=d&&v||n,w=y&&v;else if(s&&b!==null){const e=[{nights:2,price:s["Price 2 nights selected"]},{nights:3,price:s["Price 3 nights selected"]},{nights:4,price:s["Price 4 nights selected"]},{nights:5,price:s["Price 5 nights selected"]},{nights:7,price:s["Price 7 nights selected"]}].filter(c=>c.price!==null&&c.price!==void 0),a=`The starting nightly price is $${(s["Starting nightly price"]||((k=s.price)==null?void 0:k.starting)||0).toFixed(2)}. Pricing varies based on how many nights per week you select.`,f=e.length>0?e.map(c=>`${c.nights} nights/week: $${c.price.toFixed(2)}/night`).join(`
`):"No pricing tiers available for this listing.";r=d?f:a,w=e.length>0,j="Pricing Information"}return(!r||r.trim()==="")&&(console.warn("âš ï¸ InformationalText: Empty content detected, using fallback"),r="Information not available at this time. Please contact support for details."),console.log("ðŸ“Š Final displayContent:",{length:r==null?void 0:r.length,preview:r==null?void 0:r.substring(0,50)}),t.jsxs("div",{ref:p,style:{position:"fixed",top:`${E.top}px`,left:`${E.left}px`,background:"white",borderRadius:"0.5rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",border:"1px solid #e5e7eb",padding:"1rem",width:"calc(100% - 32px)",maxWidth:"28rem",zIndex:10001,animation:"fadeIn 0.15s ease-out"},onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"1rem",marginBottom:"0.75rem"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[t.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"#3b82f6",children:t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})}),t.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#111827",margin:0},children:j})]}),t.jsx("button",{onClick:()=>{u(),g(!1)},style:{flexShrink:0,padding:"0.25rem",borderRadius:"0.375rem",color:"#9ca3af",background:"transparent",border:"none",cursor:"pointer",transition:"all 0.15s"},onMouseEnter:e=>{e.currentTarget.style.color="#4b5563",e.currentTarget.style.background="#f3f4f6"},onMouseLeave:e=>{e.currentTarget.style.color="#9ca3af",e.currentTarget.style.background="transparent"},children:t.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),t.jsx("div",{style:{color:"#374151",fontSize:"0.875rem",lineHeight:"1.5"},children:t.jsx("p",{style:{marginBottom:"0.5rem",whiteSpace:"pre-line"},children:r})}),w&&t.jsxs("button",{onClick:()=>g(!d),style:{marginTop:"0.75rem",display:"flex",alignItems:"center",gap:"0.375rem",fontSize:"0.875rem",fontWeight:"500",color:"#2563eb",background:"transparent",border:"none",cursor:"pointer",transition:"color 0.15s"},onMouseEnter:e=>{e.currentTarget.style.color="#1d4ed8"},onMouseLeave:e=>{e.currentTarget.style.color="#2563eb"},children:[t.jsx("span",{children:d?"Show less":"Show more"}),t.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t.jsx("polyline",{points:d?"18 15 12 9 6 15":"6 9 12 15 18 9"})})]})]})}export{L as I};
