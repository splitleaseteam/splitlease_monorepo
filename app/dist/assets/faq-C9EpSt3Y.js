import{r as n,j as e,c as R,R as G}from"./client-BJVKzfAi.js";import{H}from"./Header-BJKWma2V.js";import{F as L}from"./Footer-Bzf1rLKh.js";import{s as T}from"./supabase-BoCLEw6R.js";import{s as _}from"./faq-DgUULKJI.js";import{E as z}from"./ErrorBoundary-9_HbXv1y.js";/* empty css             */import"./config-QPKPRtag.js";import"./auth-QZ4BJadW.js";import"./constants-CPVJY5eo.js";import"./Toast-BQk6Nzgd.js";import"./proposalDataFetcher-CipdyWU2.js";import"./proposalStatuses-1Bj0NYR4.js";function B(){const[t,o]=n.useState("general"),[m,f]=n.useState({general:[],travelers:[],hosts:[]}),[d,j]=n.useState(!0),[b,v]=n.useState(null),[a,r]=n.useState(null),[N,c]=n.useState(!1),[u,p]=n.useState({name:"",email:"",inquiry:""}),[y,q]=n.useState(!1),[Q,C]=n.useState(!1),[E,h]=n.useState(null);n.useEffect(()=>{const s=new URLSearchParams(window.location.search),l=s.get("section"),i=s.get("question");if(l){const g={travelers:"travelers",hosts:"hosts",general:"general",guest:"travelers",host:"hosts"}[l.toLowerCase()];g&&o(g)}i&&r(i.toLowerCase()),A()},[]);async function A(){try{j(!0),v(null);const{data:s,error:l}=await T.schema("reference_table").from("zat_faq").select("_id, Question, Answer, Category, sub-category").order("Category",{ascending:!0}).order("sub-category",{ascending:!0});if(l)throw l;const i={general:"General",travelers:"Guest",hosts:"Host"},x={general:[],travelers:[],hosts:[]};s.forEach(g=>{for(const[S,M]of Object.entries(i))if(g.Category===M){x[S].push(g);break}}),f(x)}catch(s){console.error("Error loading FAQs:",s),v("Unable to load FAQs. Please try again later.")}finally{j(!1)}}const F=s=>{o(s)},P=async s=>{s.preventDefault(),q(!0),h(null);const{name:l,email:i,inquiry:x}=u;if(!l||!i||!x){h("Please fill in all fields"),q(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)){h("Please enter a valid email address"),q(!1);return}try{await _({name:l,email:i,inquiry:x}),C(!0),p({name:"",email:"",inquiry:""})}catch(S){console.error("Error sending inquiry:",S),h(S.message||"Failed to send inquiry. Please try again.")}finally{q(!1)}},w=(s,l)=>{p(i=>({...i,[s]:l}))},$=s=>{s.preventDefault(),c(!0),C(!1),h(null)},I=()=>{c(!1),p({name:"",email:"",inquiry:""}),h(null),C(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(H,{}),e.jsxs("section",{className:"hero",children:[e.jsx("h1",{className:"hero-title",children:"Hi there! How can we help you?"}),e.jsx("p",{className:"hero-subtitle",children:"Select one of our pre-sorted categories"})]}),e.jsx("div",{className:"tabs-container",children:e.jsxs("div",{className:"tabs",children:[e.jsxs("button",{className:`tab ${t==="general"?"active":""}`,onClick:()=>F("general"),role:"tab","aria-selected":t==="general",children:[e.jsx("span",{className:"tab-text-full",children:"General Questions"}),e.jsx("span",{className:"tab-text-short",children:"General"})]}),e.jsxs("button",{className:`tab ${t==="travelers"?"active":""}`,onClick:()=>F("travelers"),role:"tab","aria-selected":t==="travelers",children:[e.jsx("span",{className:"tab-text-full",children:"For Guests"}),e.jsx("span",{className:"tab-text-short",children:"Guest"})]}),e.jsxs("button",{className:`tab ${t==="hosts"?"active":""}`,onClick:()=>F("hosts"),role:"tab","aria-selected":t==="hosts",children:[e.jsx("span",{className:"tab-text-full",children:"For Hosts"}),e.jsx("span",{className:"tab-text-short",children:"Host"})]})]})}),e.jsxs("main",{className:"faq-container",children:[d&&e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading FAQs..."})]}),b&&e.jsxs("div",{className:"error-container",children:[e.jsx("p",{className:"error-message",children:b}),e.jsx("button",{onClick:A,className:"retry-btn",children:"Retry"})]}),!d&&!b&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`tab-content ${t==="general"?"active":""}`,children:e.jsx(k,{faqs:m.general,openQuestionId:t==="general"?a:null})}),e.jsx("div",{className:`tab-content ${t==="travelers"?"active":""}`,children:e.jsx(k,{faqs:m.travelers,openQuestionId:t==="travelers"?a:null})}),e.jsx("div",{className:`tab-content ${t==="hosts"?"active":""}`,children:e.jsx(k,{faqs:m.hosts,openQuestionId:t==="hosts"?a:null})})]})]}),e.jsx("section",{className:"bottom-cta",children:e.jsx("a",{href:"#",className:"cta-link",onClick:$,children:"Can't find the answer to your question?"})}),N&&e.jsx("div",{className:"modal-overlay",onClick:I,children:e.jsxs("div",{className:"modal-content",onClick:s=>s.stopPropagation(),children:[e.jsx("button",{className:"modal-close",onClick:I,"aria-label":"Close modal",children:"×"}),e.jsx("h2",{className:"modal-title",children:"Ask Us a Question"}),e.jsx("p",{className:"modal-subtitle",children:"We'll get back to you as soon as possible"}),Q?e.jsxs("div",{className:"success-message",children:[e.jsx("div",{className:"success-icon",children:"✓"}),e.jsx("p",{children:"Thank you! Your inquiry has been sent successfully."})]}):e.jsxs("form",{onSubmit:P,className:"inquiry-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"inquiry-name",children:"Name *"}),e.jsx("input",{type:"text",id:"inquiry-name",value:u.name,onChange:s=>w("name",s.target.value),placeholder:"Enter your name",required:!0,disabled:y})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"inquiry-email",children:"Email *"}),e.jsx("input",{type:"email",id:"inquiry-email",value:u.email,onChange:s=>w("email",s.target.value),placeholder:"Enter your email",required:!0,disabled:y})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"inquiry-text",children:"Your Question *"}),e.jsx("textarea",{id:"inquiry-text",value:u.inquiry,onChange:s=>w("inquiry",s.target.value),placeholder:"Tell us what you'd like to know...",rows:"5",required:!0,disabled:y})]}),E&&e.jsx("div",{className:"error-message-form",children:E}),e.jsx("button",{type:"submit",className:"submit-btn",disabled:y,children:y?"Sending...":"Send"})]})]})}),e.jsx(L,{})]})}function k({faqs:t,openQuestionId:o}){const[m,f]=n.useState(null);if(n.useEffect(()=>{if(o&&t&&t.length>0){const a=t.findIndex(r=>r._id&&r._id.toString()===o||r.Question.toLowerCase().includes(o)||r.Question.toLowerCase().replace(/[^a-z0-9]/g,"").includes(o.replace(/[^a-z0-9]/g,"")));a!==-1&&(f(a),setTimeout(()=>{const r=document.querySelector(`[data-question-index="${a}"]`);r&&r.scrollIntoView({behavior:"smooth",block:"center"})},300))}},[o,t]),!t||t.length===0)return e.jsx("p",{style:{textAlign:"center",padding:"40px",color:"#666"},children:"No FAQs available in this category."});const d={};t.forEach(a=>{const r=a["sub-category"]||"General";d[r]||(d[r]=[]),d[r].push(a)});const j=a=>{f(m===a?null:a)},b=(a,r)=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),j(r))};let v=0;return e.jsx(e.Fragment,{children:Object.entries(d).map(([a,r])=>e.jsxs("section",{className:"faq-section",children:[e.jsx("h2",{className:"section-title",children:a}),r.map(N=>{const c=v++,u=m===c;return e.jsxs("div",{className:`accordion-item ${u?"active":""}`,"data-question-index":c,children:[e.jsxs("div",{className:"accordion-header",tabIndex:"0",role:"button","aria-expanded":u,onClick:()=>j(c),onKeyPress:p=>b(p,c),children:[e.jsx("h3",{children:N.Question}),e.jsx("span",{className:"accordion-icon"})]}),e.jsx("div",{className:"accordion-content",children:e.jsx("div",{className:"accordion-content-inner",children:e.jsx("p",{children:N.Answer})})})]},c)})]},a))})}R(document.getElementById("root")).render(e.jsx(G.StrictMode,{children:e.jsx(z,{children:e.jsx(B,{})})}));
