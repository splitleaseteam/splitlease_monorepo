import{r as b,j as s,b as Me}from"./client-BJVKzfAi.js";import{d as Ee,e as Ie}from"./dataLookups-zG18yzis.js";import{s as L}from"./supabase-BoCLEw6R.js";import{t as G,c as ee,f as ne}from"./format-AibE8BX3.js";import{R as _e}from"./Footer-Bzf1rLKh.js";/* empty css                           */const Ye=["Found another property","Changed move-in dates","Changed budget","Changed location preference","No longer need housing","Host not responsive","Terms not acceptable","Other"],Re=["Already have another guest","Decided to change the price of my listing for that time frame","Want a different schedule","Other / Do not want to say"];function Ae(e){if(e==="host"){const a=Ee();return a.length>0?a.map(n=>({id:String(n.id),label:n.reason})):Re.map((n,i)=>({id:`fallback_${i}`,label:n}))}const t=Ie();return t.length>0?t.map(a=>({id:String(a.id),label:a.reason})):Ye.map((a,n)=>({id:`fallback_${n}`,label:a}))}function Fe(e){const t=e.toLowerCase();return t==="other"||t.startsWith("other ")}function Zt({isOpen:e,proposal:t,listing:a,userType:n="guest",buttonText:i,onClose:r,onConfirm:l}){var se;const[m,c]=b.useState(""),[d,v]=b.useState(""),[h,w]=b.useState(!1);if(!e)return null;const p=n==="host",g=Ae(n),T=g.find(C=>C.id===m),N=T&&Fe(T.label),D=a||(t==null?void 0:t._listing)||(t==null?void 0:t.listing),j=(D==null?void 0:D.Name)||(D==null?void 0:D.name)||"this property",u=(t==null?void 0:t.guestName)||((se=t==null?void 0:t.guest)==null?void 0:se.name)||"this guest",R=(i||(p?"Reject Proposal":"Cancel Proposal")).includes("Decline"),O=()=>R?"Decline Counteroffer":p?"Reject Proposal":"Cancel Proposal",H=()=>R?`Are you sure you want to decline the host's counteroffer for ${j}?`:p?s.jsxs(s.Fragment,{children:["Are you sure you want to reject this proposal from ",s.jsx("strong",{children:u}),"?"]}):`Are you sure you want to cancel your proposal for ${j}?`;async function V(){try{w(!0);let C=(T==null?void 0:T.label)||"";N&&d.trim()?C=d.trim():d.trim()&&(C=`${C}: ${d.trim()}`),await l(C||void 0)}catch(C){console.error("[CancelProposalModal] Error:",C)}finally{w(!1)}}function A(){c(""),v(""),r()}const P={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},_={backgroundColor:"#ffffff",borderRadius:"10px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",width:"100%",maxWidth:"460px",margin:"0 20px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},x={display:"flex",alignItems:"flex-start",justifyContent:"space-between",padding:"20px",borderBottom:"1px solid #e5e7eb"},y={display:"flex",alignItems:"center",gap:"10px"},o={fontSize:"18px",fontWeight:"600",color:"#111827",margin:0},f={fontSize:"13px",color:"#dc2626",margin:0},S={color:"#9ca3af",fontSize:"24px",lineHeight:1,padding:"4px",background:"none",border:"none",cursor:"pointer"},E={padding:"20px"},$={fontSize:"15px",color:"#4b5563",marginBottom:"20px",textAlign:"center"},Z={display:"flex",flexDirection:"column",gap:"10px"},be={display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"6px",borderRadius:"4px"},we={width:"18px",height:"18px",accentColor:"#7c3aed"},De={fontSize:"15px",color:"#374151"},Se={width:"100%",padding:"10px",fontSize:"15px",border:"1px solid #d1d5db",borderRadius:"6px",resize:"none",marginTop:"14px",boxSizing:"border-box"},je={display:"flex",gap:"14px",padding:"20px",borderTop:"1px solid #e5e7eb"},pe={flex:1,padding:"10px 20px",backgroundColor:"#f3f4f6",color:"#374151",borderRadius:"6px",border:"none",fontSize:"15px",fontWeight:"500",cursor:"pointer"},Te={flex:1,padding:"10px 20px",backgroundColor:"#b91c1c",color:"#ffffff",borderRadius:"6px",border:"none",fontSize:"15px",fontWeight:"500",cursor:"pointer",opacity:h?.5:1},ke=s.jsx("div",{style:P,onClick:A,children:s.jsxs("div",{style:_,onClick:C=>C.stopPropagation(),children:[s.jsxs("div",{style:x,children:[s.jsxs("div",{style:y,children:[s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#ef4444",strokeWidth:"2",children:s.jsx("path",{d:"M19 7L5 7M14 11V17M10 11V17M5 7L6 19C6 20.1046 6.89543 21 8 21H16C17.1046 21 18 20.1046 18 19L19 7M9 7V4C9 3.44772 9.44772 3 10 3H14C14.5523 3 15 3.44772 15 4V7",strokeLinecap:"round",strokeLinejoin:"round"})}),s.jsxs("div",{children:[s.jsxs("h2",{style:o,children:[O(),"?"]}),s.jsx("p",{style:f,children:"This action is irreversible"})]})]}),s.jsx("button",{style:S,onClick:A,children:"Ã—"})]}),s.jsxs("div",{style:E,children:[s.jsx("p",{style:$,children:H()}),s.jsx("div",{style:Z,children:g.map(C=>s.jsxs("label",{style:be,children:[s.jsx("input",{type:"radio",name:"cancellationReason",value:C.id,checked:m===C.id,onChange:Ce=>c(Ce.target.value),style:we}),s.jsx("span",{style:De,children:C.label})]},C.id))}),N&&s.jsx("textarea",{value:d,onChange:C=>v(C.target.value),rows:2,style:Se,placeholder:"Please specify your reason..."})]}),s.jsxs("div",{style:je,children:[s.jsx("button",{style:pe,onClick:A,disabled:h,children:"Cancel"}),s.jsx("button",{style:Te,onClick:V,disabled:h,children:h?"Processing...":p?"Yes, Reject":"Yes, Cancel"})]})]})});return Me.createPortal(ke,document.body)}function fe(e,t,a){const n=G(e,a==null?void 0:a.in);if(isNaN(t))return ee(e,NaN);if(!t)return n;const i=n.getDate(),r=ee(e,n.getTime());r.setMonth(n.getMonth()+t+1,0);const l=r.getDate();return i>=l?r:(n.setFullYear(r.getFullYear(),r.getMonth(),i),n)}function Le(e,t){const a=G(e,t==null?void 0:t.in);return a.setDate(1),a.setHours(0,0,0,0),a}function Oe(e,t){return G(e,t==null?void 0:t.in).getDay()}function He(e,t){const a=G(e,t==null?void 0:t.in),n=a.getFullYear(),i=a.getMonth(),r=ee(a,0);return r.setFullYear(n,i+1,0),r.setHours(0,0,0,0),r.getDate()}function Ve(e,t,a){return fe(e,-1,a)}function Pe(e,t){const a=Ge(t);return"formatToParts"in a?Be(a,e):qe(a,e)}const $e={year:0,month:1,day:2,hour:3,minute:4,second:5};function Be(e,t){try{const a=e.formatToParts(t),n=[];for(let i=0;i<a.length;i++){const r=$e[a[i].type];r!==void 0&&(n[r]=parseInt(a[i].value,10))}return n}catch(a){if(a instanceof RangeError)return[NaN];throw a}}function qe(e,t){const a=e.format(t),n=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(a);return[parseInt(n[3],10),parseInt(n[1],10),parseInt(n[2],10),parseInt(n[4],10),parseInt(n[5],10),parseInt(n[6],10)]}const J={},ae=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),ze=ae==="06/25/2014, 00:00:00"||ae==="â€Ž06â€Ž/â€Ž25â€Ž/â€Ž2014â€Ž â€Ž00â€Ž:â€Ž00â€Ž:â€Ž00";function Ge(e){return J[e]||(J[e]=ze?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),J[e]}function he(e,t,a,n,i,r,l){const m=new Date(0);return m.setUTCFullYear(e,t,a),m.setUTCHours(n,i,r,l),m}const ie=36e5,We=6e4,K={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function ge(e,t,a){if(!e)return 0;let n=K.timezoneZ.exec(e);if(n)return 0;let i,r;if(n=K.timezoneHH.exec(e),n)return i=parseInt(n[1],10),re(i)?-(i*ie):NaN;if(n=K.timezoneHHMM.exec(e),n){i=parseInt(n[2],10);const l=parseInt(n[3],10);return re(i,l)?(r=Math.abs(i)*ie+l*We,n[1]==="+"?-r:r):NaN}if(Ke(e)){t=new Date(t||Date.now());const l=a?t:Ze(t),m=te(l,e);return-(a?m:Je(t,m,e))}return NaN}function Ze(e){return he(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function te(e,t){const a=Pe(e,t),n=he(a[0],a[1]-1,a[2],a[3]%24,a[4],a[5],0).getTime();let i=e.getTime();const r=i%1e3;return i-=r>=0?r:1e3+r,n-i}function Je(e,t,a){let i=e.getTime()-t;const r=te(new Date(i),a);if(t===r)return t;i-=r-t;const l=te(new Date(i),a);return r===l?r:Math.max(r,l)}function re(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}const oe={};function Ke(e){if(oe[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),oe[e]=!0,!0}catch{return!1}}function le(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+e-+t}const Qe=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,Q=36e5,ce=6e4,Xe=2,M={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:Qe};function Ue(e,t={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);const a=t.additionalDigits==null?Xe:Number(t.additionalDigits);if(a!==2&&a!==1&&a!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(Object.prototype.toString.call(e)!=="[object String]")return new Date(NaN);const n=et(e),{year:i,restDateString:r}=tt(n.date,a),l=nt(r,i);if(l===null||isNaN(l.getTime()))return new Date(NaN);if(l){const m=l.getTime();let c=0,d;if(n.time&&(c=st(n.time),c===null||isNaN(c)))return new Date(NaN);if(n.timeZone||t.timeZone){if(d=ge(n.timeZone||t.timeZone,new Date(m+c)),isNaN(d))return new Date(NaN)}else d=le(new Date(m+c)),d=le(new Date(m+c+d));return new Date(m+c+d)}else return new Date(NaN)}function et(e){const t={};let a=M.dateTimePattern.exec(e),n;if(a?(t.date=a[1],n=a[3]):(a=M.datePattern.exec(e),a?(t.date=a[1],n=a[2]):(t.date=null,n=e)),n){const i=M.timeZone.exec(n);i?(t.time=n.replace(i[1],""),t.timeZone=i[1].trim()):t.time=n}return t}function tt(e,t){if(e){const a=M.YYY[t],n=M.YYYYY[t];let i=M.YYYY.exec(e)||n.exec(e);if(i){const r=i[1];return{year:parseInt(r,10),restDateString:e.slice(r.length)}}if(i=M.YY.exec(e)||a.exec(e),i){const r=i[1];return{year:parseInt(r,10)*100,restDateString:e.slice(r.length)}}}return{year:null}}function nt(e,t){if(t===null)return null;let a,n,i;if(!e||!e.length)return a=new Date(0),a.setUTCFullYear(t),a;let r=M.MM.exec(e);if(r)return a=new Date(0),n=parseInt(r[1],10)-1,me(t,n)?(a.setUTCFullYear(t,n),a):new Date(NaN);if(r=M.DDD.exec(e),r){a=new Date(0);const l=parseInt(r[1],10);return rt(t,l)?(a.setUTCFullYear(t,0,l),a):new Date(NaN)}if(r=M.MMDD.exec(e),r){a=new Date(0),n=parseInt(r[1],10)-1;const l=parseInt(r[2],10);return me(t,n,l)?(a.setUTCFullYear(t,n,l),a):new Date(NaN)}if(r=M.Www.exec(e),r)return i=parseInt(r[1],10)-1,ue(i)?de(t,i):new Date(NaN);if(r=M.WwwD.exec(e),r){i=parseInt(r[1],10)-1;const l=parseInt(r[2],10)-1;return ue(i,l)?de(t,i,l):new Date(NaN)}return null}function st(e){let t,a,n=M.HH.exec(e);if(n)return t=parseFloat(n[1].replace(",",".")),X(t)?t%24*Q:NaN;if(n=M.HHMM.exec(e),n)return t=parseInt(n[1],10),a=parseFloat(n[2].replace(",",".")),X(t,a)?t%24*Q+a*ce:NaN;if(n=M.HHMMSS.exec(e),n){t=parseInt(n[1],10),a=parseInt(n[2],10);const i=parseFloat(n[3].replace(",","."));return X(t,a,i)?t%24*Q+a*ce+i*1e3:NaN}return null}function de(e,t,a){t=t||0,a=a||0;const n=new Date(0);n.setUTCFullYear(e,0,4);const i=n.getUTCDay()||7,r=t*7+a+1-i;return n.setUTCDate(n.getUTCDate()+r),n}const at=[31,28,31,30,31,30,31,31,30,31,30,31],it=[31,29,31,30,31,30,31,31,30,31,30,31];function xe(e){return e%400===0||e%4===0&&e%100!==0}function me(e,t,a){if(t<0||t>11)return!1;if(a!=null){if(a<1)return!1;const n=xe(e);if(n&&a>it[t]||!n&&a>at[t])return!1}return!0}function rt(e,t){if(t<1)return!1;const a=xe(e);return!(a&&t>366||!a&&t>365)}function ue(e,t){return!(e<0||e>52||t!=null&&(t<0||t>6))}function X(e,t,a){return!(e<0||e>=25||t!=null&&(t<0||t>=60)||a!=null&&(a<0||a>=60))}function ot(e,t,a){e=Ue(e,a);const n=ge(t,e,!0),i=new Date(e.getTime()-n),r=new Date(0);return r.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),r.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),r}const ve="America/New_York",Ne=e=>ot(e,ve),Y=(e,t="MMM d, yyyy h:mm a")=>{const a=Ne(e);return ne(a,t)+" (EST)"},lt=(e,t=8,a=20,n=30)=>{const i=[];for(let r=t;r<a;r++)for(let l=0;l<60;l+=n){const m=new Date(e);m.setHours(r,l,0,0),i.push(m)}return i},ct=e=>{const t=He(e),a=Le(e),n=Oe(a),i=[];for(let r=0;r<n;r++)i.push(null);for(let r=1;r<=t;r++)i.push(new Date(e.getFullYear(),e.getMonth(),r));return i},dt=e=>Ve(e),mt=e=>fe(e,1),q=e=>e<new Date,U=(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate(),B=(e,t)=>e.getTime()===t.getTime(),ye=e=>e.toISOString(),ut=(e,t)=>{var d,v,h;if(!e.bookedDate)return"";const a=Ne(new Date(e.bookedDate)),n=new Date(a);n.setHours(n.getHours()+1);const i=w=>ne(w,"yyyyMMdd'T'HHmmss"),r=encodeURIComponent(`Virtual Meeting - ${((d=t.listing)==null?void 0:d.name)||"Split Lease Property"}`),l=((v=t.guest)==null?void 0:v.firstName)||((h=t.guest)==null?void 0:h.name)||"Guest",m=encodeURIComponent(`Virtual meeting with ${l}
${e.googleMeetLink||e.meetingLink||""}`),c=`${i(a)}/${i(n)}`;return`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${r}&details=${m}&dates=${c}&ctz=${ve}`},ft=()=>Array.from({length:12},(e,t)=>ne(new Date(2e3,t,1),"MMMM")),ht=()=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];async function gt(e,t,a){try{const{data:n,error:i}=await L.functions.invoke("virtual-meeting",{body:{action:"accept",payload:{proposalId:e,bookedDate:ye(t),userAcceptingId:a}}});if(i)throw new Error(i.message||"Failed to accept virtual meeting");return{status:"success",data:n==null?void 0:n.data}}catch(n){return console.error("API Error (accept-virtual-meeting):",n),{status:"error",message:n instanceof Error?n.message:"Unknown error occurred"}}}async function xt(e,t,a,n=!1,i="America/New_York"){try{const r=t.map(ye);console.log("[VM Service] Creating request:",{proposalId:e,timesSelectedCount:t.length,timesSelectedISO:r,requestedById:a,isAlternativeTimes:n});const{data:l,error:m}=await L.functions.invoke("virtual-meeting",{body:{action:"create",payload:{proposalId:e,timesSelected:r,requestedById:a,isAlternativeTimes:n,timezoneString:i}}});if(console.log("[VM Service] Response:",{responseData:l,error:m}),m){let c=m.message||"Failed to create virtual meeting";if(m.context&&typeof m.context.json=="function")try{const d=await m.context.json();console.error("[VM Service] Error response body:",d),c=(d==null?void 0:d.error)||(d==null?void 0:d.message)||c}catch(d){console.error("[VM Service] Could not parse error response:",d)}throw console.error("[VM Service] Error details:",{message:m.message,extractedError:c,responseData:l}),new Error(c)}if(l&&l.success===!1)throw console.error("[VM Service] API returned error:",l),new Error(l.error||l.message||"API returned error");return{status:"success",data:l==null?void 0:l.data}}catch(r){return console.error("API Error (create-virtual-meeting):",r),{status:"error",message:r instanceof Error?r.message:"Unknown error occurred"}}}async function vt(e){try{const{data:t,error:a}=await L.functions.invoke("virtual-meeting",{body:{action:"decline",payload:{proposalId:e}}});if(a)throw new Error(a.message||"Failed to decline virtual meeting");return{status:"success",data:t==null?void 0:t.data}}catch(t){return console.error("API Error (decline-virtual-meeting):",t),{status:"error",message:t instanceof Error?t.message:"Unknown error occurred"}}}async function Nt(e,t){try{const{data:a,error:n}=await L.functions.invoke("virtual-meeting",{body:{action:"delete",payload:{virtualMeetingId:e,proposalId:t}}});if(n)throw new Error(n.message||"Failed to cancel virtual meeting");return{status:"success",data:a==null?void 0:a.data}}catch(a){return console.error("API Error (cancel-virtual-meeting):",a),{status:"error",message:a instanceof Error?a.message:"Unknown error occurred"}}}async function yt(e,t){try{const{data:a,error:n}=await L.functions.invoke("virtual-meeting",{body:{action:"send_calendar_invite",payload:{proposalId:e,userId:t}}});if(n)throw new Error(n.message||"Failed to send calendar invite");return{status:"success",data:a==null?void 0:a.data}}catch(a){return console.error("API Error (send-calendar-invite):",a),{status:"error",message:a instanceof Error?a.message:"Unknown error occurred"}}}async function bt(e,t,a){try{const{data:n,error:i}=await L.functions.invoke("virtual-meeting",{body:{action:"notify_participants",payload:{hostId:e,guestId:t,virtualMeetingId:a}}});if(i)throw new Error(i.message||"Failed to notify participants");return{status:"success",data:n==null?void 0:n.data}}catch(n){return console.error("API Error (notify-participants):",n),{status:"error",message:n instanceof Error?n.message:"Unknown error occurred"}}}async function wt(e,t){try{const{data:a,error:n}=await L.from("virtualmeetingschedulesandlinks").update({...t,"Modified Date":new Date().toISOString()}).eq("_id",e).select().single();if(n)throw n;return{status:"success",data:a}}catch(a){return console.error("Direct Update Error:",a),{status:"error",message:a instanceof Error?a.message:"Failed to update meeting"}}}async function Dt(e,t=3,a=1e3){let n=null;for(let i=0;i<t;i++){const r=await e();if(r.status==="success")return r;n=r,i<t-1&&await new Promise(l=>setTimeout(l,a*(i+1)))}return n||{status:"error",message:"All retry attempts failed"}}const z={acceptMeeting:gt,createRequest:xt,declineMeeting:vt,cancelMeeting:Nt,sendGoogleCalendar:yt,notifyParticipants:bt,updateDirect:wt,retry:Dt};function St({proposal:e,onConfirm:t,onDecline:a,onSuggestAlt:n}){const[i,r]=b.useState(null),[l,m]=b.useState(!1),[c,d]=b.useState(!1),[v,h]=b.useState(null),w=u=>{r(u),m(!0)},p=async()=>{if(i){d(!0),h(null);try{await t(i),m(!1)}catch(u){h(u instanceof Error?u.message:"Failed to confirm meeting"),d(!1)}}},g=async()=>{d(!0),h(null);try{await a()}catch(u){h(u instanceof Error?u.message:"Failed to decline meeting"),d(!1)}},T=()=>{var u,k;return(u=e.host)!=null&&u.name?e.host.name:(k=e.host)!=null&&k.firstName?e.host.firstName:"the host"},N=()=>{var u,k;return(u=e.guest)!=null&&u.firstName?e.guest.firstName:(k=e.guest)!=null&&k.name?e.guest.name:"you"},j=e.availableTimes?e.availableTimes.map(u=>u instanceof Date?u:new Date(u)).filter(u=>!isNaN(u.getTime())):[];return s.jsxs("div",{className:"vm-respond-container",children:[s.jsx("div",{className:"vm-header",children:s.jsxs("div",{className:"vm-header-title",children:[s.jsx("span",{className:"vm-icon",children:"ðŸ“…"}),s.jsx("h2",{className:"vm-title",children:"Virtual Meeting Response"})]})}),v&&s.jsx("div",{className:"vm-error",children:v}),s.jsxs("p",{className:"vm-description",children:["Select one of the available dates proposed by ",T()," for"," ",N()," below. All times are in EST timezone."]}),s.jsx("div",{className:"vm-time-slots",children:j&&j.length>0?j.map((u,k)=>s.jsxs("label",{className:"vm-time-slot-option",children:[s.jsx("input",{type:"radio",name:"timeSlot",value:u.toString(),checked:(i==null?void 0:i.getTime())===u.getTime(),onChange:()=>w(u),disabled:c}),s.jsx("span",{children:Y(u)})]},k)):s.jsx("p",{className:"vm-description",children:"No time slots available. Please suggest alternative times."})}),s.jsx("div",{className:"vm-alternative-section",children:s.jsxs("div",{className:"vm-info-box-with-buttons",children:[s.jsx("p",{className:"vm-info-text",children:"If none of the times work for you, you may submit alternative times for the host to choose from."}),s.jsxs("div",{className:"vm-button-group",children:[s.jsx("button",{className:"vm-button-decline",onClick:g,disabled:c,children:"Decline"}),s.jsx("button",{className:"vm-button-primary",onClick:n,disabled:c,children:"Suggest Alternative Times"})]})]})}),l&&i&&s.jsxs("div",{className:"vm-confirm-section",children:[s.jsx("p",{className:"vm-confirm-message",children:"Are you sure you want this time slot:"}),s.jsx("p",{className:"vm-confirm-time-slot",children:Y(i)}),s.jsxs("div",{className:"vm-button-group",children:[s.jsx("button",{className:"vm-button-outline",onClick:()=>m(!1),disabled:c,children:"Cancel"}),s.jsx("button",{className:"vm-button-primary",onClick:p,disabled:c,children:c?"Confirming...":"Yes"})]})]})]})}function jt({initialStartTime:e=8,initialEndTime:t=20,interval:a=30,maxSelections:n=3,onSelectionChange:i,timezone:r="America/New_York",disabledDates:l=[],selectedSlots:m=[]}){const[c,d]=b.useState({clearTimeSlots:!1,timesSelected:m,endTime:t,internalEditing:!1,interval:a,lastLogicalDate:null,requestingCoh:!1,startTime:e}),[v,h]=b.useState(new Date),[w,p]=b.useState(!1),[g,T]=b.useState(null),[N,D]=b.useState([]),[j,u]=b.useState(!1);b.useEffect(()=>{i&&i(c.timesSelected)},[c.timesSelected,i]),b.useEffect(()=>{c.timesSelected.length>=n&&u(!0)},[c.timesSelected.length,n]);const k=o=>{if(q(o))return;T(o);const f=lt(o,c.startTime,c.endTime,c.interval);D(f),p(!0)},I=o=>{c.timesSelected.some(S=>B(S,o))?d(S=>({...S,timesSelected:S.timesSelected.filter(E=>!B(E,o))})):c.timesSelected.length<n&&d(S=>({...S,timesSelected:[...S.timesSelected,o],internalEditing:!0,lastLogicalDate:o}))},R=o=>{d(f=>({...f,timesSelected:f.timesSelected.filter((S,E)=>E!==o)}))},O=()=>{d(o=>({...o,timesSelected:[],clearTimeSlots:!1,internalEditing:!1}))},H=()=>{h(dt(v))},V=()=>{h(mt(v))},A=()=>{u(o=>!o)},P=o=>!!(q(o)||l.some(f=>B(o,f))||c.timesSelected.length>=n&&!c.timesSelected.some(S=>U(S,o))),_=o=>g&&U(o,g),x=o=>c.timesSelected.some(f=>U(f,o)),y=o=>{const f=["vm-date-button"];return _(o)&&f.push("vm-date-button-active"),x(o)&&f.push("vm-date-button-has-slots"),f.join(" ")};return s.jsxs("div",{className:"vm-book-time-slot-container",children:[s.jsxs("div",{className:"vm-select-date-section",children:[s.jsxs("div",{className:"vm-calendar-header",children:[s.jsx("button",{onClick:H,"aria-label":"Previous month",className:"vm-calendar-nav-btn",children:"â†"}),s.jsx("select",{value:v.getMonth(),onChange:o=>h(new Date(v.getFullYear(),parseInt(o.target.value),1)),"aria-label":"Select month",className:"vm-month-select",children:ft().map((o,f)=>s.jsx("option",{value:f,children:o},f))}),s.jsx("button",{onClick:V,"aria-label":"Next month",className:"vm-calendar-nav-btn",children:"â†’"})]}),s.jsx("div",{className:"vm-days-of-week",children:ht().map(o=>s.jsx("div",{className:"vm-day-header",children:o},o))}),s.jsx("div",{className:"vm-calendar-grid",children:ct(v).map((o,f)=>s.jsx("div",{className:"vm-calendar-cell",children:o&&s.jsx("button",{onClick:()=>k(o),disabled:P(o),className:y(o),"aria-label":`Select ${o.toDateString()}`,children:o.getDate()})},f))})]}),s.jsxs("div",{className:"vm-select-time-section",children:[s.jsx("h3",{className:"vm-select-time-title",children:c.timesSelected.length===0?`Select ${n} Time Slots (EST)`:c.timesSelected.length<n?`Select ${n-c.timesSelected.length} more time slot${n-c.timesSelected.length!==1?"s":""} (EST)`:`${n} time slots selected (EST)`}),s.jsx("div",{className:"vm-selected-slots",children:c.timesSelected.length===0?s.jsx("div",{className:"vm-empty-slots",children:"Click on a date to select time slots"}):c.timesSelected.map((o,f)=>s.jsxs("div",{className:"vm-slot-badge",children:[Y(o,"MMM d, h:mm a"),s.jsx("button",{className:"vm-remove-slot-btn",onClick:()=>R(f),"aria-label":"Remove time slot",children:"Ã—"})]},f))}),s.jsx("button",{onClick:O,disabled:c.timesSelected.length===0,className:"vm-clear-button",children:"Clear Time Slots"})]}),w&&g&&s.jsx(s.Fragment,{children:c.timesSelected.length>=n?s.jsxs("div",{className:"vm-inline-time-slots vm-inline-time-slots--collapsed",children:[s.jsxs("div",{className:"vm-time-picker-header-container",children:[s.jsx("h3",{className:"vm-time-picker-header",children:j?"Modify time slots":`Select Time for ${g.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}`}),s.jsx("button",{className:"vm-grid-toggle-btn",onClick:A,"aria-label":j?"Expand time slots":"Collapse time slots","aria-expanded":!j,type:"button",children:s.jsx("span",{className:"vm-grid-toggle-arrow",children:j?"â–¼":"â–²"})})]}),!j&&s.jsx("div",{className:"vm-time-slots-list",children:N.map((o,f)=>{const S=c.timesSelected.some($=>B($,o)),E=q(o);return s.jsx("button",{onClick:()=>I(o),disabled:E||!S,className:`vm-time-slot-button ${S?"vm-time-slot-selected":""}`,children:Y(o,"h:mm a")},f)})})]}):s.jsxs("div",{className:"vm-inline-time-slots",children:[s.jsxs("h3",{className:"vm-time-picker-header",children:["Select Time for ",g.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]}),s.jsx("div",{className:"vm-time-slots-list",children:N.map((o,f)=>{const S=c.timesSelected.some(Z=>B(Z,o)),E=q(o),$=!S&&c.timesSelected.length>=n;return s.jsx("button",{onClick:()=>I(o),disabled:E||$,className:`vm-time-slot-button ${S?"vm-time-slot-selected":""}`,children:Y(o,"h:mm a")},f)})})]})})]})}function pt({proposal:e,isSuggesting:t,onSubmit:a,onBack:n,currentUser:i}){const[r,l]=b.useState([]),[m,c]=b.useState(!1),[d,v]=b.useState(null),h=g=>{l(g)},w=async()=>{if(r.length!==3){v("Please select exactly 3 time slots");return}c(!0),v(null);try{await a(r,t)}catch(g){v(g instanceof Error?g.message:"Failed to submit request"),c(!1)}},p=()=>{var T,N,D,j,u,k;return t?((T=e.host)==null?void 0:T.name)||((N=e.host)==null?void 0:N.firstName)||"the host":(i==null?void 0:i.typeUserSignup)==="host"?((D=e.guest)==null?void 0:D.firstName)||((j=e.guest)==null?void 0:j.name)||"the guest":((u=e.host)==null?void 0:u.name)||((k=e.host)==null?void 0:k.firstName)||"the host"};return s.jsxs("div",{className:"vm-book-container",children:[s.jsxs("div",{className:"vm-header",children:[t&&s.jsx("button",{className:"vm-back-btn",onClick:n,disabled:m,"aria-label":"Go back",children:"â†"}),s.jsxs("div",{className:"vm-header-title",children:[s.jsx("span",{className:"vm-icon",children:"ðŸ“…"}),s.jsx("h2",{className:"vm-title",children:t?"Suggest Alternative Times":"Request Virtual Meeting"})]})]}),d&&s.jsx("div",{className:"vm-error",children:d}),s.jsx("p",{className:"vm-description",children:t?`Propose 3 alternative time slots for ${p()} to choose from.`:`Select 3 time slots when you're available to meet with ${p()}.`}),s.jsx(jt,{maxSelections:3,onSelectionChange:h,selectedSlots:r,initialStartTime:8,initialEndTime:20,interval:30}),s.jsxs("div",{className:"vm-submit-section",children:[s.jsxs("p",{className:"vm-slots-count",children:["Select 3 time slots to meet (EST). You have selected ",r.length,"/3 slots."]}),s.jsx("button",{className:"vm-button-success",onClick:w,disabled:r.length!==3||m,children:m?"Submitting...":t?"Submit Alternative Times":"Submit Request"})]})]})}function Tt({meeting:e,participantName:t,listingName:a,onCancel:n,onClose:i}){const[r,l]=b.useState(!1),[m,c]=b.useState(null),d=async()=>{l(!0),c(null);try{await n()}catch(g){c(g instanceof Error?g.message:"Failed to cancel meeting"),l(!1)}},v=()=>{const g=e.bookedDate||e["booked date"]||e.booked_date;return g?g instanceof Date?g:new Date(g):null},h=()=>e.googleMeetLink||e["meeting link"]||e.meetingLink,w=v(),p=h();return s.jsxs("div",{className:"vm-cancel-container",children:[s.jsx("div",{className:"vm-header",children:s.jsxs("div",{className:"vm-header-title",children:[s.jsx("span",{className:"vm-icon",children:"ðŸ—‘"}),s.jsx("h2",{className:"vm-title",children:"Cancel Virtual Meeting?"})]})}),m&&s.jsx("div",{className:"vm-error",children:m}),s.jsx("p",{className:"vm-warning-text",children:"This action cannot be undone"}),s.jsx("div",{className:"vm-meeting-info-card",children:s.jsxs("div",{className:"vm-meeting-info-content",children:[s.jsx("span",{className:"vm-meeting-info-icon",children:"ðŸ“…"}),s.jsxs("div",{className:"vm-meeting-info-details",children:[s.jsxs("h3",{className:"vm-meeting-info-title",children:["Meeting with ",t]}),s.jsx("p",{className:"vm-meeting-info-listing",children:a}),w&&s.jsx("p",{className:"vm-meeting-info-date",children:Y(w)}),p&&s.jsx("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"vm-meeting-info-link",children:"View Meeting Link"})]})]})}),s.jsxs("div",{className:"vm-button-group",children:[s.jsx("button",{className:"vm-button-outline",onClick:i,disabled:r,children:"No"}),s.jsx("button",{className:"vm-button-danger",onClick:d,disabled:r,children:r?"Canceling...":"Cancel Meeting"})]})]})}function kt({proposal:e,meeting:t,onClose:a}){const n=()=>{const N=ut(t,e);N&&window.open(N,"_blank","noopener,noreferrer")},i=()=>{var j,u,k,I;const N=((j=e.guest)==null?void 0:j.firstName)||((u=e.guest)==null?void 0:u.firstName),D=((k=e.guest)==null?void 0:k.name)||((I=e.guest)==null?void 0:I.lastName)||"";return`${N||"Guest"} ${D}`.trim()},r=()=>{var N,D;return((N=e.guest)==null?void 0:N.profilePhoto)||((D=e.guest)==null?void 0:D["profile photo"])},l=()=>{var N,D;return((N=e.listing)==null?void 0:N.name)||((D=e._listing)==null?void 0:D.name)||"Property"},m=()=>{const N=t.bookedDate||t["booked date"]||t.booked_date;return N?N instanceof Date?N:new Date(N):null},c=()=>t.googleMeetLink||t["meeting link"]||t.meetingLink,d=()=>e.nights||e.Nights||[],v=()=>e.reservationSpan||e["reservation span"]||e.reservationspan,h=m(),w=c(),p=r(),g=d(),T=v();return s.jsxs("div",{className:"vm-details-container",children:[s.jsxs("div",{className:"vm-header",children:[s.jsx("div",{className:"vm-header-title",children:s.jsx("h2",{className:"vm-title",children:"Virtual Meeting Details"})}),s.jsx("button",{className:"vm-close-btn",onClick:a,children:"Ã—"})]}),p&&s.jsx("div",{className:"vm-profile-section",children:s.jsx("img",{src:p,alt:i(),className:"vm-profile-photo"})}),s.jsxs("div",{className:"vm-booked-section",children:[s.jsx("h2",{className:"vm-booked-label",children:"Booked for:"}),h&&s.jsxs("h1",{className:"vm-booked-date",children:[Y(h,"EEEE, MMMM d, yyyy"),s.jsx("br",{}),Y(h,"h:mm a")]})]}),s.jsxs("dl",{className:"vm-details-list",children:[s.jsx("dt",{className:"vm-detail-label",children:"Guest:"}),s.jsx("dd",{className:"vm-detail-value",children:i()}),s.jsx("dt",{className:"vm-detail-label",children:"Listing:"}),s.jsx("dd",{className:"vm-detail-value",children:l()}),g&&g.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"vm-detail-label",children:"Weekly Schedule:"}),s.jsx("dd",{className:"vm-detail-value",children:g.join(", ")})]}),T&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"vm-detail-label",children:"Reservation Span:"}),s.jsxs("dd",{className:"vm-detail-value",children:[T," week",T!==1?"s":""]})]})]}),s.jsxs("button",{onClick:n,className:"vm-calendar-button",children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM5 8V6h14v2H5z",fill:"currentColor"})}),"Click to add this meeting to your calendar"]}),w&&s.jsxs("a",{href:w,target:"_blank",rel:"noopener noreferrer",className:"vm-meeting-link",children:[s.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M15 12c0 1.657-1.343 3-3 3s-3-1.343-3-3c0-1.657 1.343-3 3-3s3 1.343 3 3zm9-.449s-4.252 8.449-11.985 8.449c-7.18 0-12.015-8.449-12.015-8.449s4.446-7.551 12.015-7.551c7.694 0 11.985 7.551 11.985 7.551zm-7 .449c0-2.757-2.243-5-5-5s-5 2.243-5 5 2.243 5 5 5 5-2.243 5-5z"})}),"Google Meet Link"]})]})}function Ct(){return s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),s.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]})}function Mt(){return s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),s.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),s.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),s.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),s.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]})}function Et(){return s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}function It({isOpen:e,onClose:t,hostName:a="the host",referralCode:n="user",referrerName:i="",userType:r="guest"}){const[l,m]=b.useState(!1),c=()=>{m(!0)},d=()=>{m(!1)},v=h=>{h.target===h.currentTarget&&t()};return e?l?s.jsx(_e,{isOpen:!0,onClose:d,referralCode:n,userType:r,referrerName:i}):s.jsx("div",{className:"vm-success-modal-overlay",onClick:v,children:s.jsxs("div",{className:"vm-success-modal",children:[s.jsx("button",{className:"vm-success-modal-close",onClick:t,children:s.jsx(Et,{})}),s.jsxs("div",{className:"vm-success-modal-content",children:[s.jsx("div",{className:"vm-success-modal-icon",children:s.jsx(Ct,{})}),s.jsx("h2",{className:"vm-success-modal-title",children:"Meeting Request Sent!"}),s.jsxs("p",{className:"vm-success-modal-message",children:["Your virtual meeting request has been sent to ",a,". They'll review your proposed times and get back to you soon."]}),s.jsx("button",{className:"vm-success-modal-btn",onClick:t,children:"Got it"})]}),s.jsxs("div",{className:"vm-success-modal-referral",children:[s.jsx("div",{className:"vm-success-modal-referral-icon",children:s.jsx(Mt,{})}),s.jsxs("div",{className:"vm-success-modal-referral-content",children:[s.jsx("strong",{children:"Give $50, Get $50"}),s.jsx("span",{children:"Share Split Lease with friends and earn rewards"})]}),s.jsx("button",{className:"vm-success-modal-referral-btn",onClick:c,children:"Invite Friends"})]})]})}):null}function Jt({proposal:e,initialView:t="",onClose:a,currentUser:n,onSuccess:i}){const[r,l]=b.useState(t),[m,c]=b.useState(!1),[d,v]=b.useState(null),[h,w]=b.useState(null),[p,g]=b.useState(!1);b.useEffect(()=>{if(d||h){const x=setTimeout(()=>{v(null),w(null)},5e3);return()=>clearTimeout(x)}},[d,h]);const T=async x=>{try{const y=(n==null?void 0:n._id)||(n==null?void 0:n.userId)||(n==null?void 0:n.id),o=await z.acceptMeeting(e._id||e.id,x,y);if(o.status==="success")w("Meeting confirmed successfully!"),setTimeout(()=>{l("details"),i&&i()},1500);else throw new Error(o.message||"Failed to confirm meeting")}catch(y){throw v(y instanceof Error?y.message:"Failed to confirm meeting"),y}},N=async()=>{try{const x=await z.declineMeeting(e._id||e.id);if(x.status==="success")w("Meeting declined"),setTimeout(()=>{a(),i&&i()},1500);else throw new Error(x.message||"Failed to decline meeting")}catch(x){throw v(x instanceof Error?x.message:"Failed to decline meeting"),x}},D=()=>{c(!0),l("request")},j=async(x,y)=>{try{const o=(n==null?void 0:n._id)||(n==null?void 0:n.userId)||(n==null?void 0:n.id);if(console.log("[VM Manager] Submit request - userId:",o,"currentUser:",n),!o)throw new Error("User ID not found - please refresh and try again");const f=await z.createRequest(e._id||e.id,x,o,y,"America/New_York");if(f.status==="success")y?(w("Alternative times submitted successfully!"),setTimeout(()=>{a(),i&&i()},1500)):(l(""),g(!0));else throw new Error(f.message||"Failed to submit request")}catch(o){throw v(o instanceof Error?o.message:"Failed to submit request"),o}},u=()=>{g(!1),a(),i&&i()},k=async()=>{const x=R();if(x)try{const y=await z.cancelMeeting(x._id||x.id,e._id||e.id);if(y.status==="success")w("Meeting canceled successfully"),setTimeout(()=>{a(),i&&i()},1500);else throw new Error(y.message||"Failed to cancel meeting")}catch(y){throw v(y instanceof Error?y.message:"Failed to cancel meeting"),y}},I=()=>{c(!1),l("respond")},R=()=>e.virtualMeeting||e["virtual meeting"]||e.virtual_meeting,O=()=>{var y,o,f,S;return(n==null?void 0:n.typeUserSignup)==="host"||(n==null?void 0:n.type_user_signup)==="host"?((y=e.guest)==null?void 0:y.firstName)||((o=e.guest)==null?void 0:o.name)||"Guest":((f=e.host)==null?void 0:f.name)||((S=e.host)==null?void 0:S.firstName)||"Host"},H=()=>{var x,y;return((x=e.listing)==null?void 0:x.name)||((y=e._listing)==null?void 0:y.name)||"Property"},V=()=>{var x,y;return((x=e.host)==null?void 0:x.name)||((y=e.host)==null?void 0:y.firstName)||"the host"},A=()=>(n==null?void 0:n["Name - First"])||(n==null?void 0:n.firstName)||(n==null?void 0:n.name)||"",P=()=>(n==null?void 0:n.typeUserSignup)==="host"||(n==null?void 0:n.type_user_signup)==="host"?"host":"guest",_=R();return p?s.jsx(It,{isOpen:!0,onClose:u,hostName:V(),referralCode:(n==null?void 0:n._id)||(n==null?void 0:n.id)||"user",referrerName:A(),userType:P()}):r?s.jsx("div",{className:"vm-overlay",onClick:x=>x.target===x.currentTarget&&a(),children:s.jsxs("div",{className:"vm-container",children:[d&&s.jsx("div",{className:"vm-error",children:d}),h&&s.jsx("div",{className:"vm-success",children:h}),r==="respond"&&s.jsx(St,{proposal:e,onConfirm:T,onDecline:N,onSuggestAlt:D}),r==="request"&&s.jsx(pt,{proposal:e,isSuggesting:m,onSubmit:j,onBack:I,currentUser:n}),r==="cancel"&&_&&s.jsx(Tt,{meeting:_,participantName:O(),listingName:H(),onCancel:k,onClose:a}),r==="details"&&_&&s.jsx(kt,{proposal:e,meeting:_,onClose:a})]})}):null}const F={NO_MEETING:"no_meeting",REQUESTED_BY_ME:"requested_by_me",REQUESTED_BY_OTHER:"requested_by_other",BOOKED_AWAITING_CONFIRMATION:"booked_awaiting_confirmation",CONFIRMED:"confirmed",DECLINED:"declined",EXPIRED:"expired"};function _t(e){if(!e)return[];if(Array.isArray(e))return e;if(typeof e=="string")try{const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}return[]}function W(e){if(!e)return!1;const t=new Date,a=e.bookedDate||e["booked date"],n=e.suggestedDates||e["suggested dates and times"],i=_t(n);return a?new Date(a)<t:i.length===0?!1:i.every(r=>new Date(r)<t)}function Yt(e,t){return e?e.meetingDeclined?F.DECLINED:e.bookedDate&&e.confirmedBySplitlease?F.CONFIRMED:e.bookedDate&&!e.confirmedBySplitlease?F.BOOKED_AWAITING_CONFIRMATION:W(e)?F.EXPIRED:e.requestedBy===t?F.REQUESTED_BY_ME:F.REQUESTED_BY_OTHER:F.NO_MEETING}function Rt(e){return!!(!e||e.meetingDeclined||W(e))}function At(e,t){return e?e.requestedBy!==t&&!e.bookedDate&&!e.meetingDeclined:!1}function Ft(e,t){return e?e.requestedBy===t&&!e.bookedDate&&!e.meetingDeclined:!1}function Lt(e){return e?e.bookedDate&&e.confirmedBySplitlease&&e.meetingLink:!1}function Ot(e){return e?e.bookedDate!==null:!1}function Ht(e,t){return e?e.requestedBy===t&&!e.bookedDate&&!e.confirmedBySplitlease&&!e.meetingDeclined:!1}function Vt(e,t){return e?e.meetingDeclined?"Request Alternative Meeting":W(e)&&!e.bookedDate?"Request New Times":e.bookedDate?e.bookedDate&&!e.confirmedBySplitlease?"View Meeting Details":e.bookedDate&&e.confirmedBySplitlease?"Join Virtual Meeting":"Virtual Meeting":e.requestedBy===t?"Meeting Requested":"Respond to Virtual Meeting":"Request Virtual Meeting"}function Pt(e,t){return e?e.meetingDeclined?"warning":W(e)&&!e.bookedDate?"expired":e.bookedDate&&e.confirmedBySplitlease?"success":e.requestedBy===t&&!e.bookedDate?"disabled":"secondary":"primary"}function Kt(e,t){return{state:Yt(e,t),showButton:!0,buttonText:Vt(e,t),buttonStyle:Pt(e,t),buttonDisabled:Ft(e,t),canRequest:Rt(e),canRespond:At(e,t),canJoin:Lt(e),canViewDetails:Ot(e),canCancel:Ht(e,t)}}export{Zt as C,Jt as V,Kt as a,F as b,Yt as g};
