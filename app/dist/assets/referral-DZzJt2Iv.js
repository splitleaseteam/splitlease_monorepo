import{r as i,j as e,c as C,R as k}from"./client-BJVKzfAi.js";import{H as E}from"./Header-BJKWma2V.js";import{F as L}from"./Footer-Bzf1rLKh.js";import{E as F}from"./ErrorBoundary-9_HbXv1y.js";/* empty css             */import"./config-QPKPRtag.js";import"./auth-QZ4BJadW.js";import"./supabase-BoCLEw6R.js";import"./constants-CPVJY5eo.js";import"./Toast-BQk6Nzgd.js";import"./proposalDataFetcher-CipdyWU2.js";import"./proposalStatuses-1Bj0NYR4.js";function R(){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),e.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),e.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),e.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),e.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]})}function p(){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}function I({referrerName:d,isHost:t}){const o=t?"This bonus is yours when you close your first lease. List your space and start earning.":"This bonus is yours when you complete your first booking. Find your perfect space today.",m=t?"Unlocked after first closed lease":"Unlocked after first booking",s=t?"Host Bonus":"Guest Bonus";return e.jsxs("div",{className:"referral-landing-card",children:[e.jsx("div",{className:"referral-landing-card__corner-accent"}),e.jsxs("div",{className:"referral-landing-card__header",children:[e.jsx("div",{className:"referral-landing-card__brand",children:"SPLIT LEASE"}),e.jsx("div",{className:"referral-landing-card__amount",children:"$50"})]}),e.jsxs("div",{className:"referral-landing-card__content",children:[e.jsx("div",{className:"referral-landing-card__sent-by",children:"Referred by"}),e.jsx("div",{className:"referral-landing-card__name",children:d}),e.jsx("div",{className:"referral-landing-card__message",children:o})]}),e.jsxs("div",{className:"referral-landing-card__footer",children:[e.jsx("div",{className:"referral-landing-card__valid",children:m}),e.jsx("div",{className:"referral-landing-card__badge",children:e.jsx("span",{className:"referral-landing-card__badge-text",children:s})})]})]})}function P(){const[d,t]=i.useState("Your Friend"),[o,m]=i.useState(""),[s,x]=i.useState(!0),[l,j]=i.useState({email:"",phone:""}),[a,h]=i.useState({}),[f,u]=i.useState(!1),[_,v]=i.useState(!1);i.useEffect(()=>{const r=new URLSearchParams(window.location.search),n=r.get("ref")||r.get("code")||"",c=r.get("name")||"Your Friend",w=r.get("type")||"host";m(n),t(decodeURIComponent(c)),x(w==="host")},[]);const g=(r,n)=>{j(c=>({...c,[r]:n})),a[r]&&h(c=>({...c,[r]:""}))},N=()=>{const r={};return l.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||(r.email="Please enter a valid email"):r.email="Email is required",l.phone.trim()?/^[\d\s\-\(\)\+]{10,}$/.test(l.phone.replace(/\s/g,""))||(r.phone="Please enter a valid phone number"):r.phone="Phone number is required",h(r),Object.keys(r).length===0},b=async r=>{if(r.preventDefault(),!!N()){u(!0);try{await new Promise(n=>setTimeout(n,1500)),localStorage.setItem("referral_code",o),localStorage.setItem("referral_type",s?"host":"guest"),localStorage.setItem("referral_email",l.email),localStorage.setItem("referral_phone",l.phone),v(!0),setTimeout(()=>{s?window.location.href="/list-with-us":window.location.href="/search"},2e3)}catch(n){console.error("Error submitting referral:",n),h({submit:"Something went wrong. Please try again."})}finally{u(!1)}}},y=s?["Earn extra income from your unused space","Keep your belongings in place","Flexible scheduling - you control when","Professional guests, verified profiles"]:["Save up to 60% vs hotels","Same space every visit - your NYC home","Leave your belongings between visits","No more packing and unpacking"],S=s?"Claim Your $50 & List Your Space":"Claim Your $50 & Find Your Space";return e.jsxs(e.Fragment,{children:[e.jsx(E,{}),e.jsxs("section",{className:"referral-landing-hero",children:[e.jsx("div",{className:"referral-landing-hero__bg-accent"}),e.jsxs("div",{className:"referral-landing-hero__container",children:[e.jsxs("div",{className:"referral-landing-hero__badge",children:[e.jsx(R,{}),e.jsx("span",{children:"Referral Bonus"})]}),e.jsx("h1",{className:"referral-landing-hero__title",children:"You've Been Invited to Split Lease!"}),e.jsxs("p",{className:"referral-landing-hero__subtitle",children:[d," thinks you'd love Split Lease. Claim your $50 bonus and",s?" start earning from your space.":" find your perfect NYC home base."]})]})]}),e.jsx("section",{className:"referral-landing-main",children:e.jsxs("div",{className:"referral-landing-main__container",children:[e.jsxs("div",{className:"referral-landing-main__left",children:[e.jsx(I,{referrerName:d,isHost:s}),e.jsxs("div",{className:"referral-landing-benefits",children:[e.jsx("h3",{className:"referral-landing-benefits__title",children:s?"Why Host on Split Lease?":"Why Use Split Lease?"}),e.jsx("ul",{className:"referral-landing-benefits__list",children:y.map((r,n)=>e.jsxs("li",{className:"referral-landing-benefits__item",children:[e.jsx("span",{className:"referral-landing-benefits__icon",children:e.jsx(p,{})}),e.jsx("span",{children:r})]},n))})]})]}),e.jsxs("div",{className:"referral-landing-main__right",children:[e.jsx("div",{className:"referral-landing-form-card",children:_?e.jsxs("div",{className:"referral-landing-success",children:[e.jsx("div",{className:"referral-landing-success__icon",children:e.jsx(p,{})}),e.jsx("h3",{children:"You're All Set!"}),e.jsx("p",{children:"Your $50 bonus has been reserved. Redirecting you to get started..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"referral-landing-form-card__title",children:"Claim Your $50 Bonus"}),e.jsx("p",{className:"referral-landing-form-card__subtitle",children:"Enter your details to reserve your bonus and create your account."}),e.jsxs("form",{onSubmit:b,className:"referral-landing-form",children:[e.jsxs("div",{className:"referral-landing-form__field",children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",placeholder:"you@example.com",value:l.email,onChange:r=>g("email",r.target.value),className:a.email?"error":""}),a.email&&e.jsx("span",{className:"referral-landing-form__error",children:a.email})]}),e.jsxs("div",{className:"referral-landing-form__field",children:[e.jsx("label",{htmlFor:"phone",children:"Phone Number"}),e.jsx("input",{type:"tel",id:"phone",placeholder:"(555) 123-4567",value:l.phone,onChange:r=>g("phone",r.target.value),className:a.phone?"error":""}),a.phone&&e.jsx("span",{className:"referral-landing-form__error",children:a.phone})]}),a.submit&&e.jsx("div",{className:"referral-landing-form__submit-error",children:a.submit}),e.jsx("button",{type:"submit",className:"referral-landing-form__submit",disabled:f,children:f?"Processing...":S}),e.jsxs("p",{className:"referral-landing-form__terms",children:["By continuing, you agree to our"," ",e.jsx("a",{href:"/policies#terms",children:"Terms of Service"})," and"," ",e.jsx("a",{href:"/policies#privacy",children:"Privacy Policy"}),"."]})]})]})}),o&&e.jsxs("div",{className:"referral-landing-code",children:[e.jsx("span",{className:"referral-landing-code__label",children:"Referral Code:"}),e.jsx("span",{className:"referral-landing-code__value",children:o})]})]})]})}),e.jsx(L,{})]})}C(document.getElementById("root")).render(e.jsx(k.StrictMode,{children:e.jsx(F,{children:e.jsx(P,{})})}));
