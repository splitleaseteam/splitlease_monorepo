import{r as f,j as t,c as J}from"./client-BJVKzfAi.js";/* empty css             */import{H as T}from"./Header-BJKWma2V.js";import{F as M}from"./Footer-Bzf1rLKh.js";import{c as K,v as Q}from"./auth-QZ4BJadW.js";import{s as u}from"./supabase-BoCLEw6R.js";import{U as X}from"./user-C2rhnql4.js";import{C as ee}from"./calendar-CDI4qHEX.js";import{C as q}from"./circle-check-big-42edTrxg.js";import{c as U}from"./createLucideIcon-CgZZH2OU.js";import{C as te}from"./chevron-right-DMpFmStq.js";import{L as se}from"./loader-circle-BXPWbeXx.js";import{I as ie}from"./info-CcVWtG4-.js";import"./constants-CPVJY5eo.js";import"./Toast-BQk6Nzgd.js";import"./proposalDataFetcher-CipdyWU2.js";import"./proposalStatuses-1Bj0NYR4.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],oe=U("circle",ae);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],re=U("party-popper",ne);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ce=U("rotate-ccw",le),de={login:{id:"login",label:"Log In",description:"Sign in to start the simulation",order:0},A:{id:"A",label:"Mark as Usability Tester",description:"Mark yourself as a usability tester and autofill your rental application",fullLabel:"Step A - Mark myself as usability tester & Autofill Rental Application",order:1},B:{id:"B",label:"Virtual Meeting Invitation",description:"Receive a virtual meeting invitation from Host #1",fullLabel:"Step B - Virtual Meeting Invitation from Host #1",instruction:"Between Step A & Step B: Review your rental application in the dashboard",order:2},C:{id:"C",label:"Host Response",description:"Choose between two scenarios: Host accepts or Host counteroffers",instruction:"Between Step B & Step C: Choose your path - Accept or Counteroffer",order:3,isBranching:!0,paths:{1:{title:"Ending 1: Host #2 Accepts",label:"Host #2 Accepts your Proposal",description:"The host accepts your proposal as submitted"},2:{title:"Ending 2: Host #3 Counteroffers",label:"Host #3 Counteroffers your Proposal",description:"The host sends a counteroffer with modified terms, which you accept"}}},D:{id:"D",label:"Lease Drafting",description:"Drafting of lease documents and house manual",fullLabel:"Step D - Drafting of Lease & House Manual Created",order:4},E:{id:"E",label:"Signing & Payment",description:"Sign the lease and make initial payment",fullLabel:"Step E - Signing of Lease & Initial Payment Made",order:5},complete:{id:"complete",label:"Complete",description:"Simulation completed successfully",order:6}},x={A:1,B:2,C:3,D:4,E:5,complete:6},A={nightlyPrice:150,nightsPerWeek:3,checkInDay:5,checkOutDay:1};function ue(e,o){const s=["login","A","B","C","D","E","complete"],m=s.indexOf(e);if(m<=0)return[];const p=[];for(let i=0;i<m;i++){const l=s[i];l==="C"&&o?p.push(`C${o}`):l!=="C"&&p.push(l)}return(e==="E"||e==="complete")&&p.push(`D${o}`),e==="complete"&&p.push(`E${o}`),p}function pe(e,o,s){switch(e){case"A":return!0;case"B":return o.includes("A");case"C":case"C1":case"C2":return o.includes("B");case"D":case"D1":case"D2":return o.includes(`C${s}`);case"E":case"E1":case"E2":return o.includes(`D${s}`);default:return!1}}function me(){const e=new URLSearchParams(window.location.search);return{step:e.get("step")||"login",path:e.get("path")?parseInt(e.get("path"),10):null,code:e.get("code")||""}}function he(e){const o=new URLSearchParams;e.currentStep&&e.currentStep!=="login"&&o.set("step",e.currentStep),e.selectedPath&&o.set("path",e.selectedPath.toString()),e.usabilityCode&&o.set("code",e.usabilityCode);const s=o.toString()?`?${o.toString()}`:window.location.pathname;window.history.replaceState({},"",s)}function ge(){const[e,o]=f.useState({isChecking:!0,isAuthenticated:!1,shouldRedirect:!1}),[s,m]=f.useState(null),p=me(),[i,l]=f.useState({currentStep:p.step,selectedPath:p.path,completedSteps:[],usabilityCode:p.code,testListingIds:[],testProposalId:null,testLeaseId:null,isLoading:!1,stepInProgress:null,error:null,toast:null}),b=e.isAuthenticated,_=i.currentStep,j=i.selectedPath,w=i.completedSteps,k=i.isLoading,P=i.stepInProgress,D=i.usabilityCode,v=f.useMemo(()=>new Date().toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),[]);f.useEffect(()=>{he(i)},[i.currentStep,i.selectedPath,i.usabilityCode]),f.useEffect(()=>{async function r(){var a,n,c,d;try{if(!await K()){o({isChecking:!1,isAuthenticated:!1,shouldRedirect:!1});return}const C=await Q({clearOnFailure:!1});if(C)m(C),o({isChecking:!1,isAuthenticated:!0,shouldRedirect:!1}),await E(C);else{const{data:{session:S}}=await u.auth.getSession();S!=null&&S.user?(m({userId:((a=S.user.user_metadata)==null?void 0:a.user_id)||S.user.id,_id:((n=S.user.user_metadata)==null?void 0:n.user_id)||S.user.id,firstName:((c=S.user.user_metadata)==null?void 0:c.first_name)||((d=S.user.email)==null?void 0:d.split("@")[0])||"User",email:S.user.email}),o({isChecking:!1,isAuthenticated:!0,shouldRedirect:!1})):o({isChecking:!1,isAuthenticated:!1,shouldRedirect:!1})}}catch(g){console.error("[SimulationGuestsideDemo] Auth check failed:",g),o({isChecking:!1,isAuthenticated:!1,shouldRedirect:!1})}}r()},[]);const E=async r=>{try{const a=r.userId||r._id,{data:n,error:c}=await u.from("user").select('"is usability tester", "Usability Step"').eq("_id",a).single();if(c){console.warn("[SimulationGuestsideDemo] Could not fetch user progress:",c);return}if(n!=null&&n["is usability tester"]&&(n!=null&&n["Usability Step"])){const d=n["Usability Step"];console.log("[SimulationGuestsideDemo] Restoring progress from step:",d);let g="A";d>=5?g="complete":d>=4?g="E":d>=3?g="D":d>=2?g="C":d>=1&&(g="B");const C=ue(g,i.selectedPath);l(S=>({...S,currentStep:g,completedSteps:C}))}}catch(a){console.error("[SimulationGuestsideDemo] Failed to restore progress:",a)}},h=f.useCallback(r=>{l(a=>({...a,toast:r})),setTimeout(()=>{l(a=>({...a,toast:null}))},5e3)},[]),B=f.useCallback(()=>{l(r=>({...r,toast:null}))},[]),y=f.useCallback((r,a)=>{console.error(`[SimulationGuestsideDemo] Step ${r} failed:`,a),h({title:`Step ${r} Failed`,message:a.message||"An unexpected error occurred",type:"error"}),l(n=>({...n,isLoading:!1,stepInProgress:null,error:a.message}))},[h]),R=f.useCallback(async()=>{if(!s){h({title:"Not Authenticated",message:"Please log in first",type:"error"});return}const r=s.userId||s._id;l(a=>({...a,isLoading:!0,stepInProgress:"A"}));try{const{error:a}=await u.from("user").update({"is usability tester":!0,"Usability Step":x.A}).eq("_id",r);if(a)throw a;const{data:n,error:c}=await u.functions.invoke("proposal",{body:{action:"createTestRentalApplication",payload:{userId:r,isUsabilityTest:!0,autofillData:{firstName:s.firstName||s["Name - First"]||"Test",lastName:s.lastName||s["Name - Last"]||"User",email:s.email,phone:"555-555-5555",occupation:"Software Engineer",employer:"Test Company",annualIncome:1e5}}}});c&&console.warn("[SimulationGuestsideDemo] Rental app creation warning:",c),l(d=>({...d,isLoading:!1,stepInProgress:null,currentStep:"B",completedSteps:[...d.completedSteps,"A"]})),h({title:"Step A Complete",message:"You are now marked as a usability tester",type:"success"})}catch(a){y("A",a)}},[s,h,y]),H=f.useCallback(async()=>{var a;if(!s)return;const r=s.userId||s._id;l(n=>({...n,isLoading:!0,stepInProgress:"B"}));try{const{data:n,error:c}=await u.from("listing").select('_id, "Host User", "Name", "Cover Photo"').eq("isForUsability",!0).limit(3);if(c)throw c;if(!n||n.length===0)throw new Error("No test listings found. Please contact admin to set up usability test listings.");const d=n[0];console.log("[SimulationGuestsideDemo] Using test listing:",d._id);const{data:g,error:C}=await u.functions.invoke("proposal",{body:{action:"createTestProposal",payload:{guestId:r,listingId:d._id,hostId:d["Host User"],isUsabilityTest:!0,proposalData:{moveInStart:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0],moveInEnd:new Date(Date.now()+14*24*60*60*1e3).toISOString().split("T")[0],moveOut:new Date(Date.now()+90*24*60*60*1e3).toISOString().split("T")[0],nightsPerWeek:4,checkInDay:2,checkOutDay:6,nightlyPrice:125}}}});if(C)throw C;const S=(g==null?void 0:g.proposalId)||((a=g==null?void 0:g.data)==null?void 0:a.proposalId);try{const{data:I,error:N}=await u.from("virtualmeetingschedulesandlinks").insert({proposal:S,"requested by":d["Host User"],"suggested dates and times":[new Date(Date.now()+2592e5).toISOString(),new Date(Date.now()+432e6).toISOString()],is_usability_test:!0,"Created Date":new Date().toISOString()}).select("_id").single();N?console.warn("[SimulationGuestsideDemo] VM creation warning:",N):I&&await u.from("proposal").update({"virtual meeting":I._id}).eq("_id",S)}catch(I){console.warn("[SimulationGuestsideDemo] VM scheduling warning:",I)}await u.from("user").update({"Usability Step":x.B}).eq("_id",r),l(I=>({...I,isLoading:!1,stepInProgress:null,currentStep:"C",completedSteps:[...I.completedSteps,"B"],testListingIds:n.map(N=>N._id),testProposalId:S})),h({title:"Step B Complete",message:"Virtual meeting invitation sent from Host #1",type:"success"})}catch(n){y("B",n)}},[s,h,y]),G=f.useCallback(async()=>{if(!s)return;const r=s.userId||s._id;l(a=>({...a,isLoading:!0,stepInProgress:"C1",selectedPath:1}));try{const{error:a}=await u.functions.invoke("proposal",{body:{action:"acceptProposal",payload:{proposalId:i.testProposalId,isUsabilityTest:!0,hostPersona:"Host #2"}}});if(a)throw a;await u.from("user").update({"Usability Step":x.C}).eq("_id",r),l(n=>({...n,isLoading:!1,stepInProgress:null,currentStep:"D",completedSteps:[...n.completedSteps,"C1"]})),h({title:"Path 1 Selected",message:"Host #2 has accepted your proposal",type:"success"})}catch(a){y("C1",a)}},[s,i.testProposalId,h,y]),F=f.useCallback(async()=>{if(!s)return;const r=s.userId||s._id;l(a=>({...a,isLoading:!0,stepInProgress:"C2",selectedPath:2}));try{const{error:a}=await u.functions.invoke("proposal",{body:{action:"createCounteroffer",payload:{proposalId:i.testProposalId,counterofferData:{"hc nightly price":A.nightlyPrice,"hc nights per week":A.nightsPerWeek,"hc check in day":A.checkInDay,"hc check out day":A.checkOutDay},isUsabilityTest:!0,hostPersona:"Host #3"}}});if(a)throw a;const{error:n}=await u.functions.invoke("proposal",{body:{action:"acceptCounteroffer",payload:{proposalId:i.testProposalId,isUsabilityTest:!0}}});if(n)throw n;await u.from("user").update({"Usability Step":x.C}).eq("_id",r),l(c=>({...c,isLoading:!1,stepInProgress:null,currentStep:"D",completedSteps:[...c.completedSteps,"C2"]})),h({title:"Path 2 Selected",message:"You accepted Host #3's counteroffer",type:"success"})}catch(a){y("C2",a)}},[s,i.testProposalId,h,y]),z=f.useCallback(async r=>{if(!s)return;const a=s.userId||s._id,n=`D${r}`;l(c=>({...c,isLoading:!0,stepInProgress:n}));try{const{data:c,error:d}=await u.from("bookings_leases").insert({proposal:i.testProposalId,"Guest User":a,"Lease Status":"Drafting","Lease signed?":!1,is_usability_test:!0,"Created Date":new Date().toISOString()}).select("_id").single();d&&console.warn("[SimulationGuestsideDemo] Lease creation warning:",d);const g=c==null?void 0:c._id;await u.from("proposal").update({Status:"Lease Documents Sent for Review","Modified Date":new Date().toISOString()}).eq("_id",i.testProposalId),await u.from("user").update({"Usability Step":x.D}).eq("_id",a),l(C=>({...C,isLoading:!1,stepInProgress:null,currentStep:"E",completedSteps:[...C.completedSteps,n],testLeaseId:g})),h({title:"Step D Complete",message:"Lease documents created and sent for review",type:"success"})}catch(c){y(n,c)}},[s,i.testProposalId,h,y]),V=f.useCallback(async r=>{if(!s)return;const a=s.userId||s._id,n=`E${r}`;l(c=>({...c,isLoading:!0,stepInProgress:n}));try{i.testLeaseId&&await u.from("bookings_leases").update({"Lease signed?":!0}).eq("_id",i.testLeaseId),await u.from("proposal").update({Status:"Lease Documents Signed / Awaiting Initial payment"}).eq("_id",i.testProposalId),console.log("[SimulationGuestsideDemo] Simulating payment for lease:",i.testLeaseId);const c={leaseId:i.testLeaseId,proposalId:i.testProposalId,amount:1e3,paymentMethod:"test_local_simulation",status:"completed",timestamp:new Date().toISOString()};console.log("[SimulationGuestsideDemo] Simulated payment:",c),await u.from("proposal").update({Status:"Initial Payment Submitted / Lease activated"}).eq("_id",i.testProposalId),i.testLeaseId&&await u.from("bookings_leases").update({"Lease Status":"Active"}).eq("_id",i.testLeaseId),await u.from("user").update({"Usability Step":x.complete}).eq("_id",a),l(d=>({...d,isLoading:!1,stepInProgress:null,currentStep:"complete",completedSteps:[...d.completedSteps,n]})),h({title:"Simulation Complete!",message:"Congratulations! You have completed the guest-side rental journey.",type:"success"})}catch(c){y(n,c)}},[s,i.testProposalId,i.testLeaseId,h,y]),Y=f.useCallback(async()=>{if(!s)return;const r=s.userId||s._id;try{await u.from("user").update({"is usability tester":!1,"Usability Step":null}).eq("_id",r),window.history.replaceState({},"",window.location.pathname),l({currentStep:"A",selectedPath:null,completedSteps:[],usabilityCode:"",testListingIds:[],testProposalId:null,testLeaseId:null,isLoading:!1,stepInProgress:null,error:null,toast:null}),h({title:"Simulation Reset",message:"You can start the simulation again",type:"info"})}catch(a){console.error("[SimulationGuestsideDemo] Reset failed:",a)}},[s,h]),W=f.useCallback(r=>{l(a=>({...a,usabilityCode:r}))},[]),Z=f.useCallback(()=>{sessionStorage.setItem("returnTo",window.location.href),window.dispatchEvent(new CustomEvent("openLoginModal"))},[]);return{authState:e,isAuthenticated:b,currentUser:s,currentDateTime:v,currentStep:_,selectedPath:j,completedSteps:w,usabilityCode:D,isLoading:k,stepInProgress:P,testProposalId:i.testProposalId,testLeaseId:i.testLeaseId,toast:i.toast,handleLogin:Z,handleStepA:R,handleStepB:H,handleStepC_Ending1:G,handleStepC_Ending2:F,handleStepD:z,handleStepE:V,handleReset:Y,setUsabilityCode:W,showToast:h,dismissToast:B,canActivateStep:r=>pe(r,w,j)}}function fe({currentUser:e,currentDateTime:o}){var m;const s=(e==null?void 0:e.firstName)||(e==null?void 0:e["Name - First"])||((m=e==null?void 0:e.email)==null?void 0:m.split("@")[0])||"Guest";return t.jsxs("div",{className:"simulation-header",children:[t.jsx("h1",{className:"simulation-header__title",children:"Guest-Side Usability Simulation"}),t.jsx("p",{className:"simulation-header__subtitle",children:"Walk through the complete guest rental journey"}),t.jsxs("div",{className:"simulation-header__info",children:[e&&t.jsxs("div",{className:"simulation-header__user",children:[t.jsx(X,{size:16}),t.jsxs("span",{children:["Logged in as ",s]})]}),t.jsxs("div",{className:"simulation-header__datetime",children:[t.jsx(ee,{size:16}),t.jsx("span",{children:o})]})]})]})}function Se({currentStep:e,completedSteps:o=[],selectedPath:s=null}){const m=["A","B","C","D","E"],p=i=>{if(["C","D","E"].includes(i)&&s){if(o.includes(`${i}${s}`))return"completed"}else if(o.includes(i))return"completed";return i===e?"current":"pending"};return t.jsxs("div",{className:"simulation-progress",children:[t.jsx("div",{className:"simulation-progress__track",children:m.map((i,l)=>{const b=p(i),_=de[i];return t.jsxs("div",{className:"simulation-progress__step-wrapper",children:[t.jsxs("div",{className:`simulation-progress__step simulation-progress__step--${b}`,children:[t.jsx("div",{className:"simulation-progress__icon",children:b==="completed"?t.jsx(q,{size:24}):t.jsx(oe,{size:24})}),t.jsx("span",{className:"simulation-progress__label",children:(_==null?void 0:_.label)||`Step ${i}`})]}),l<m.length-1&&t.jsx(te,{className:"simulation-progress__connector",size:16})]},i)})}),s&&t.jsxs("div",{className:"simulation-progress__path-badge",children:["Path ",s,": ",s===1?"Accept":"Counteroffer"]})]})}function L({step:e,label:o,isActive:s=!1,isCompleted:m=!1,isLoading:p=!1,onClick:i,disabled:l=!1}){const b=l||p||m;let _="";return m?_="step-button--completed":p?_="step-button--loading":s?_="step-button--active":l&&(_="step-button--disabled"),t.jsxs("div",{className:`step-button-container ${_}`,children:[t.jsx("span",{className:"step-button__number",children:e}),t.jsx("button",{className:"step-button",onClick:i,disabled:b,"aria-busy":p,children:t.jsxs("span",{className:"step-button__content",children:[p&&t.jsx(se,{className:"step-button__icon step-button__icon--spinner",size:20}),m&&!p&&t.jsx(q,{className:"step-button__icon step-button__icon--check",size:20}),t.jsxs("span",{className:"step-button__label",children:["Step ",e," - ",o]})]})})]})}function $({text:e,visible:o=!1}){return o?t.jsxs("div",{className:"step-instructions",children:[t.jsx(ie,{className:"step-instructions__icon",size:16}),t.jsx("p",{className:"step-instructions__text",children:e})]}):null}function O({ending:e,title:o,currentStep:s,selectedPath:m,completedSteps:p,stepInProgress:i,onStepC:l,onStepD:b,onStepE:_,disabled:j=!1}){const w=m===e,k=m!==null&&m!==e,P=p.includes(`C${e}`),D=p.includes(`D${e}`),v=p.includes(`E${e}`),E=i===`C${e}`,h=i===`D${e}`,B=i===`E${e}`,y=s==="C"&&!m&&!j,R=s==="D"&&w,H=s==="E"&&w;return t.jsxs("div",{className:`ending-scenario ending-scenario--${e} ${k?"ending-scenario--dimmed":""}`,children:[t.jsx("h3",{className:"ending-scenario__title",children:o}),t.jsxs("div",{className:"ending-scenario__steps",children:[t.jsx(L,{step:"C",label:e===1?"Host #2 Accepts your Proposal":"Host #3 Counteroffers your Proposal",isActive:y,isCompleted:P,isLoading:E,onClick:l,disabled:j||k||P}),t.jsx(L,{step:"D",label:"Drafting of Lease & House Manual Created",isActive:R,isCompleted:D,isLoading:h,onClick:b,disabled:!P||D}),t.jsx(L,{step:"E",label:"Signing of Lease & Initial Payment Made",isActive:H,isCompleted:v,isLoading:B,onClick:_,disabled:!D||v})]})]})}function ye({selectedPath:e,onReset:o}){return t.jsxs("div",{className:"simulation-complete",children:[t.jsx("div",{className:"simulation-complete__icon",children:t.jsx(re,{size:64})}),t.jsx("h2",{className:"simulation-complete__title",children:"Simulation Complete!"}),t.jsxs("p",{className:"simulation-complete__message",children:["Congratulations! You have successfully completed the guest-side rental journey through ",e===1?"Path 1 (Host Accept)":"Path 2 (Host Counteroffer)","."]}),t.jsxs("div",{className:"simulation-complete__summary",children:[t.jsx("h3",{children:"What you experienced:"}),t.jsxs("ul",{children:[t.jsx("li",{children:"Marked yourself as a usability tester"}),t.jsx("li",{children:"Received a virtual meeting invitation from a host"}),t.jsx("li",{children:e===1?"Had your proposal accepted by Host #2":"Received and accepted a counteroffer from Host #3"}),t.jsx("li",{children:"Had lease documents drafted and house manual created"}),t.jsx("li",{children:"Signed the lease and made initial payment"})]})]}),t.jsx("div",{className:"simulation-complete__actions",children:t.jsxs("button",{className:"simulation-complete__reset-button",onClick:o,children:[t.jsx(ce,{size:18}),t.jsx("span",{children:"Reset & Start Over"})]})}),t.jsx("p",{className:"simulation-complete__note",children:"Note: Test data will be automatically cleaned up after 72 hours."})]})}function _e({message:e="Loading..."}){return t.jsxs("div",{className:"simulation-loading",children:[t.jsx("div",{className:"simulation-loading__spinner"}),t.jsx("p",{className:"simulation-loading__message",children:e})]})}function Ce({onLogin:e}){return t.jsxs("div",{className:"simulation-login-prompt",children:[t.jsx("h2",{children:"Authentication Required"}),t.jsx("p",{children:"Please log in to start the usability simulation."}),t.jsx("button",{className:"simulation-login-button",onClick:e,children:"Log In to Continue"})]})}function be({toast:e,onDismiss:o}){if(!e)return null;const s=`simulation-toast--${e.type||"info"}`;return t.jsxs("div",{className:`simulation-toast ${s}`,onClick:o,children:[t.jsx("strong",{className:"simulation-toast__title",children:e.title}),e.message&&t.jsx("p",{className:"simulation-toast__message",children:e.message})]})}function Ie({code:e,onChange:o}){return t.jsxs("div",{className:"simulation-code-section",children:[t.jsx("label",{htmlFor:"usabilityCode",className:"simulation-code-section__label",children:"Usability Code (optional)"}),t.jsx("input",{type:"text",id:"usabilityCode",className:"simulation-code-section__input",value:e,onChange:s=>o(s.target.value),placeholder:"Enter your tracking code"}),t.jsx("p",{className:"simulation-code-section__hint",children:"Enter a code to track your simulation session (for analytics purposes)"})]})}function xe(){const e=ge();return e.authState.isChecking?t.jsxs(t.Fragment,{children:[t.jsx(T,{}),t.jsx("main",{className:"main-content",children:t.jsx("div",{className:"simulation-page",children:t.jsx(_e,{message:"Checking authentication..."})})}),t.jsx(M,{})]}):t.jsxs(t.Fragment,{children:[t.jsx(T,{}),t.jsx("main",{className:"main-content",children:t.jsxs("div",{className:"simulation-page",children:[t.jsxs("div",{className:"simulation-warning",children:[t.jsx("span",{className:"simulation-warning__icon",children:"⚠️"}),t.jsx("span",{children:"Please keep this page open. Reloading will preserve your progress via URL parameters."})]}),t.jsx(fe,{currentUser:e.currentUser,currentDateTime:e.currentDateTime}),e.isAuthenticated?t.jsxs(t.Fragment,{children:[t.jsx(Ie,{code:e.usabilityCode,onChange:e.setUsabilityCode}),t.jsx(Se,{currentStep:e.currentStep,completedSteps:e.completedSteps,selectedPath:e.selectedPath}),e.currentStep!=="complete"?t.jsxs("div",{className:"simulation-steps",children:[t.jsx(L,{step:"A",label:"Mark myself as usability tester & Autofill Rental Application",isActive:e.currentStep==="A"||e.currentStep==="login"&&e.isAuthenticated,isCompleted:e.completedSteps.includes("A"),isLoading:e.stepInProgress==="A",onClick:e.handleStepA,disabled:!e.isAuthenticated}),t.jsx($,{text:"Between Step A & Step B: Review your rental application in the dashboard",visible:e.completedSteps.includes("A")}),t.jsx(L,{step:"B",label:"Virtual Meeting Invitation from Host #1",isActive:e.currentStep==="B",isCompleted:e.completedSteps.includes("B"),isLoading:e.stepInProgress==="B",onClick:e.handleStepB,disabled:!e.completedSteps.includes("A")}),t.jsx($,{text:"Between Step B & Step C: Choose your path - Accept or Counteroffer",visible:e.completedSteps.includes("B")}),e.completedSteps.includes("B")&&t.jsxs("div",{className:"simulation-paths",children:[t.jsx("h2",{className:"simulation-paths__title",children:"Choose Your Path"}),t.jsx("p",{className:"simulation-paths__description",children:"Select one of the two scenarios to continue the simulation"}),t.jsxs("div",{className:"simulation-paths__container",children:[t.jsx(O,{ending:1,title:"Ending 1: Host #2 Accepts",currentStep:e.currentStep,selectedPath:e.selectedPath,completedSteps:e.completedSteps,stepInProgress:e.stepInProgress,onStepC:e.handleStepC_Ending1,onStepD:()=>e.handleStepD(1),onStepE:()=>e.handleStepE(1),disabled:!e.completedSteps.includes("B")}),t.jsx(O,{ending:2,title:"Ending 2: Host #3 Counteroffers",currentStep:e.currentStep,selectedPath:e.selectedPath,completedSteps:e.completedSteps,stepInProgress:e.stepInProgress,onStepC:e.handleStepC_Ending2,onStepD:()=>e.handleStepD(2),onStepE:()=>e.handleStepE(2),disabled:!e.completedSteps.includes("B")})]})]})]}):t.jsx(ye,{selectedPath:e.selectedPath,onReset:e.handleReset})]}):t.jsx(Ce,{onLogin:e.handleLogin}),t.jsx(be,{toast:e.toast,onDismiss:e.dismissToast})]})}),t.jsx(M,{})]})}const je=J(document.getElementById("root"));je.render(t.jsx(xe,{}));
